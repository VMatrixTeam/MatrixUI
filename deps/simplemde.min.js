"use strict";function fixShortcut(e){return e=isMac?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}function createIcon(e,t,i){e=e||{};var n=document.createElement("a");return t=void 0==t||t,e.title&&t&&(n.title=createTootlip(e.title,e.action,i),isMac&&(n.title=n.title.replace("Ctrl","⌘"),n.title=n.title.replace("Alt","⌥"))),n.tabIndex=-1,n.className=e.className,n}function createSep(){var e=document.createElement("i");return e.className="separator",e.innerHTML="|",e}function createTootlip(e,t,i){var n,o=e;return t&&(n=getBindingName(t),i[n]&&(o+=" ("+fixShortcut(i[n])+")")),o}function getState(e,t){t=t||e.getCursor("start");var i=e.getTokenAt(t);if(!i.type)return{};for(var n,o,r=i.type.split(" "),a={},l=0;l<r.length;l++)n=r[l],"strong"===n?a.bold=!0:"variable-2"===n?(o=e.getLine(t.line),/^\s*\d+\.\s/.test(o)?a["ordered-list"]=!0:a["unordered-list"]=!0):"atom"===n?a.quote=!0:"em"===n?a.italic=!0:"quote"===n?a.quote=!0:"strikethrough"===n?a.strikethrough=!0:"comment"===n?a.code=!0:"link"===n?a.link=!0:"tag"===n?a.image=!0:n.match(/^header(\-[1-6])?$/)&&(a[n.replace("header","heading")]=!0);return a}function toggleFullScreen(e){var t=e.codemirror;t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?(saved_overflow=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=saved_overflow;var i=t.getWrapperElement();/fullscreen/.test(i.previousSibling.className)?i.previousSibling.className=i.previousSibling.className.replace(/\s*fullscreen\b/,""):i.previousSibling.className+=" fullscreen";var n=e.toolbarElements.fullscreen;/active/.test(n.className)?n.className=n.className.replace(/\s*active\s*/g,""):n.className+=" active";var o=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(o.className)&&toggleSideBySide(e)}function toggleBold(e){_toggleBlock(e,"bold",e.options.blockStyles.bold)}function toggleItalic(e){_toggleBlock(e,"italic",e.options.blockStyles.italic)}function toggleStrikethrough(e){_toggleBlock(e,"strikethrough","~~")}function toggleCodeBlock(e){function t(e){if("object"!=typeof e)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof e+": "+e;return e.styles&&e.styles[2]&&e.styles[2].indexOf("formatting-code-block")!==-1}function i(e){return e.state.base.base||e.state.base}function n(e,n,o,r,a){o=o||e.getLineHandle(n),r=r||e.getTokenAt({line:n,ch:1}),a=a||!!o.text&&e.getTokenAt({line:n,ch:o.text.length-1});var l=r.type?r.type.split(" "):[];return a&&i(a).indentedCode?"indented":l.indexOf("comment")!==-1&&(i(r).fencedChars||i(a).fencedChars||t(o)?"fenced":"single")}function o(e,t,i,n){var o=t.line+1,r=i.line+1,a=t.line!==i.line,l=n+"\n",s="\n"+n;a&&r++,a&&0===i.ch&&(s=n+"\n",r--),_replaceSelection(e,!1,[l,s]),e.setSelection({line:o,ch:0},{line:r,ch:0})}var r,a,l,s=e.options.blockStyles.code,c=e.codemirror,d=c.getCursor("start"),g=c.getCursor("end"),u=c.getTokenAt({line:d.line,ch:d.ch||1}),m=c.getLineHandle(d.line),f=n(c,d.line,m,u);if("single"===f){var p=m.text.slice(0,d.ch).replace("`",""),h=m.text.slice(d.ch).replace("`","");c.replaceRange(p+h,{line:d.line,ch:0},{line:d.line,ch:99999999999999}),d.ch--,d!==g&&g.ch--,c.setSelection(d,g),c.focus()}else if("fenced"===f)if(d.line!==g.line||d.ch!==g.ch){for(r=d.line;r>=0&&(m=c.getLineHandle(r),!t(m));r--);var v,k,S,b,w=c.getTokenAt({line:r,ch:1}),y=i(w).fencedChars;t(c.getLineHandle(d.line))?(v="",k=d.line):t(c.getLineHandle(d.line-1))?(v="",k=d.line-1):(v=y+"\n",k=d.line),t(c.getLineHandle(g.line))?(S="",b=g.line,0===g.ch&&(b+=1)):0!==g.ch&&t(c.getLineHandle(g.line+1))?(S="",b=g.line+1):(S=y+"\n",b=g.line+1),0===g.ch&&(b-=1),c.operation(function(){c.replaceRange(S,{line:b,ch:0},{line:b+(S?0:1),ch:0}),c.replaceRange(v,{line:k,ch:0},{line:k+(v?0:1),ch:0})}),c.setSelection({line:k+(v?1:0),ch:0},{line:b+(v?1:-1),ch:0}),c.focus()}else{var x=d.line;if(t(c.getLineHandle(d.line))&&("fenced"===n(c,d.line+1)?(r=d.line,x=d.line+1):(a=d.line,x=d.line-1)),void 0===r)for(r=x;r>=0&&(m=c.getLineHandle(r),!t(m));r--);if(void 0===a)for(l=c.lineCount(),a=x;a<l&&(m=c.getLineHandle(a),!t(m));a++);c.operation(function(){c.replaceRange("",{line:r,ch:0},{line:r+1,ch:0}),c.replaceRange("",{line:a-1,ch:0},{line:a,ch:0})}),c.focus()}else if("indented"===f){if(d.line!==g.line||d.ch!==g.ch)r=d.line,a=g.line,0===g.ch&&a--;else{for(r=d.line;r>=0;r--)if(m=c.getLineHandle(r),!m.text.match(/^\s*$/)&&"indented"!==n(c,r,m)){r+=1;break}for(l=c.lineCount(),a=d.line;a<l;a++)if(m=c.getLineHandle(a),!m.text.match(/^\s*$/)&&"indented"!==n(c,a,m)){a-=1;break}}var C=c.getLineHandle(a+1),M=C&&c.getTokenAt({line:a+1,ch:C.text.length-1}),T=M&&i(M).indentedCode;T&&c.replaceRange("\n",{line:a+1,ch:0});for(var N=r;N<=a;N++)c.indentLine(N,"subtract");c.focus()}else{var L=d.line===g.line&&d.ch===g.ch&&0===d.ch,E=d.line!==g.line;L||E?o(c,d,g,s):_replaceSelection(c,!1,["`","`"])}}function toggleBlockquote(e){var t=e.codemirror;_toggleLine(t,"quote")}function toggleHeadingSmaller(e){var t=e.codemirror;_toggleHeading(t,"smaller")}function toggleHeadingBigger(e){var t=e.codemirror;_toggleHeading(t,"bigger")}function toggleHeading1(e){var t=e.codemirror;_toggleHeading(t,void 0,1)}function toggleHeading2(e){var t=e.codemirror;_toggleHeading(t,void 0,2)}function toggleHeading3(e){var t=e.codemirror;_toggleHeading(t,void 0,3)}function toggleUnorderedList(e){var t=e.codemirror;_toggleLine(t,"unordered-list")}function toggleOrderedList(e){var t=e.codemirror;_toggleLine(t,"ordered-list")}function cleanBlock(e){var t=e.codemirror;_cleanBlock(t)}function drawLink(e){var t=e.codemirror,i=getState(t),n=e.options,o="http://";return!(n.promptURLs&&(o=prompt(n.promptTexts.link),!o))&&void _replaceSelection(t,i.link,n.insertTexts.link,o)}function drawImage(e){var t=e.codemirror,i=getState(t),n=e.options,o="http://";return!(n.promptURLs&&(o=prompt(n.promptTexts.image),!o))&&void _replaceSelection(t,i.image,n.insertTexts.image,o)}function drawTable(e){var t=e.codemirror,i=getState(t),n=e.options;_replaceSelection(t,i.table,n.insertTexts.table)}function drawHorizontalRule(e){var t=e.codemirror,i=getState(t),n=e.options;_replaceSelection(t,i.image,n.insertTexts.horizontalRule)}function undo(e){var t=e.codemirror;t.undo(),t.focus()}function redo(e){var t=e.codemirror;t.redo(),t.focus()}function toggleSideBySide(e){var t=e.codemirror,i=t.getWrapperElement(),n=i.nextSibling,o=e.toolbarElements["side-by-side"],r=!1;/editor-preview-active-side/.test(n.className)?(n.className=n.className.replace(/\s*editor-preview-active-side\s*/g,""),o.className=o.className.replace(/\s*active\s*/g,""),i.className=i.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout(function(){t.getOption("fullScreen")||toggleFullScreen(e),n.className+=" editor-preview-active-side"},1),o.className+=" active",i.className+=" CodeMirror-sided",r=!0);var a=i.lastChild;if(/editor-preview-active/.test(a.className)){a.className=a.className.replace(/\s*editor-preview-active\s*/g,"");var l=e.toolbarElements.preview,s=i.previousSibling;l.className=l.className.replace(/\s*active\s*/g,""),s.className=s.className.replace(/\s*disabled-for-preview*/g,"")}var c=function(){n.innerHTML=e.options.previewRender(e.value(),n)};t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=c),r?(n.innerHTML=e.options.previewRender(e.value(),n),t.on("update",t.sideBySideRenderingFunction)):t.off("update",t.sideBySideRenderingFunction),t.refresh()}function togglePreview(e){var t=e.codemirror,i=t.getWrapperElement(),n=i.previousSibling,o=!!e.options.toolbar&&e.toolbarElements.preview,r=i.lastChild;r&&/editor-preview/.test(r.className)||(r=document.createElement("div"),r.className="editor-preview",i.appendChild(r)),/editor-preview-active/.test(r.className)?(r.className=r.className.replace(/\s*editor-preview-active\s*/g,""),o&&(o.className=o.className.replace(/\s*active\s*/g,""),n.className=n.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout(function(){r.className+=" editor-preview-active"},1),o&&(o.className+=" active",n.className+=" disabled-for-preview")),r.innerHTML=e.options.previewRender(e.value(),r);var a=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(a.className)&&toggleSideBySide(e)}function _replaceSelection(e,t,i,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var o,r=i[0],a=i[1],l=e.getCursor("start"),s=e.getCursor("end");n&&(a=a.replace("#url#",n)),t?(o=e.getLine(l.line),r=o.slice(0,l.ch),a=o.slice(l.ch),e.replaceRange(r+a,{line:l.line,ch:0})):(o=e.getSelection(),e.replaceSelection(r+o+a),l.ch+=r.length,l!==s&&(s.ch+=r.length)),e.setSelection(l,s),e.focus()}}function _toggleHeading(e,t,i){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var n=e.getCursor("start"),o=e.getCursor("end"),r=n.line;r<=o.line;r++)!function(n){var o=e.getLine(n),r=o.search(/[^#]/);o=void 0!==t?r<=0?"bigger"==t?"###### "+o:"# "+o:6==r&&"smaller"==t?o.substr(7):1==r&&"bigger"==t?o.substr(2):"bigger"==t?o.substr(1):"#"+o:1==i?r<=0?"# "+o:r==i?o.substr(r+1):"# "+o.substr(r+1):2==i?r<=0?"## "+o:r==i?o.substr(r+1):"## "+o.substr(r+1):r<=0?"### "+o:r==i?o.substr(r+1):"### "+o.substr(r+1),e.replaceRange(o,{line:n,ch:0},{line:n,ch:99999999999999})}(r);e.focus()}}function _toggleLine(e,t){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var i=getState(e),n=e.getCursor("start"),o=e.getCursor("end"),r={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},a={quote:"> ","unordered-list":"* ","ordered-list":"1. "},l=n.line;l<=o.line;l++)!function(n){var o=e.getLine(n);o=i[t]?o.replace(r[t],"$1"):a[t]+o,e.replaceRange(o,{line:n,ch:0},{line:n,ch:99999999999999})}(l);e.focus()}}function _toggleBlock(e,t,i,n){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){n="undefined"==typeof n?i:n;var o,r=e.codemirror,a=getState(r),l=i,s=n,c=r.getCursor("start"),d=r.getCursor("end");a[t]?(o=r.getLine(c.line),l=o.slice(0,c.ch),s=o.slice(c.ch),"bold"==t?(l=l.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),s=s.replace(/(\*\*|__)/,"")):"italic"==t?(l=l.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),s=s.replace(/(\*|_)/,"")):"strikethrough"==t&&(l=l.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),s=s.replace(/(\*\*|~~)/,"")),r.replaceRange(l+s,{line:c.line,ch:0},{line:c.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(c.ch-=2,c!==d&&(d.ch-=2)):"italic"==t&&(c.ch-=1,c!==d&&(d.ch-=1))):(o=r.getSelection(),"bold"==t?(o=o.split("**").join(""),o=o.split("__").join("")):"italic"==t?(o=o.split("*").join(""),o=o.split("_").join("")):"strikethrough"==t&&(o=o.split("~~").join("")),r.replaceSelection(l+o+s),c.ch+=i.length,d.ch=c.ch+o.length),r.setSelection(c,d),r.focus()}}function _cleanBlock(e){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className))for(var t,i=e.getCursor("start"),n=e.getCursor("end"),o=i.line;o<=n.line;o++)t=e.getLine(o),t=t.replace(/^[ ]*([# ]+|\*|\-|[> ]+|[0-9]+(.|\)))[ ]*/,""),e.replaceRange(t,{line:o,ch:0},{line:o,ch:99999999999999})}function _mergeProperties(e,t){for(var i in t)t.hasOwnProperty(i)&&(t[i]instanceof Array?e[i]=t[i].concat(e[i]instanceof Array?e[i]:[]):null!==t[i]&&"object"==typeof t[i]&&t[i].constructor===Object?e[i]=_mergeProperties(e[i]||{},t[i]):e[i]=t[i]);return e}function extend(e){for(var t=1;t<arguments.length;t++)e=_mergeProperties(e,arguments[t]);return e}function wordCount(e){var t=/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g,i=e.match(t),n=0;if(null===i)return n;for(var o=0;o<i.length;o++)n+=i[o].charCodeAt(0)>=19968?i[o].length:1;return n}function SimpleMDE(e){if(e=e||{},e.parent=this,e.element)this.element=e.element;else if(null===e.element)return void console.log("SimpleMDE: Error. No element was found.");if(void 0===e.toolbar){e.toolbar=[];for(var t in toolbarBuiltInButtons)toolbarBuiltInButtons.hasOwnProperty(t)&&(t.indexOf("separator-")!=-1&&e.toolbar.push("|"),(toolbarBuiltInButtons[t].default===!0||e.showIcons&&e.showIcons.constructor===Array&&e.showIcons.indexOf(t)!=-1)&&e.toolbar.push(t))}e.hasOwnProperty("status")||(e.status=["autosave","lines","words","cursor"]),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=extend({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=extend({},insertTexts,e.insertTexts||{}),e.promptTexts=promptTexts,e.blockStyles=extend({},blockStyles,e.blockStyles||{}),e.shortcuts=extend({},shortcuts,e.shortcuts||{}),void 0!=e.autosave&&void 0!=e.autosave.unique_id&&""!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),this.options=e,this.render(),!e.initialValue||this.options.autosave&&this.options.autosave.foundSavedValue===!0||this.value(e.initialValue)}function isLocalStorageAvailable(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(e){return!1}return!0}var CodeMirror=CodeMirror||{},marked=marked||{};!function(e){var t=/^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))(\s*)/,i=/^(\s*)(>[> ]*|[*+-]|(\d+)[.)])(\s*)$/,n=/[*+-]\s/;e.commands.newlineAndIndentContinueMarkdownList=function(o){if(o.getOption("disableInput"))return e.Pass;for(var r=o.listSelections(),a=[],l=0;l<r.length;l++){var s=r[l].head,c=o.getStateAfter(s.line),d=c.list!==!1,g=0!==c.quote,u=o.getLine(s.line),m=t.exec(u);if(!r[l].empty()||!d&&!g||!m)return void o.execCommand("newlineAndIndent");if(i.test(u))o.replaceRange("",{line:s.line,ch:0},{line:s.line,ch:s.ch+1}),a[l]="\n";else{var f=m[1],p=m[5],h=n.test(m[2])||m[2].indexOf(">")>=0?m[2]:parseInt(m[3],10)+1+m[4];a[l]="\n"+f+h+p}}o.replaceSelections(a)}}(CodeMirror),CodeMirror.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections(),i=t[0].head,n=e.getStateAfter(i.line),o=n.list!==!1;if(o)return void e.execCommand("indentMore");if(e.options.indentWithTabs)e.execCommand("insertTab");else{var r=Array(e.options.tabSize+1).join(" ");e.replaceSelection(r)}},CodeMirror.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections(),i=t[0].head,n=e.getStateAfter(i.line),o=n.list!==!1;if(o)return void e.execCommand("indentLess");if(e.options.indentWithTabs)e.execCommand("insertTab");else{var r=Array(e.options.tabSize+1).join(" ");e.replaceSelection(r)}},function(e){function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function i(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var i=e.state.fullScreenRestore;t.style.width=i.width,t.style.height=i.height,window.scrollTo(i.scrollLeft,i.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,function(n,o,r){r==e.Init&&(r=!1),!r!=!o&&(o?t(n):i(n))})}(CodeMirror),function(e){e.defineMode("markdown",function(t,i){function n(i){if(e.findModeByName){var n=e.findModeByName(i);n&&(i=n.mime||n.mimes[0])}var o=e.getMode(t,i);return"null"==o.name?null:o}function o(e,t,i){return t.f=t.inline=i,i(e,t)}function r(e,t,i){return t.f=t.block=i,i(e,t)}function a(e){return!e||!/\S/.test(e.string)}function l(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,y&&e.f==c&&(e.f=f,e.block=s),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine=null,null}function s(t,r){var l=t.sol(),s=r.list!==!1,c=r.indentedCode;r.indentedCode=!1,s&&(r.indentationDiff>=0?(r.indentationDiff<4&&(r.indentation-=r.indentationDiff),r.list=null):r.indentation>0?r.list=null:r.list=!1);var g=null;if(r.indentationDiff>=4)return t.skipToEnd(),c||a(r.prevLine)?(r.indentation-=4,r.indentedCode=!0,x.code):null;if(t.eatSpace())return null;if((g=t.match(E))&&g[1].length<=6)return r.header=g[1].length,i.highlightFormatting&&(r.formatting="header"),r.f=r.inline,u(r);if(!(a(r.prevLine)||r.quote||s||c)&&(g=t.match(B)))return r.header="="==g[0].charAt(0)?1:2,i.highlightFormatting&&(r.formatting="header"),r.f=r.inline,u(r);if(t.eat(">"))return r.quote=l?1:r.quote+1,i.highlightFormatting&&(r.formatting="quote"),t.eatSpace(),u(r);if("["===t.peek())return o(t,r,k);if(t.match(M,!0))return r.hr=!0,x.hr;if((a(r.prevLine)||s)&&(t.match(T,!1)||t.match(N,!1))){var m=null;for(t.match(T,!0)?m="ul":(t.match(N,!0),m="ol"),r.indentation=t.column()+t.current().length,r.list=!0;r.listStack&&t.column()<r.listStack[r.listStack.length-1];)r.listStack.pop();return r.listStack.push(r.indentation),i.taskLists&&t.match(L,!1)&&(r.taskList=!0),r.f=r.inline,i.highlightFormatting&&(r.formatting=["list","list-"+m]),u(r)}return i.fencedCodeBlocks&&(g=t.match(I,!0))?(r.fencedChars=g[1],r.localMode=n(g[2]),r.localMode&&(r.localState=e.startState(r.localMode)),r.f=r.block=d,i.highlightFormatting&&(r.formatting="code-block"),r.code=-1,u(r)):o(t,r,r.inline)}function c(t,i){var n=w.token(t,i.htmlState);if(!y){var o=e.innerMode(w,i.htmlState);("xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText||i.md_inside&&t.current().indexOf(">")>-1)&&(i.f=f,i.block=s,i.htmlState=null)}return n}function d(e,t){return t.fencedChars&&e.match(t.fencedChars,!1)?(t.localMode=t.localState=null,t.f=t.block=g,null):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),x.code)}function g(e,t){e.match(t.fencedChars),t.block=s,t.f=f,t.fencedChars=null,i.highlightFormatting&&(t.formatting="code-block"),t.code=1;var n=u(t);return t.code=0,n}function u(e){var t=[];if(e.formatting){t.push(x.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var n=0;n<e.formatting.length;n++)t.push(x.formatting+"-"+e.formatting[n]),"header"===e.formatting[n]&&t.push(x.formatting+"-"+e.formatting[n]+"-"+e.header),"quote"===e.formatting[n]&&(!i.maxBlockquoteDepth||i.maxBlockquoteDepth>=e.quote?t.push(x.formatting+"-"+e.formatting[n]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(x.linkHref,"url"):(e.strong&&t.push(x.strong),e.em&&t.push(x.em),e.strikethrough&&t.push(x.strikethrough),e.linkText&&t.push(x.linkText),e.code&&t.push(x.code),e.image&&t.push(x.image),e.imageAltText&&t.push(x.imageAltText,"link"),e.imageMarker&&t.push(x.imageMarker)),e.header&&t.push(x.header,x.header+"-"+e.header),e.quote&&(t.push(x.quote),!i.maxBlockquoteDepth||i.maxBlockquoteDepth>=e.quote?t.push(x.quote+"-"+e.quote):t.push(x.quote+"-"+i.maxBlockquoteDepth)),e.list!==!1){var o=(e.listStack.length-1)%3;o?1===o?t.push(x.list2):t.push(x.list3):t.push(x.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function m(e,t){if(e.match(H,!0))return u(t)}function f(t,n){var o=n.text(t,n);if("undefined"!=typeof o)return o;if(n.list)return n.list=null,u(n);if(n.taskList){var a="x"!==t.match(L,!0)[1];return a?n.taskOpen=!0:n.taskClosed=!0,i.highlightFormatting&&(n.formatting="task"),n.taskList=!1,u(n)}if(n.taskOpen=!1,n.taskClosed=!1,n.header&&t.match(/^#+$/,!0))return i.highlightFormatting&&(n.formatting="header"),u(n);var l=t.sol(),s=t.next();if(n.linkTitle){n.linkTitle=!1;var d=s;"("===s&&(d=")"),d=(d+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var g="^\\s*(?:[^"+d+"\\\\]+|\\\\\\\\|\\\\.)"+d;if(t.match(new RegExp(g),!0))return x.linkHref}if("`"===s){var m=n.formatting;i.highlightFormatting&&(n.formatting="code"),t.eatWhile("`");var f=t.current().length;if(0==n.code)return n.code=f,u(n);if(f==n.code){var v=u(n);return n.code=0,v}return n.formatting=m,u(n)}if(n.code)return u(n);if("\\"===s&&(t.next(),i.highlightFormatting)){var k=u(n),S=x.formatting+"-escape";return k?k+" "+S:S}if("!"===s&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return n.imageMarker=!0,n.image=!0,i.highlightFormatting&&(n.formatting="image"),u(n);if("["===s&&n.imageMarker)return n.imageMarker=!1,n.imageAltText=!0,i.highlightFormatting&&(n.formatting="image"),u(n);if("]"===s&&n.imageAltText){i.highlightFormatting&&(n.formatting="image");var k=u(n);return n.imageAltText=!1,n.image=!1,n.inline=n.f=h,k}if("["===s&&t.match(/[^\]]*\](\(.*\)| ?\[.*?\])/,!1)&&!n.image)return n.linkText=!0,i.highlightFormatting&&(n.formatting="link"),u(n);if("]"===s&&n.linkText&&t.match(/\(.*?\)| ?\[.*?\]/,!1)){i.highlightFormatting&&(n.formatting="link");var k=u(n);return n.linkText=!1,n.inline=n.f=h,k}if("<"===s&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=p,i.highlightFormatting&&(n.formatting="link");var k=u(n);return k?k+=" ":k="",k+x.linkInline}if("<"===s&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=p,i.highlightFormatting&&(n.formatting="link");var k=u(n);return k?k+=" ":k="",k+x.linkEmail}if("<"===s&&t.match(/^(!--|\w)/,!1)){var b=t.string.indexOf(">",t.pos);if(b!=-1){var y=t.string.substring(t.start,b);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(y)&&(n.md_inside=!0)}return t.backUp(1),n.htmlState=e.startState(w),r(t,n,c)}if("<"===s&&t.match(/^\/\w*?>/))return n.md_inside=!1,"tag";var C=!1;if(!i.underscoresBreakWords&&"_"===s&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var M=t.pos-2;if(M>=0){var T=t.string.charAt(M);"_"!==T&&T.match(/(\w)/,!1)&&(C=!0)}}if("*"===s||"_"===s&&!C)if(l&&" "===t.peek());else{if(n.strong===s&&t.eat(s)){i.highlightFormatting&&(n.formatting="strong");var v=u(n);return n.strong=!1,v}if(!n.strong&&t.eat(s))return n.strong=s,i.highlightFormatting&&(n.formatting="strong"),u(n);if(n.em===s){i.highlightFormatting&&(n.formatting="em");var v=u(n);return n.em=!1,v}if(!n.em)return n.em=s,i.highlightFormatting&&(n.formatting="em"),u(n)}else if(" "===s&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return u(n);t.backUp(1)}if(i.strikethrough)if("~"===s&&t.eatWhile(s)){if(n.strikethrough){i.highlightFormatting&&(n.formatting="strikethrough");var v=u(n);return n.strikethrough=!1,v}if(t.match(/^[^\s]/,!1))return n.strikethrough=!0,i.highlightFormatting&&(n.formatting="strikethrough"),u(n)}else if(" "===s&&t.match(/^~~/,!0)){if(" "===t.peek())return u(n);t.backUp(2)}return" "===s&&(t.match(/ +$/,!1)?n.trailingSpace++:n.trailingSpace&&(n.trailingSpaceNewLine=!0)),u(n)}function p(e,t){var n=e.next();if(">"===n){t.f=t.inline=f,i.highlightFormatting&&(t.formatting="link");var o=u(t);return o?o+=" ":o="",o+x.linkInline}return e.match(/^[^>]+/,!0),x.linkInline}function h(e,t){if(e.eatSpace())return null;var n=e.next();return"("===n||"["===n?(t.f=t.inline=v("("===n?")":"]",0),i.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,u(t)):"error"}function v(e){return function(t,n){var o=t.next();if(o===e){n.f=n.inline=f,i.highlightFormatting&&(n.formatting="link-string");var r=u(n);return n.linkHref=!1,r}return t.match(D[e]),n.linkHref=!0,u(n)}}function k(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=S,e.next(),i.highlightFormatting&&(t.formatting="link"),t.linkText=!0,u(t)):o(e,t,f)}function S(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=b,i.highlightFormatting&&(t.formatting="link");var n=u(t);return t.linkText=!1,n}return e.match(/^([^\]\\]|\\.)+/,!0),x.linkText}function b(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=f,x.linkHref+" url")}var w=e.getMode(t,"text/html"),y="null"==w.name;void 0===i.highlightFormatting&&(i.highlightFormatting=!1),void 0===i.maxBlockquoteDepth&&(i.maxBlockquoteDepth=0),void 0===i.underscoresBreakWords&&(i.underscoresBreakWords=!0),void 0===i.taskLists&&(i.taskLists=!1),void 0===i.strikethrough&&(i.strikethrough=!1),void 0===i.tokenTypeOverrides&&(i.tokenTypeOverrides={});var x={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"};for(var C in x)x.hasOwnProperty(C)&&i.tokenTypeOverrides[C]&&(x[C]=i.tokenTypeOverrides[C]);var M=/^([*\-_])(?:\s*\1){2,}\s*$/,T=/^[*\-+]\s+/,N=/^[0-9]+([.)])\s+/,L=/^\[(x| )\](?=\s)/,E=i.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,B=/^ *(?:\={1,}|-{1,})\s*$/,H=/^[^#!\[\]*_\\<>` "'(~]+/,I=new RegExp("^("+(i.fencedCodeBlocks===!0?"~~~+|```+":i.fencedCodeBlocks)+")[ \\t]*([\\w+#-]*)"),D={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\\]]|\\.)*\])*?(?=\])/},_={startState:function(){return{f:s,prevLine:null,thisLine:null,block:s,htmlState:null,indentation:0,inline:f,text:m,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(w,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkTitle:t.linkTitle,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,header:t.header,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedChars:t.fencedChars}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine){var i=t.header||t.hr;if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0)||i){if(l(t),!i)return null;t.prevLine=null}t.prevLine=t.thisLine,t.thisLine=e,t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentationDiff=Math.min(n-t.indentation,4),t.indentation=t.indentation+t.indentationDiff,n>0)return null}return t.f(e,t)},innerMode:function(e){return e.block==c?{state:e.htmlState,mode:w}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:_}},blankLine:l,getType:u,fold:"markdown"};return _},"xml"),e.defineMIME("text/x-markdown","markdown")}(CodeMirror),function(e){e.overlayMode=function(t,i,n){return{startState:function(){return{base:e.startState(t),overlay:e.startState(i),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(n){return{base:e.copyState(t,n.base),overlay:e.copyState(i,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(e,o){return(e!=o.streamSeen||Math.min(o.basePos,o.overlayPos)<e.start)&&(o.streamSeen=e,o.basePos=o.overlayPos=e.start),e.start==o.basePos&&(o.baseCur=t.token(e,o.base),o.basePos=e.pos),e.start==o.overlayPos&&(e.pos=e.start,o.overlayCur=i.token(e,o.overlay),o.overlayPos=e.pos),e.pos=Math.min(o.basePos,o.overlayPos),null==o.overlayCur?o.baseCur:null!=o.baseCur&&o.overlay.combineTokens||n&&null==o.overlay.combineTokens?o.baseCur+" "+o.overlayCur:o.overlayCur},indent:t.indent&&function(e,i){return t.indent(e.base,i)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){t.blankLine&&t.blankLine(e.base),i.blankLine&&i.blankLine(e.overlay)}}}}(CodeMirror),function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function i(e){t(e);var i=e.state.placeholder=document.createElement("pre");i.style.cssText="height: 0; overflow: visible",i.className="CodeMirror-placeholder";var n=e.getOption("placeholder");"string"==typeof n&&(n=document.createTextNode(n)),i.appendChild(n),e.display.lineSpace.insertBefore(i,e.display.lineSpace.firstChild)}function n(e){r(e)&&i(e)}function o(e){var n=e.getWrapperElement(),o=r(e);n.className=n.className.replace(" CodeMirror-empty","")+(o?" CodeMirror-empty":""),o?i(e):t(e)}function r(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",function(i,r,a){var l=a&&a!=e.Init;if(r&&!l)i.on("blur",n),i.on("change",o),i.on("swapDoc",o),o(i);else if(!r&&l){i.off("blur",n),i.off("change",o),i.off("swapDoc",o),t(i);var s=i.getWrapperElement();s.className=s.className.replace(" CodeMirror-empty","")}r&&!i.hasFocus()&&n(i)})}(CodeMirror),function(e){function t(e){e.operation(function(){a(e)})}function i(e){e.state.markedSelection.length&&e.operation(function(){o(e)})}function n(e,t,i,n){if(0!=c(t,i))for(var o=e.state.markedSelection,r=e.state.markedSelectionStyle,a=t.line;;){var d=a==t.line?t:s(a,0),g=a+l,u=g>=i.line,m=u?i:s(g,0),f=e.markText(d,m,{className:r});if(null==n?o.push(f):o.splice(n++,0,f),u)break;a=g}}function o(e){for(var t=e.state.markedSelection,i=0;i<t.length;++i)t[i].clear();t.length=0}function r(e){o(e);for(var t=e.listSelections(),i=0;i<t.length;i++)n(e,t[i].from(),t[i].to())}function a(e){if(!e.somethingSelected())return o(e);if(e.listSelections().length>1)return r(e);var t=e.getCursor("start"),i=e.getCursor("end"),a=e.state.markedSelection;if(!a.length)return n(e,t,i);var s=a[0].find(),d=a[a.length-1].find();if(!s||!d||i.line-t.line<l||c(t,d.to)>=0||c(i,s.from)<=0)return r(e);for(;c(t,s.from)>0;)a.shift().clear(),s=a[0].find();for(c(t,s.from)<0&&(s.to.line-t.line<l?(a.shift().clear(),n(e,t,s.to,0)):n(e,t,s.from,0));c(i,d.to)<0;)a.pop().clear(),d=a[a.length-1].find();c(i,d.to)>0&&(i.line-d.from.line<l?(a.pop().clear(),n(e,d.from,i)):n(e,d.to,i))}e.defineOption("styleSelectedText",!1,function(n,a,l){var s=l&&l!=e.Init;a&&!s?(n.state.markedSelection=[],n.state.markedSelectionStyle="string"==typeof a?a:"CodeMirror-selectedtext",r(n),n.on("cursorActivity",t),n.on("change",i)):!a&&s&&(n.off("cursorActivity",t),n.off("change",i),o(n),n.state.markedSelection=n.state.markedSelectionStyle=null)});var l=8,s=e.Pos,c=e.cmpPos}(CodeMirror),function(e){var t=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i;e.defineMode("gfm",function(i,n){function o(e){return e.code=!1,null}var r=0,a={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,i){if(i.combineTokens=null,i.codeBlock)return e.match(/^```+/)?(i.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(i.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),i.codeBlock=!0,null;if("`"===e.peek()){e.next();var o=e.pos;e.eatWhile("`");var a=1+e.pos-o;return i.code?a===r&&(i.code=!1):(r=a,i.code=!0),null}if(i.code)return e.next(),null;if(e.eatSpace())return i.ateSpace=!0,null;if((e.sol()||i.ateSpace)&&(i.ateSpace=!1,n.gitHubSpice!==!1)){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/))return i.combineTokens=!0,"link";
if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return i.combineTokens=!0,"link"}return e.match(t)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(i.combineTokens=!0,"link"):(e.next(),null)},blankLine:o},l={underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:"```",strikethrough:!0};for(var s in n)l[s]=n[s];return l.name="markdown",e.overlayMode(e.getMode(i,l),a)},"markdown"),e.defineMIME("text/x-gfm","gfm")}(CodeMirror),function(e){var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},i={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};e.defineMode("xml",function(n,o){function r(e,t){function i(i){return t.tokenize=i,i(e,t)}var n=e.next();if("<"==n)return e.eat("!")?e.eat("[")?e.match("CDATA[")?i(s("atom","]]>")):null:e.match("--")?i(s("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),i(c(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=s("meta","?>"),"meta"):(T=e.eat("/")?"closeTag":"openTag",t.tokenize=a,"tag bracket");if("&"==n){var o;return o=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),o?"atom":"error"}return e.eatWhile(/[^&<]/),null}function a(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=r,T=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return T="equals",null;if("<"==i){t.tokenize=r,t.state=m,t.tagName=t.tagStart=null;var n=t.tokenize(e,t);return n?n+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=l(i),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function l(e){var t=function(t,i){for(;!t.eol();)if(t.next()==e){i.tokenize=a;break}return"string"};return t.isInAttribute=!0,t}function s(e,t){return function(i,n){for(;!i.eol();){if(i.match(t)){n.tokenize=r;break}i.next()}return e}}function c(e){return function(t,i){for(var n;null!=(n=t.next());){if("<"==n)return i.tokenize=c(e+1),i.tokenize(t,i);if(">"==n){if(1==e){i.tokenize=r;break}return i.tokenize=c(e-1),i.tokenize(t,i)}}return"meta"}}function d(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,(x.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function g(e){e.context&&(e.context=e.context.prev)}function u(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!x.contextGrabbers.hasOwnProperty(i)||!x.contextGrabbers[i].hasOwnProperty(t))return;g(e)}}function m(e,t,i){return"openTag"==e?(i.tagStart=t.column(),f):"closeTag"==e?p:m}function f(e,t,i){return"word"==e?(i.tagName=t.current(),N="tag",k):(N="error",f)}function p(e,t,i){if("word"==e){var n=t.current();return i.context&&i.context.tagName!=n&&x.implicitlyClosed.hasOwnProperty(i.context.tagName)&&g(i),i.context&&i.context.tagName==n||x.matchClosing===!1?(N="tag",h):(N="tag error",v)}return N="error",v}function h(e,t,i){return"endTag"!=e?(N="error",h):(g(i),m)}function v(e,t,i){return N="error",h(e,t,i)}function k(e,t,i){if("word"==e)return N="attribute",S;if("endTag"==e||"selfcloseTag"==e){var n=i.tagName,o=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||x.autoSelfClosers.hasOwnProperty(n)?u(i,n):(u(i,n),i.context=new d(i,n,o==i.indented)),m}return N="error",k}function S(e,t,i){return"equals"==e?b:(x.allowMissing||(N="error"),k(e,t,i))}function b(e,t,i){return"string"==e?w:"word"==e&&x.allowUnquoted?(N="string",k):(N="error",k(e,t,i))}function w(e,t,i){return"string"==e?w:k(e,t,i)}var y=n.indentUnit,x={},C=o.htmlMode?t:i;for(var M in C)x[M]=C[M];for(var M in o)x[M]=o[M];var T,N;return r.isInText=!0,{startState:function(e){var t={tokenize:r,state:m,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;T=null;var i=t.tokenize(e,t);return(i||T)&&"comment"!=i&&(N=null,t.state=t.state(T||i,e,t),N&&(i="error"==N?i+" error":N)),i},indent:function(t,i,n){var o=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+y;if(o&&o.noIndent)return e.Pass;if(t.tokenize!=a&&t.tokenize!=r)return n?n.match(/^(\s*)/)[0].length:0;if(t.tagName)return x.multilineTagIndentPastTag!==!1?t.tagStart+t.tagName.length+2:t.tagStart+y*(x.multilineTagIndentFactor||1);if(x.alignCDATA&&/<!\[CDATA\[/.test(i))return 0;var l=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(l&&l[1])for(;o;){if(o.tagName==l[2]){o=o.prev;break}if(!x.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(l)for(;o;){var s=x.contextGrabbers[o.tagName];if(!s||!s.hasOwnProperty(l[2]))break;o=o.prev}for(;o&&o.prev&&!o.startOfLine;)o=o.prev;return o?o.indent+y:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:x.htmlMode?"html":"xml",helperType:x.htmlMode?"html":"xml",skipAttribute:function(e){e.state==b&&(e.state=k)}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}(CodeMirror);var isMac=/Mac/.test(navigator.platform),bindings={toggleBold:toggleBold,toggleItalic:toggleItalic,drawLink:drawLink,toggleHeadingSmaller:toggleHeadingSmaller,toggleHeadingBigger:toggleHeadingBigger,drawImage:drawImage,toggleBlockquote:toggleBlockquote,toggleOrderedList:toggleOrderedList,toggleUnorderedList:toggleUnorderedList,toggleCodeBlock:toggleCodeBlock,togglePreview:togglePreview,toggleStrikethrough:toggleStrikethrough,toggleHeading1:toggleHeading1,toggleHeading2:toggleHeading2,toggleHeading3:toggleHeading3,cleanBlock:cleanBlock,drawTable:drawTable,drawHorizontalRule:drawHorizontalRule,undo:undo,redo:redo,toggleSideBySide:toggleSideBySide,toggleFullScreen:toggleFullScreen},shortcuts={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},getBindingName=function(e){for(var t in bindings)if(bindings[t]===e)return t;return null},isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},saved_overflow="",toolbarBuiltInButtons={bold:{name:"bold",action:toggleBold,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:toggleItalic,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:toggleStrikethrough,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:toggleHeadingSmaller,className:"fa fa-header",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:toggleHeadingSmaller,className:"fa fa-header fa-header-x fa-header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:toggleHeadingBigger,className:"fa fa-header fa-header-x fa-header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:toggleHeading1,className:"fa fa-header fa-header-x fa-header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:toggleHeading2,className:"fa fa-header fa-header-x fa-header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:toggleHeading3,className:"fa fa-header fa-header-x fa-header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:toggleCodeBlock,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:toggleBlockquote,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:toggleUnorderedList,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:toggleOrderedList,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:cleanBlock,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:drawLink,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:drawImage,className:"fa fa-picture-o",title:"Insert Image",default:!0},table:{name:"table",action:drawTable,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:drawHorizontalRule,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:togglePreview,className:"fa fa-eye no-disable",title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:toggleSideBySide,className:"fa fa-columns no-disable no-mobile",title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:toggleFullScreen,className:"fa fa-arrows-alt no-disable no-mobile",title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:undo,className:"fa fa-undo no-disable",title:"Undo"},redo:{name:"redo",action:redo,className:"fa fa-repeat no-disable",title:"Redo"}},insertTexts={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},promptTexts={link:"URL for the link:",image:"URL of the image:"},blockStyles={bold:"**",code:"```",italic:"*"};SimpleMDE.prototype.markdown=function(e){if(marked){var t={};return this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?t.breaks=!1:t.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0&&window.hljs&&(t.highlight=function(e){return window.hljs.highlightAuto(e).value}),marked.setOptions(t),marked(e)}},SimpleMDE.prototype.render=function(e){if(e||(e=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==e){this.element=e;var t=this.options,i=this,n={};for(var o in t.shortcuts)null!==t.shortcuts[o]&&null!==bindings[o]&&!function(e){n[fixShortcut(t.shortcuts[e])]=function(){bindings[e](i)}}(o);n.Enter="newlineAndIndentContinueMarkdownList",n.Tab="tabAndIndentMarkdownList",n["Shift-Tab"]="shiftTabAndUnindentMarkdownList",n.Esc=function(e){e.getOption("fullScreen")&&toggleFullScreen(i)},document.addEventListener("keydown",function(e){e=e||window.event,27==e.keyCode&&i.codemirror.getOption("fullScreen")&&toggleFullScreen(i)},!1);var r,a;if(t.spellChecker!==!1?(r="spell-checker",a=t.parsingConfig,a.name="gfm",a.gitHubSpice=!1):(r=t.parsingConfig,r.name="gfm",r.gitHubSpice=!1),this.codemirror=CodeMirror.fromTextArea(e,{mode:r,backdrop:a,theme:"paper",tabSize:void 0!=t.tabSize?t.tabSize:2,indentUnit:void 0!=t.tabSize?t.tabSize:2,indentWithTabs:t.indentWithTabs!==!1,lineNumbers:!1,autofocus:t.autofocus===!0,extraKeys:n,lineWrapping:t.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:t.placeholder||e.getAttribute("placeholder")||"",styleSelectedText:void 0==t.styleSelectedText||t.styleSelectedText}),t.forceSync===!0){var l=this.codemirror;l.on("change",function(){l.save()})}this.gui={},t.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),t.status!==!1&&(this.gui.statusbar=this.createStatusbar()),void 0!=t.autosave&&t.autosave.enabled===!0&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var s=this.codemirror;setTimeout(function(){s.refresh()}.bind(s),0)}},SimpleMDE.prototype.autosave=function(){if(isLocalStorageAvailable()){var e=this;if(void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to use the autosave feature");null!=e.element.form&&void 0!=e.element.form&&e.element.form.addEventListener("submit",function(){localStorage.removeItem("smde_"+e.options.autosave.uniqueId)}),this.options.autosave.loaded!==!0&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,e.value());var t=document.getElementById("autosaved");if(null!=t&&void 0!=t&&""!=t){var i=new Date,n=i.getHours(),o=i.getMinutes(),r="am",a=n;a>=12&&(a=n-12,r="pm"),0==a&&(a=12),o=o<10?"0"+o:o,t.innerHTML="Autosaved: "+a+":"+o+" "+r}this.autosaveTimeoutId=setTimeout(function(){e.autosave()},this.options.autosave.delay||1e4)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},SimpleMDE.prototype.clearAutosavedValue=function(){if(isLocalStorageAvailable()){if(void 0==this.options.autosave||void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},SimpleMDE.prototype.createSideBySide=function(){var e=this.codemirror,t=e.getWrapperElement(),i=t.nextSibling;i&&/editor-preview-side/.test(i.className)||(i=document.createElement("div"),i.className="editor-preview-side",t.parentNode.insertBefore(i,t.nextSibling));var n=!1,o=!1;return e.on("scroll",function(e){if(n)return void(n=!1);o=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,r=parseFloat(e.getScrollInfo().top)/t,a=(i.scrollHeight-i.clientHeight)*r;i.scrollTop=a}),i.onscroll=function(){if(o)return void(o=!1);n=!0;var t=i.scrollHeight-i.clientHeight,r=parseFloat(i.scrollTop)/t,a=(e.getScrollInfo().height-e.getScrollInfo().clientHeight)*r;e.scrollTo(0,a)},i},SimpleMDE.prototype.createToolbar=function(e){if(e=e||this.options.toolbar,e&&0!==e.length){var t;for(t=0;t<e.length;t++)void 0!=toolbarBuiltInButtons[e[t]]&&(e[t]=toolbarBuiltInButtons[e[t]]);var i=document.createElement("div");i.className="editor-toolbar";var n=this,o={};for(n.toolbar=e,t=0;t<e.length;t++)if(("guide"!=e[t].name||n.options.toolbarGuideIcon!==!1)&&!(n.options.hideIcons&&n.options.hideIcons.indexOf(e[t].name)!=-1||("fullscreen"==e[t].name||"side-by-side"==e[t].name)&&isMobile())){if("|"===e[t]){for(var r=!1,a=t+1;a<e.length;a++)"|"===e[a]||n.options.hideIcons&&n.options.hideIcons.indexOf(e[a].name)!=-1||(r=!0);if(!r)continue}!function(e){var t;t="|"===e?createSep():createIcon(e,n.options.toolbarTips,n.options.shortcuts),e.action&&("function"==typeof e.action?t.onclick=function(t){t.preventDefault(),e.action(n)}:"string"==typeof e.action&&(t.href=e.action,t.target="_blank")),o[e.name||e]=t,i.appendChild(t)}(e[t])}n.toolbarElements=o;var l=this.codemirror;l.on("cursorActivity",function(){var e=getState(l);for(var t in o)!function(t){var i=o[t];e[t]?i.className+=" active":"fullscreen"!=t&&"side-by-side"!=t&&(i.className=i.className.replace(/\s*active\s*/g,""))}(t)});var s=l.getWrapperElement();return s.parentNode.insertBefore(i,s),i}},SimpleMDE.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,i=this.codemirror;if(e&&0!==e.length){var n,o,r,a=[];for(n=0;n<e.length;n++)if(o=void 0,r=void 0,"object"==typeof e[n])a.push({className:e[n].className,defaultValue:e[n].defaultValue,onUpdate:e[n].onUpdate});else{var l=e[n];"words"===l?(r=function(e){e.innerHTML=wordCount(i.getValue())},o=function(e){e.innerHTML=wordCount(i.getValue())}):"lines"===l?(r=function(e){e.innerHTML=i.lineCount()},o=function(e){e.innerHTML=i.lineCount()}):"cursor"===l?(r=function(e){e.innerHTML="0:0"},o=function(e){var t=i.getCursor();e.innerHTML=t.line+":"+t.ch}):"autosave"===l&&(r=function(e){void 0!=t.autosave&&t.autosave.enabled===!0&&e.setAttribute("id","autosaved")}),a.push({className:l,defaultValue:r,onUpdate:o})}var s=document.createElement("div");for(s.className="editor-statusbar",n=0;n<a.length;n++){var c=a[n],d=document.createElement("span");d.className=c.className,"function"==typeof c.defaultValue&&c.defaultValue(d),"function"==typeof c.onUpdate&&this.codemirror.on("update",function(e,t){return function(){t.onUpdate(e)}}(d,c)),s.appendChild(d)}var g=this.codemirror.getWrapperElement();return g.parentNode.insertBefore(s,g.nextSibling),s}},SimpleMDE.prototype.value=function(e){return void 0===e?this.codemirror.getValue():(this.codemirror.getDoc().setValue(e),this)},SimpleMDE.toggleBold=toggleBold,SimpleMDE.toggleItalic=toggleItalic,SimpleMDE.toggleStrikethrough=toggleStrikethrough,SimpleMDE.toggleBlockquote=toggleBlockquote,SimpleMDE.toggleHeadingSmaller=toggleHeadingSmaller,SimpleMDE.toggleHeadingBigger=toggleHeadingBigger,SimpleMDE.toggleHeading1=toggleHeading1,SimpleMDE.toggleHeading2=toggleHeading2,SimpleMDE.toggleHeading3=toggleHeading3,SimpleMDE.toggleCodeBlock=toggleCodeBlock,SimpleMDE.toggleUnorderedList=toggleUnorderedList,SimpleMDE.toggleOrderedList=toggleOrderedList,SimpleMDE.cleanBlock=cleanBlock,SimpleMDE.drawLink=drawLink,SimpleMDE.drawImage=drawImage,SimpleMDE.drawTable=drawTable,SimpleMDE.drawHorizontalRule=drawHorizontalRule,SimpleMDE.undo=undo,SimpleMDE.redo=redo,SimpleMDE.togglePreview=togglePreview,SimpleMDE.toggleSideBySide=toggleSideBySide,SimpleMDE.toggleFullScreen=toggleFullScreen,SimpleMDE.prototype.toggleBold=function(){toggleBold(this)},SimpleMDE.prototype.toggleItalic=function(){toggleItalic(this)},SimpleMDE.prototype.toggleStrikethrough=function(){toggleStrikethrough(this)},SimpleMDE.prototype.toggleBlockquote=function(){toggleBlockquote(this)},SimpleMDE.prototype.toggleHeadingSmaller=function(){toggleHeadingSmaller(this)},SimpleMDE.prototype.toggleHeadingBigger=function(){toggleHeadingBigger(this)},SimpleMDE.prototype.toggleHeading1=function(){toggleHeading1(this)},SimpleMDE.prototype.toggleHeading2=function(){toggleHeading2(this)},SimpleMDE.prototype.toggleHeading3=function(){toggleHeading3(this)},SimpleMDE.prototype.toggleCodeBlock=function(){toggleCodeBlock(this)},SimpleMDE.prototype.toggleUnorderedList=function(){toggleUnorderedList(this)},SimpleMDE.prototype.toggleOrderedList=function(){toggleOrderedList(this)},SimpleMDE.prototype.cleanBlock=function(){cleanBlock(this)},SimpleMDE.prototype.drawLink=function(){drawLink(this)},SimpleMDE.prototype.drawImage=function(){drawImage(this)},SimpleMDE.prototype.drawTable=function(){drawTable(this)},SimpleMDE.prototype.drawHorizontalRule=function(){drawHorizontalRule(this)},SimpleMDE.prototype.undo=function(){undo(this)},SimpleMDE.prototype.redo=function(){redo(this)},SimpleMDE.prototype.togglePreview=function(){togglePreview(this)},SimpleMDE.prototype.toggleSideBySide=function(){toggleSideBySide(this)},SimpleMDE.prototype.toggleFullScreen=function(){toggleFullScreen(this)},SimpleMDE.prototype.isPreviewActive=function(){var e=this.codemirror,t=e.getWrapperElement(),i=t.lastChild;return/editor-preview-active/.test(i.className)},SimpleMDE.prototype.isSideBySideActive=function(){var e=this.codemirror,t=e.getWrapperElement(),i=t.nextSibling;return/editor-preview-active-side/.test(i.className)},SimpleMDE.prototype.isFullscreenActive=function(){var e=this.codemirror;return e.getOption("fullScreen")},SimpleMDE.prototype.getState=function(){var e=this.codemirror;return getState(e)},SimpleMDE.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement();t.parentNode&&(this.gui.toolbar&&t.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&t.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&t.parentNode.removeChild(this.gui.sideBySide)),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())};