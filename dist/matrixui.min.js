"use strict";function muButtonDirective(e){function t(e){return angular.isDefined(e.href)||angular.isDefined(e.ngHref)||angular.isDefined(e.ngLink)||angular.isDefined(e.uiSref)}function n(e,n){if(t(n))return'<a class="mu-button" ng-transclude></a>';var r="undefined"==typeof n.type?"button":n.type;return'<button class="mu-button" type="'+r+'" ng-transclude></button>'}function r(n,r,o){t(o)&&angular.isDefined(o.ngDisabled)&&n.$watch(o.ngDisabled,function(e){r.attr("tabindex",e?-1:0)}),(o.default||""===o.default)&&r.addClass("mu-button-default"),(o.primary||""===o.primary)&&r.addClass("mu-button-primary"),(o.info||""===o.info)&&r.addClass("mu-button-info"),(o.warn||""===o.warn)&&r.addClass("mu-button-warn"),(o.danger||""===o.danger)&&r.addClass("mu-button-danger"),r.on("click",function(e){o.disabled===!0&&(e.preventDefault(),e.stopImmediatePropagation())}),r.hasClass("md-no-focus")||(n.mouseActive=!1,r.on("mousedown",function(){n.mouseActive=!0,e(function(){n.mouseActive=!1},100)}).on("focus",function(){n.mouseActive===!1&&r.addClass("md-focused")}).on("blur",function(e){r.removeClass("md-focused")}))}return{restrict:"E",replace:!0,transclude:!0,template:n,link:r}}function muCardDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>Card组件</h2>"}}function muCheckboxDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-checkbox组件</h2>"}}function muCodeeditorDirective(e,t){function n(e,n,l,s){var c=angular.extend({value:n.text()},t.codemirror||{},e.$eval(l.uiCodemirror),e.$eval(l.uiCodemirrorOpts)),u=r(n,c);o(u,l.uiCodemirror||l.uiCodemirrorOpts,e),i(u,s,e),a(u,l.uiRefresh,e),e.$on("CodeMirror",function(e,t){if(!angular.isFunction(t))throw new Error("the CodeMirror event requires a callback function");t(u)}),angular.isFunction(c.onLoad)&&c.onLoad(u)}function r(e,t){var n;return"TEXTAREA"===e[0].tagName?n=window.CodeMirror.fromTextArea(e[0],t):(e.html(""),n=new window.CodeMirror(function(t){e.append(t)},t)),n}function o(e,t,n){function r(t,n){angular.isObject(t)&&o.forEach(function(r){if(t.hasOwnProperty(r)){if(n&&t[r]===n[r])return;e.setOption(r,t[r])}})}if(t){var o=Object.keys(window.CodeMirror.defaults);n.$watch(t,r,!0)}}function i(e,t,n){t&&(t.$formatters.push(function(e){if(angular.isUndefined(e)||null===e)return"";if(angular.isObject(e)||angular.isArray(e))throw new Error("ui-codemirror cannot use an object or an array as a model");return e}),t.$render=function(){var n=t.$viewValue||"";e.setValue(n)},e.on("change",function(e){var r=e.getValue();r!==t.$viewValue&&n.$evalAsync(function(){t.$setViewValue(r)})}))}function a(t,n,r){n&&r.$watch(n,function(n,r){n!==r&&e(function(){t.refresh()})})}return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return n}}}function muDatatableDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-datable组件</h2>"}}function muDialogDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-dialog组件</h2>"}}function muMarkdowndDirective(){function e(e,n,r){function o(e){n.find("div").html(t(e))}e.name=r.ngModel;var i=r.content;i||(i=""),e.$parent[e.name]?i=e.$parent[e.name]:e.$parent[e.name]="",e.content=i,n.find("div").html(t(e.content)),e.name&&e.$parent.$watch(e.name,function(){function t(){o(r),MathJax.Hub.Typeset(n[0])}var r=e.$parent[e.name];if(r||(r=e.content),!window.MathJax)throw Error("MathJax没有加载");try{t()}catch(e){console.warn("markdown warn: 给定的数据暂时无法渲染，等待数据更新...")}})}function t(e){if(window.marked)return hljs&&marked.setOptions({highlight:function(e){return hljs.highlightAuto(e).value}}),marked(e);throw Error("marked is not defined")}return{restrict:"E",template:"\n      <div class='markdown-body'>\n        <div ng-transclude></div>\n      </div>\n    ",transclude:!0,scope:!0,link:e}}function muMdeditorDirective(){function e(e,o,i){function a(e,t){return angular.element(t).addClass("markdown-body"),r(e,t),MathJax.Hub.Typeset(t),t.innerHTML}function l(){var r=i.type||"simple",l=null;l="full"===r?t():n(),e.mde=new SimpleMDE({spellChecker:!1,element:o.find("textarea")[0],toolbar:l,previewRender:a,tabSize:2}),i.content&&e.mde.value(i.content)}e.name=i.ngModel;var s=i.content;if(s||(s=""),e.$parent[e.name]?s=e.$parent[e.name]:e.$parent[e.name]="",e.content=s,e.name&&e.$parent.$watch(e.name,function(){e.mde&&e.mde.value(e.$parent[e.name])}),!window.SimpleMDE)throw Error("mu-mdeditor error: SimpleMDE没有加载");l()}function t(){var e=["heading-1","heading-2","heading-3","bold","italic","|","quote","code","link","image","|","unordered-list","ordered-list","|","preview","side-by-side","fullscreen","|","guide"];return e}function n(){var e=["heading-1","heading-2","heading-3","bold","italic","|","quote","code","link","image","|","unordered-list","ordered-list","|","preview","|","guide"];return e}function r(e,t){angular.element(t).html(o(e))}function o(e){if(window.marked)return hljs&&marked.setOptions({highlight:function(e){return hljs.highlightAuto(e).value}}),marked(e);throw Error("marked is not defined")}return{restrict:"E",transclude:!0,scope:!0,template:'<textarea style="display: none;"></textarea>',link:e}}function muPanelDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-panel组件</h2>"}}function muRadioDirective(){function e(e,n){var r=angular.element(e),o=n.name+"-"+n.value;r.attr("for",o),r.find("input").attr("id",o),r.find("input").attr("name",n.name),r.find("input").attr("value",n.value),t(e,n.size)}function t(e,t){var n=angular.element(e),r=n.find("label")[0];r.classList.add(t),e[0].classList.add(t)}function n(e){var t=angular.element(e);t[0].addEventListener("click",function(e){console.log("click"),t.find("input").attr("checked",!0)})}return{restrict:"EA",replace:!0,transclude:!0,template:'<div class="radio"><input type="radio" class="regular-radio"></input><label></label></div>',link:function(t,r,o){e(r,o),n(r)}}}function muSelectRun(e){e.put("selector/selector.html",'<div class="selector-container" ng-attr-dir="{{rtl ? \'rtl\' : \'ltr\'}}" ng-class="{open: isOpen, empty: !filteredOptions.length && (!create || !search), multiple: multiple, \'has-value\': hasValue(), rtl: rtl, loading: loading, \'remove-button\': removeButton, disabled: disabled}"><select name="{{name}}" ng-hide="true" ng-required="required && !hasValue()" ng-model="selectedValues" multiple ng-options="option as getObjValue(option, labelAttr) for option in selectedValues"></select><label class="selector-input"><ul class="selector-values"><li ng-repeat="(index, option) in selectedValues track by index"><div ng-include="viewItemTemplate"></div><div ng-if="multiple" class="selector-helper" ng-click="!disabled && unset(index)"><span class="selector-icon"></span></div></li></ul><input ng-model="search" placeholder="{{!hasValue() ? placeholder : \'\'}}" ng-model-options="{debounce: debounce}"ng-disabled="disabled" ng-readonly="disableSearch" ng-required="required && !hasValue()" autocomplete="off"><div ng-if="!multiple || loading" class="selector-helper selector-global-helper" ng-click="!disabled && removeButton && unset()"><span class="selector-icon"></span></div></label><ul class="selector-dropdown" ng-show="filteredOptions.length > 0 || (create && search)"><li class="selector-option create" ng-class="{active: highlighted == -1}" ng-if="create && search" ng-include="dropdownCreateTemplate" ng-mouseover="highlight(-1)" ng-click="createOption(search)"></li><li ng-repeat-start="(index, option) in filteredOptions track by index" class="selector-optgroup" ng-include="dropdownGroupTemplate" ng-show="groupAttr && (getObjValue(option, groupAttr) && index == 0 || getObjValue(filteredOptions[index - 1], groupAttr) != getObjValue(option, groupAttr))"></li><li ng-repeat-end ng-class="{active: highlighted == index, grouped: groupAttr && getObjValue(option, groupAttr)}" class="selector-option" ng-include="dropdownItemTemplate" ng-mouseover="highlight(index)" ng-click="set()"></li></ul></div>'),e.put("selector/item-create.html",'Add <i ng-bind="search"></i>'),e.put("selector/item-default.html",'<span ng-bind="getObjValue(option, labelAttr) || option"></span>'),e.put("selector/group-default.html",'<span ng-bind="getObjValue(option, groupAttr)"></span>')}function muSelectDirective(e,t,n,r,o){return new Selector(e,t,n,r,o)}function muSpinnerDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-spinner组件</h2>"}}function muTabDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-tab组件</h2>"}}function muReportDirective(){function e(e,t,n){function r(){e.report&&(e.compileCheck=e.report["compile check"],e.staticCheck=e.report["static check"],e.standardTests=e.report["standard tests"],e.randomTests=e.report["random tests"],e.memoryCheck=e.report["memory check"],e.googleTest=e.report["google tests"],e.gtestFailedList=[],e.gtestAllList=[])}function o(){if(e.standardTests){for(var t=e.standardTests["standard tests"],n=0;n<t.length;n++)t[n].stdin&&"\n"==t[n].stdin[t[n].stdin.length-1]&&(t[n].stdin+="\n"),t[n].standard_stdout&&"\n"==t[n].standard_stdout[t[n].standard_stdout.length-1]&&(t[n].standard_stdout+="\n"),t[n].stdout&&"\n"==t[n].stdout[t[n].stdout.length-1]&&(t[n].stdout+="\n");e.standardTests["standard tests"]=t}if(e.randomTests){for(var r=e.randomTests["random tests"],o=0;o<r.length;o++)r[o].stdin&&"\n"==r[o].stdin[r[o].stdin.length-1]&&(r[o].stdin+="\n"),r[o].standard_stdout&&"\n"==r[o].standard_stdout[r[o].standard_stdout.length-1]&&(r[o].standard_stdout+="\n"),r[o].stdout&&"\n"==r[o].stdout[r[o].stdout.length-1]&&(r[o].stdout+="\n");e.randomTests["random tests"]=r}}function i(){if(e.googleTest&&e.googleTest["google tests"][0].gtest.info&&(e.gtestAllList=Object.getOwnPropertyNames(e.googleTest["google tests"][0].gtest.info),null!=e.googleTest["google tests"][0].gtest.failure)){var t=e.googleTest["google tests"][0].gtest.failure,n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;e.gtestFailedList.push(Object.getOwnPropertyNames(l)[0])}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}}e.congigName=n.config,e.reportName=n.report;var a=e.$parent[e.congigName],l=e.$parent[e.reportName];l&&a?(e.report=l,e.config=a,r(),o(),i()):e.compileCheck=e.staticCheck=e.standardTests=e.randomTests=e.memoryCheck=e.googleTest=null,e.reportName&&e.$parent.$watch(e.reportName,function(){e.report=e.$parent[e.reportName],r(),o(),i()}),e.congigName&&e.$parent.$watch(e.congigName,function(){e.config=e.$parent[e.congigName],r(),o(),i()})}function t(){return'\n    <div id="matrixui-programming-report">\n      <div ng-if="config.grading[&quot;compile check&quot;]" class="compile-check report-section">\n        <div ng-click="toggleContent($event)" class="compile-check-score score">Compile Check : You Get {{compileCheck.grade? compileCheck.grade : 0}} Points of {{config.grading[\'compile check\']}} Points</div>\n        <div ng-if="compileCheck[&quot;compile check&quot;]" class="compile-error-content test-content">\n          <div ng-if="compileCheck.grade == config.grading[&quot;compile check&quot;]" class="report-detail">\n            <pre class="full-score">Pass compilation. You got full score!</pre>\n          </div>\n          <div ng-if="compileCheck &amp;&amp; compileCheck.grade != config.grading[&quot;compile check&quot;]" class="report-detail">\n            <pre class="error-content red-color">Compilation fail.</pre>\n            <div class="error-detail">\n              <pre class="error-content">{{compileCheck[\'compile check\']}}</pre>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;static check&quot;]" class="static-check report-section">\n        <div ng-click="toggleContent($event)" class="static-check-score score">Static Check : You Get {{staticCheck.grade? staticCheck.grade : 0}} Points of {{config.grading[\'static check\']}} Points<a href="http://oclint.org/" target="_blank" ng-if="staticCheck.grade != config.grading[&quot;static check&quot;] &amp;&amp; staticCheck" class="link">Why it went wrong？</a></div>\n        <div class="static-check-content test-content">\n          <div ng-if="!staticCheck &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of errors above.</pre>\n          </div>\n          <div ng-if="!staticCheck &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="staticCheck.grade == config.grading[&quot;static check&quot;]" class="report-detail">\n            <pre class="full-score">Pass static check. You got full score!</pre>\n          </div>\n          <div ng-if="staticCheck &amp;&amp; (staticCheck.grade != config.grading[&quot;static check&quot;])" class="report-detail">\n            <pre class="error-content red-color">Static check fail.</pre>\n            <div class="error-detail">\n              <div class="message"></div>\n              <div ng-if="staticCheck[&quot;static check&quot;].summary" class="summary"></div>\n              <div ng-if="staticCheck[&quot;static check&quot;].violation" ng-repeat="item in staticCheck[&quot;static check&quot;].violation" class="violations">\n                <pre ng-if="item.message" class="error-content">{{ item.path | deleteSpace}} {{item.startLine}}:{{item.startColumn}} : {{item.category}}: {{item.message}}</pre>\n                <pre ng-if="item.rule &amp;&amp; !item.message" class="error-content">{{ item.path | deleteSpace }} {{item.startLine}}:{{item.startColumn}} : {{item.category}}: {{item.rule}}</pre>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;standard tests&quot;]" class="standard-tests-check report-section">\n        <div ng-click="toggleContent($event)" class="standard-tests-check-score score">Standard Tests : You Get {{standardTests.grade | formatReportGrade }} Points of {{config.grading[\'standard tests\']}} Points</div>\n        <div class="standard-tests-content test-content">\n          <div ng-if="!standardTests &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!standardTests &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="standardTests.grade == config.grading[&quot;standard tests&quot;]" class="report-detail">\n            <pre class="full-score">Pass standard test. You got full score!</pre>\n          </div>\n          <div ng-if="standardTests &amp;&amp; standardTests.grade != config.grading[&quot;standard tests&quot;]" class="report-detail">\n            <pre class="error-content red-color">Some examples of failed standard test cases:</pre>\n            <div class="error-detail">\n              <div ng-repeat="test in standardTests[&quot;standard tests&quot;] | showWrongTests | limitTo: 3" class="standard-tests">\n                <hr ng-if="$index != 0"/>\n                <div ng-if="test.result != &quot;CR&quot;" class="standard-test">\n                  <div layout="layout" class="tests-check-summary">\n                    <pre layout="layout">[{{ $index+1 }}]</pre>\n                    <pre layout="layout" ng-if="test.memoryused">Memory Used : {{test.memoryused}}kb</pre>\n                    <pre layout="layout" ng-if="test.timeused">Time Used : {{test.timeused}}ms</pre>\n                    <pre layout="layout" ng-if="test.result">Result : {{test.result | formatReportResult}}</pre>\n                    <pre layout="layout" ng-if="test.memorylimit">Memory Limit : {{ test.memorylimit }}kb</pre>\n                    <pre layout="layout" ng-if="test.timelimit">Time Limit : {{ test.timelimit }}ms</pre>\n                  </div>\n                  <pre class="label">Standard Input :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdin }}</pre>\n                  <pre class="label">Standard Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.standard_stdout | formatReportOutput }}</pre>\n                  <pre class="label">Your Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdout | formatReportOutput }}</pre>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;random tests&quot;]" class="random-tests-check report-section">\n        <div ng-click="toggleContent($event)" class="random-tests-check-score score">Random Tests : You Get {{randomTests.grade | formatReportGrade}} Points of {{config.grading[\'random tests\']}} Points</div>\n        <div class="random-tests-content test-content">\n          <div ng-if="!randomTests &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!randomTest &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="randomTests.grade == config.grading[&quot;random tests&quot;]" class="report-detail">\n            <pre class="full-score">Pass random check. You got full score!</pre>\n          </div>\n          <div ng-if="randomTests &amp;&amp; randomTests.grade != config.grading[&quot;random tests&quot;]" class="report-detail">\n            <pre class="error-content red-color">Some examples of failed random test cases:</pre>\n            <div class="error-detail">\n              <div ng-repeat="test in randomTests[&quot;random tests&quot;] | showWrongTests | limitTo: 3" class="random-tests">\n                <hr ng-if="$index != 0"/>\n                <div ng-if="test.result != &quot;CR&quot;" class="random-test">\n                  <div layout="layout" class="tests-check-summary">\n                    <pre layout="layout">[{{ $index+1 }}]</pre>\n                    <pre layout="layout" ng-if="test.memoryused">Memory Used : {{ test.memoryused }}kb</pre>\n                    <pre layout="layout" ng-if="test.timeused">Time Used : {{ test.timeused }}ms</pre>\n                    <pre layout="layout" ng-if="test.result">Result : {{ test.result | formatReportResult}}</pre>\n                    <pre layout="layout" ng-if="test.memorylimit">Memory Limit : {{ test.memorylimit }}kb</pre>\n                    <pre layout="layout" ng-if="test.timelimit">Time Limit : {{ test.timelimit }}ms</pre>\n                  </div>\n                  <pre class="label">Standard Input :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdin }}</pre>\n                  <pre class="label">Standard Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.standard_stdout | formatReportOutput }}</pre>\n                  <pre class="label">Your Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdout | formatReportOutput }}</pre>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;memory check&quot;]" class="memory-check report-section">\n        <div ng-click="toggleContent($event)" class="memory-check-score score">Memory Check : You Get {{memoryCheck.grade | formatReportGrade}} Points of {{config.grading[\'memory check\']}} Points<a href="http://valgrind.org/" ng-if="memoryCheck.grade != config.grading[&quot;memory check&quot;] &amp;&amp; memoryCheck" class="link">Why it went wrong？</a></div>\n        <div class="memory-check-content test-content">\n          <div ng-if="!memoryCheck &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!memoryCheck &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="memoryCheck.grade == config.grading[&quot;memory check&quot;]" class="report-detail">\n            <pre class="full-score">Pass memory access check. You got full score!</pre>\n          </div>\n          <div ng-if="memoryCheck &amp;&amp; memoryCheck.grade != config.grading[&quot;memory check&quot;]" class="report-detail">\n            <pre class="error-content red-color">Memory check fail.</pre>\n            <div class="error-detail">\n              <div ng-repeat="check in memoryCheck[&quot;memory check&quot;]" class="memory-checks">\n                <hr ng-if="$index != 0"/>\n                <pre ng-if="check.message" class="memory-check-summary">[{{ $index+1 }}] {{ check.message }}</pre>\n                <pre ng-if="check.valgrindoutput.error.kind" class="memory-check-summary">[{{ $index+1 }}] Error :   {{ check.valgrindoutput.error.kind }}</pre>\n                <pre ng-if="check.stdin">Standard Input :</pre>\n                <pre ng-if="check.stdin" class="error-content inout-tests">{{ check.stdin }}</pre>\n                <div ng-if="check.valgrindoutput.error.stack.frame" class="memory-check">\n                  <div ng-repeat="frame in check.valgrindoutput.error.stack.frame">\n                    <hr ng-if="$index != 0"/>\n                    <pre ng-if="frame.obj" class="error-content">obj: {{ frame.obj }}</pre>\n                    <pre ng-if="frame.file &amp;&amp; frame.line" class="error-content">[{{ frame.file }}]: line {{ frame.line }}</pre>\n                    <pre ng-if="frame.fn" class="error-content">{{ frame.fn }}</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;google tests&quot;]" class="google-test report-section">\n        <div ng-click="toggleContent($event)" class="google-test-score score">Google Test : You Get {{googleTest.grade | formatReportGrade}} Points of {{config.grading[\'google tests\']}} Points</div>\n        <div class="google-test-content test-content">\n          <div ng-if="!googleTest &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!googleTest &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="googleTest.grade == config.grading[&quot;google tests&quot;]" class="report-detail">\n            <pre class="full-score">Pass Google test. You got full score!</pre>\n          </div>\n          <div ng-if="googleTest &amp;&amp; googleTest.grade != config.grading[&quot;google tests&quot;]" class="report-detail">\n            <pre class="error-content red-color">Google test fail</pre>\n            <div ng-show="googleTest[&quot;google tests&quot;][0].gtest.info != null" class="error-detail">\n              <pre ng-repeat="fail in gtestFailedList" class="error-content">{{fail}} : {{googleTest[\'google tests\'][0].gtest.info[fail]}}</pre>\n            </div>\n            <div ng-show="googleTest[&quot;google tests&quot;][0].gtest.info == null" class="error-detail">\n              <pre class="error-content">error: {{ googleTest[\'google tests\'][0].gtest.failure[0][\'error\'] }}</pre>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    '}return{restrict:"E",transclude:!0,replace:!0,template:t,scope:!0,link:e}}angular.module("matrixui.components",["matrixui.components.button","matrixui.components.card","matrixui.components.checkbox","matrixui.components.codeeditor","matrixui.components.datatable","matrixui.components.dialog","matrixui.components.markdown","matrixui.components.mdeditor","matrixui.components.panel","matrixui.components.radio","matrixui.components.select","matrixui.components.spinner","matrixui.components.tab"]),angular.module("matrixui",["matrixui.components","matrixui.specials"]),angular.module("matrixui.specials",["matrixui.specials.report"]),angular.module("matrixui.components.button",[]).directive("muButton",muButtonDirective),muButtonDirective.$inject=["$timeout"],angular.module("matrixui.components.card",[]).directive("muCard",muCardDirective),muCardDirective.$inject=[],angular.module("matrixui.components.checkbox",[]).directive("muCheckbox",muCheckboxDirective),muCheckboxDirective.$inject=[];var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.registerHelper("fold","brace",function(t,n){function r(r){for(var l=n.ch,s=0;;){var c=l<=0?-1:a.lastIndexOf(r,l-1);if(c!=-1){if(1==s&&c<n.ch)break;if(o=t.getTokenTypeAt(e.Pos(i,c+1)),!/^(comment|string)/.test(o))return c+1;l=c-1}else{if(1==s)break;s=1,l=a.length}}}var o,i=n.line,a=t.getLine(i),l="{",s="}",c=r("{");if(null==c&&(l="[",s="]",c=r("[")),null!=c){var u,f,d=1,p=t.lastLine();e:for(var m=i;m<=p;++m)for(var g=t.getLine(m),h=m==i?c:0;;){var v=g.indexOf(l,h),y=g.indexOf(s,h);if(v<0&&(v=g.length),y<0&&(y=g.length),h=Math.min(v,y),h==g.length)break;if(t.getTokenTypeAt(e.Pos(m,h+1))==o)if(h==v)++d;else if(!--d){u=m,f=h;break e}++h}if(null!=u&&(i!=u||f!=c))return{from:e.Pos(i,c),to:e.Pos(u,f)}}}),e.registerHelper("fold","import",function(t,n){function r(n){if(n<t.firstLine()||n>t.lastLine())return null;var r=t.getTokenAt(e.Pos(n,1));if(/\S/.test(r.string)||(r=t.getTokenAt(e.Pos(n,r.end+1))),"keyword"!=r.type||"import"!=r.string)return null;for(var o=n,i=Math.min(t.lastLine(),n+10);o<=i;++o){var a=t.getLine(o),l=a.indexOf(";");if(l!=-1)return{startCh:r.end,end:e.Pos(o,l)}}}var o,i=n.line,a=r(i);if(!a||r(i-1)||(o=r(i-2))&&o.end.line==i-1)return null;for(var l=a.end;;){var s=r(l.line+1);if(null==s)break;l=s.end}return{from:t.clipPos(e.Pos(i,a.startCh+1)),to:l}}),e.registerHelper("fold","include",function(t,n){function r(n){if(n<t.firstLine()||n>t.lastLine())return null;var r=t.getTokenAt(e.Pos(n,1));return/\S/.test(r.string)||(r=t.getTokenAt(e.Pos(n,r.end+1))),"meta"==r.type&&"#include"==r.string.slice(0,8)?r.start+8:void 0}var o=n.line,i=r(o);if(null==i||null!=r(o-1))return null;for(var a=o;;){var l=r(a+1);if(null==l)break;++a}return{from:e.Pos(o,i+1),to:t.clipPos(e.Pos(a))}})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t){return"pairs"==t&&"string"==typeof e?e:"object"==("undefined"==typeof e?"undefined":_typeof(e))&&null!=e[t]?e[t]:f[t]}function n(e){return function(t){return l(t,e)}}function r(e){var t=e.state.closeBrackets;if(!t)return null;var n=e.getModeAt(e.getCursor());return n.closeBrackets||t}function o(n){var o=r(n);if(!o||n.getOption("disableInput"))return e.Pass;for(var i=t(o,"pairs"),a=n.listSelections(),l=0;l<a.length;l++){if(!a[l].empty())return e.Pass;var s=c(n,a[l].head);if(!s||i.indexOf(s)%2!=0)return e.Pass}for(var l=a.length-1;l>=0;l--){var u=a[l].head;n.replaceRange("",d(u.line,u.ch-1),d(u.line,u.ch+1),"+delete")}}function i(n){var o=r(n),i=o&&t(o,"explode");if(!i||n.getOption("disableInput"))return e.Pass;for(var a=n.listSelections(),l=0;l<a.length;l++){if(!a[l].empty())return e.Pass;var s=c(n,a[l].head);if(!s||i.indexOf(s)%2!=0)return e.Pass}n.operation(function(){n.replaceSelection("\n\n",null),n.execCommand("goCharLeft"),a=n.listSelections();for(var e=0;e<a.length;e++){var t=a[e].head.line;n.indentLine(t,null,!0),n.indentLine(t+1,null,!0)}})}function a(t){var n=e.cmpPos(t.anchor,t.head)>0;return{anchor:new d(t.anchor.line,t.anchor.ch+(n?-1:1)),head:new d(t.head.line,t.head.ch+(n?1:-1))}}function l(n,o){var i=r(n);if(!i||n.getOption("disableInput"))return e.Pass;var l=t(i,"pairs"),c=l.indexOf(o);if(c==-1)return e.Pass;for(var f,p=t(i,"triples"),m=l.charAt(c+1)==o,g=n.listSelections(),h=c%2==0,v=0;v<g.length;v++){var y,b=g[v],k=b.head,x=n.getRange(k,d(k.line,k.ch+1));if(h&&!b.empty())y="surround";else if(!m&&h||x!=o)if(m&&k.ch>1&&p.indexOf(o)>=0&&n.getRange(d(k.line,k.ch-2),k)==o+o&&(k.ch<=2||n.getRange(d(k.line,k.ch-3),d(k.line,k.ch-2))!=o))y="addFour";else if(m){if(e.isWordChar(x)||!u(n,k,o))return e.Pass;y="both"}else{if(!h||n.getLine(k.line).length!=k.ch&&!s(x,l)&&!/\s/.test(x))return e.Pass;y="both"}else y=p.indexOf(o)>=0&&n.getRange(k,d(k.line,k.ch+3))==o+o+o?"skipThree":"skip";if(f){if(f!=y)return e.Pass}else f=y}var C=c%2?l.charAt(c-1):o,w=c%2?o:l.charAt(c+1);n.operation(function(){if("skip"==f)n.execCommand("goCharRight");else if("skipThree"==f)for(var e=0;e<3;e++)n.execCommand("goCharRight");else if("surround"==f){for(var t=n.getSelections(),e=0;e<t.length;e++)t[e]=C+t[e]+w;n.replaceSelections(t,"around"),t=n.listSelections().slice();for(var e=0;e<t.length;e++)t[e]=a(t[e]);n.setSelections(t)}else"both"==f?(n.replaceSelection(C+w,null),n.triggerElectric(C+w),n.execCommand("goCharLeft")):"addFour"==f&&(n.replaceSelection(C+C+C+C,"before"),n.execCommand("goCharRight"))})}function s(e,t){var n=t.lastIndexOf(e);return n>-1&&n%2==1}function c(e,t){var n=e.getRange(d(t.line,t.ch-1),d(t.line,t.ch+1));return 2==n.length?n:null}function u(t,n,r){var o=t.getLine(n.line),i=t.getTokenAt(n);if(/\bstring2?\b/.test(i.type))return!1;var a=new e.StringStream(o.slice(0,n.ch)+r+o.slice(n.ch),4);for(a.pos=a.start=i.start;;){var l=t.getMode().token(a,i.state);if(a.pos>=n.ch+1)return/\bstring2?\b/.test(l);a.start=a.pos}}var f={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},d=e.Pos;e.defineOption("autoCloseBrackets",!1,function(t,n,r){r&&r!=e.Init&&(t.removeKeyMap(m),t.state.closeBrackets=null),n&&(t.state.closeBrackets=n,t.addKeyMap(m))});for(var p=f.pairs+"`",m={Backspace:o,Enter:i},g=0;g<p.length;g++)m["'"+p.charAt(g)+"'"]=n(p.charAt(g))}),angular.module("matrixui.components.codeeditor",[]).constant("muCodeeditorConfig",{}).directive("muCodeeditor",muCodeeditorDirective),muCodeeditorDirective.$inject=["$timeout","muCodeeditorConfig"];var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){var t=e.search(o);return t==-1?0:t}function n(e,t,n){return/\bstring\b/.test(e.getTokenTypeAt(i(t.line,0)))&&!/^[\'\"`]/.test(n)}var r={},o=/[^\s\u00a0]/,i=e.Pos;e.commands.toggleComment=function(e){e.toggleComment()},e.defineExtension("toggleComment",function(e){e||(e=r);for(var t=this,n=1/0,o=this.listSelections(),a=null,l=o.length-1;l>=0;l--){var s=o[l].from(),c=o[l].to();s.line>=n||(c.line>=n&&(c=i(n,0)),n=s.line,null==a?t.uncomment(s,c,e)?a="un":(t.lineComment(s,c,e),a="line"):"un"==a?t.uncomment(s,c,e):t.lineComment(s,c,e))}}),e.defineExtension("lineComment",function(e,a,l){
l||(l=r);var s=this,c=s.getModeAt(e),u=s.getLine(e.line);if(null!=u&&!n(s,e,u)){var f=l.lineComment||c.lineComment;if(!f)return void((l.blockCommentStart||c.blockCommentStart)&&(l.fullLines=!0,s.blockComment(e,a,l)));var d=Math.min(0!=a.ch||a.line==e.line?a.line+1:a.line,s.lastLine()+1),p=null==l.padding?" ":l.padding,m=l.commentBlankLines||e.line==a.line;s.operation(function(){if(l.indent){for(var n=null,r=e.line;r<d;++r){var a=s.getLine(r),c=a.slice(0,t(a));(null==n||n.length>c.length)&&(n=c)}for(var r=e.line;r<d;++r){var a=s.getLine(r),u=n.length;(m||o.test(a))&&(a.slice(0,u)!=n&&(u=t(a)),s.replaceRange(n+f+p,i(r,0),i(r,u)))}}else for(var r=e.line;r<d;++r)(m||o.test(s.getLine(r)))&&s.replaceRange(f+p,i(r,0))})}}),e.defineExtension("blockComment",function(e,t,n){n||(n=r);var a=this,l=a.getModeAt(e),s=n.blockCommentStart||l.blockCommentStart,c=n.blockCommentEnd||l.blockCommentEnd;if(!s||!c)return void((n.lineComment||l.lineComment)&&0!=n.fullLines&&a.lineComment(e,t,n));if(!/\bcomment\b/.test(a.getTokenTypeAt(i(e.line,0)))){var u=Math.min(t.line,a.lastLine());u!=e.line&&0==t.ch&&o.test(a.getLine(u))&&--u;var f=null==n.padding?" ":n.padding;e.line>u||a.operation(function(){if(0!=n.fullLines){var r=o.test(a.getLine(u));a.replaceRange(f+c,i(u)),a.replaceRange(s+f,i(e.line,0));var d=n.blockCommentLead||l.blockCommentLead;if(null!=d)for(var p=e.line+1;p<=u;++p)(p!=u||r)&&a.replaceRange(d+f,i(p,0))}else a.replaceRange(c,t),a.replaceRange(s,e)})}}),e.defineExtension("uncomment",function(e,t,n){n||(n=r);var a,l=this,s=l.getModeAt(e),c=Math.min(0!=t.ch||t.line==e.line?t.line:t.line-1,l.lastLine()),u=Math.min(e.line,c),f=n.lineComment||s.lineComment,d=[],p=null==n.padding?" ":n.padding;e:if(f){for(var m=u;m<=c;++m){var g=l.getLine(m),h=g.indexOf(f);if(h>-1&&!/comment/.test(l.getTokenTypeAt(i(m,h+1)))&&(h=-1),h==-1&&o.test(g))break e;if(h>-1&&o.test(g.slice(0,h)))break e;d.push(g)}if(l.operation(function(){for(var e=u;e<=c;++e){var t=d[e-u],n=t.indexOf(f),r=n+f.length;n<0||(t.slice(r,r+p.length)==p&&(r+=p.length),a=!0,l.replaceRange("",i(e,n),i(e,r)))}}),a)return!0}var v=n.blockCommentStart||s.blockCommentStart,y=n.blockCommentEnd||s.blockCommentEnd;if(!v||!y)return!1;var b=n.blockCommentLead||s.blockCommentLead,k=l.getLine(u),x=k.indexOf(v);if(x==-1)return!1;var C=c==u?k:l.getLine(c),w=C.indexOf(y,c==u?x+v.length:0);if(w==-1&&u!=c&&(C=l.getLine(--c),w=C.indexOf(y)),w==-1||!/comment/.test(l.getTokenTypeAt(i(u,x+1)))||!/comment/.test(l.getTokenTypeAt(i(c,w+1))))return!1;var S=k.lastIndexOf(v,e.ch),T=S==-1?-1:k.slice(0,e.ch).indexOf(y,S+v.length);if(S!=-1&&T!=-1&&T+y.length!=e.ch)return!1;T=C.indexOf(y,t.ch);var L=C.slice(t.ch).lastIndexOf(v,T-t.ch);return S=T==-1||L==-1?-1:t.ch+L,(T==-1||S==-1||S==t.ch)&&(l.operation(function(){l.replaceRange("",i(c,w-(p&&C.slice(w-p.length,w)==p?p.length:0)),i(c,w+y.length));var e=x+v.length;if(p&&k.slice(e,e+p.length)==p&&(e+=p.length),l.replaceRange("",i(u,x),i(u,e)),b)for(var t=u+1;t<=c;++t){var n=l.getLine(t),r=n.indexOf(b);if(r!=-1&&!o.test(n.slice(0,r))){var a=r+b.length;p&&n.slice(a,a+p.length)==p&&(a+=p.length),l.replaceRange("",i(t,r),i(t,a))}}}),!0)})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,n){var r,o=e.getWrapperElement();return r=o.appendChild(document.createElement("div")),n?r.className="CodeMirror-dialog CodeMirror-dialog-bottom":r.className="CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?r.innerHTML=t:r.appendChild(t),r}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(r,o,i){function a(e){if("string"==typeof e)f.value=e;else{if(c)return;c=!0,s.parentNode.removeChild(s),u.focus(),i.onClose&&i.onClose(s)}}i||(i={}),n(this,null);var l,s=t(this,r,i.bottom),c=!1,u=this,f=s.getElementsByTagName("input")[0];return f?(f.focus(),i.value&&(f.value=i.value,i.selectValueOnOpen!==!1&&f.select()),i.onInput&&e.on(f,"input",function(e){i.onInput(e,f.value,a)}),i.onKeyUp&&e.on(f,"keyup",function(e){i.onKeyUp(e,f.value,a)}),e.on(f,"keydown",function(t){i&&i.onKeyDown&&i.onKeyDown(t,f.value,a)||((27==t.keyCode||i.closeOnEnter!==!1&&13==t.keyCode)&&(f.blur(),e.e_stop(t),a()),13==t.keyCode&&o(f.value,t))}),i.closeOnBlur!==!1&&e.on(f,"blur",a)):(l=s.getElementsByTagName("button")[0])&&(e.on(l,"click",function(){a(),u.focus()}),i.closeOnBlur!==!1&&e.on(l,"blur",a),l.focus()),a}),e.defineExtension("openConfirm",function(r,o,i){function a(){c||(c=!0,l.parentNode.removeChild(l),u.focus())}n(this,null);var l=t(this,r,i&&i.bottom),s=l.getElementsByTagName("button"),c=!1,u=this,f=1;s[0].focus();for(var d=0;d<s.length;++d){var p=s[d];!function(t){e.on(p,"click",function(n){e.e_preventDefault(n),a(),t&&t(u)})}(o[d]),e.on(p,"blur",function(){--f,setTimeout(function(){f<=0&&a()},200)}),e.on(p,"focus",function(){++f})}}),e.defineExtension("openNotification",function(r,o){function i(){s||(s=!0,clearTimeout(a),l.parentNode.removeChild(l))}n(this,i);var a,l=t(this,r,o&&o.bottom),s=!1,c=o&&"undefined"!=typeof o.duration?o.duration:5e3;return e.on(l,"click",function(t){e.e_preventDefault(t),i()}),c&&(a=setTimeout(i,c)),i})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(t,o,i,a){function l(e){var n=s(t,o);if(!n||n.to.line-n.from.line<c)return null;for(var r=t.findMarksAt(n.from),i=0;i<r.length;++i)if(r[i].__isFold&&"fold"!==a){if(!e)return null;n.cleared=!0,r[i].clear()}return n}if(i&&i.call){var s=i;i=null}else var s=r(t,i,"rangeFinder");"number"==typeof o&&(o=e.Pos(o,0));var c=r(t,i,"minFoldSize"),u=l(!0);if(r(t,i,"scanUp"))for(;!u&&o.line>t.firstLine();)o=e.Pos(o.line-1,0),u=l(!1);if(u&&!u.cleared&&"unfold"!==a){var f=n(t,i);e.on(f,"mousedown",function(t){d.clear(),e.e_preventDefault(t)});var d=t.markText(u.from,u.to,{replacedWith:f,clearOnEnter:r(t,i,"clearOnEnter"),__isFold:!0});d.on("clear",function(n,r){e.signal(t,"unfold",t,n,r)}),e.signal(t,"fold",t,u.from,u.to)}}function n(e,t){var n=r(e,t,"widget");if("string"==typeof n){var o=document.createTextNode(n);n=document.createElement("span"),n.appendChild(o),n.className="CodeMirror-foldmarker"}return n}function r(e,t,n){if(t&&void 0!==t[n])return t[n];var r=e.options.foldOptions;return r&&void 0!==r[n]?r[n]:o[n]}e.newFoldFunction=function(e,n){return function(r,o){t(r,o,{rangeFinder:e,widget:n})}},e.defineExtension("foldCode",function(e,n,r){t(this,e,n,r)}),e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),n=0;n<t.length;++n)if(t[n].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var n=t.firstLine(),r=t.lastLine();n<=r;n++)t.foldCode(e.Pos(n,0),null,"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var n=t.firstLine(),r=t.lastLine();n<=r;n++)t.foldCode(e.Pos(n,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var r=0;r<e.length;++r){var o=e[r](t,n);if(o)return o}}}),e.registerHelper("fold","auto",function(e,t){for(var n=e.getHelpers(t,"fold"),r=0;r<n.length;r++){var o=n[r](e,t);if(o)return o}});var o={rangeFinder:e.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return r(this,e,t)})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,n){for(var r=n.paragraphStart||e.getHelper(t,"paragraphStart"),o=t.line,i=e.firstLine();o>i;--o){var a=e.getLine(o);if(r&&r.test(a))break;if(!/\S/.test(a)){++o;break}}for(var l=n.paragraphEnd||e.getHelper(t,"paragraphEnd"),s=t.line+1,c=e.lastLine();s<=c;++s){var a=e.getLine(s);if(l&&l.test(a)){++s;break}if(!/\S/.test(a))break}return{from:o,to:s}}function n(e,t,n,r){for(var o=t;o<e.length&&" "==e.charAt(o);)o++;for(;o>0&&!n.test(e.slice(o-1,o+1));--o);for(var i=!0;;i=!1){var a=o;if(r)for(;" "==e.charAt(a-1);)--a;if(0!=a||!i)return{from:a,to:o};o=t}}function r(t,r,i,a){r=t.clipPos(r),i=t.clipPos(i);var l=a.column||80,s=a.wrapOn||/\s\S|-[^\.\d]/,c=a.killTrailingSpace!==!1,u=[],f="",d=r.line,p=t.getRange(r,i,!1);if(!p.length)return null;for(var m=p[0].match(/^[ \t]*/)[0],g=0;g<p.length;++g){var h=p[g],v=f.length,y=0;f&&h&&!s.test(f.charAt(f.length-1)+h.charAt(0))&&(f+=" ",y=1);var b="";if(g&&(b=h.match(/^\s*/)[0],h=h.slice(b.length)),f+=h,g){var k=f.length>l&&m==b&&n(f,l,s,c);k&&k.from==v&&k.to==v+y?(f=m+h,++d):u.push({text:[y?" ":""],from:o(d,v),to:o(d+1,b.length)})}for(;f.length>l;){var x=n(f,l,s,c);u.push({text:["",m],from:o(d,x.from),to:o(d,x.to)}),f=m+f.slice(x.to),++d}}return u.length&&t.operation(function(){for(var n=0;n<u.length;++n){var r=u[n];(r.text||e.cmpPos(r.from,r.to))&&t.replaceRange(r.text,r.from,r.to)}}),u.length?{from:u[0].from,to:e.changeEnd(u[u.length-1])}:null}var o=e.Pos;e.defineExtension("wrapParagraph",function(e,n){n=n||{},e||(e=this.getCursor());var i=t(this,e,n);return r(this,o(i.from,0),o(i.to-1),n)}),e.commands.wrapLines=function(e){e.operation(function(){for(var n=e.listSelections(),i=e.lastLine()+1,a=n.length-1;a>=0;a--){var l,s=n[a];if(s.empty()){var c=t(e,s.head,{});l={from:o(c.from,0),to:o(c.to-1)}}else l={from:s.from(),to:s.to()};l.to.line>=i||(i=l.from.line,r(e,l.from,l.to,{}))}})},e.defineExtension("wrapRange",function(e,t,n){return r(this,e,t,n||{})}),e.defineExtension("wrapParagraphsInRange",function(e,n,i){i=i||{};for(var a=this,l=[],s=e.line;s<=n.line;){var c=t(a,o(s,0),i);l.push(c),s=c.to}var u=!1;return l.length&&a.operation(function(){for(var e=l.length-1;e>=0;--e)u=u||r(a,o(l[e].from,0),o(l[e].to-1),i)}),u})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,n){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}e.defineMode("javascript",function(n,r){function o(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}function i(e,t,n){return Ce=e,we=n,t}function a(e,n){var r=e.next();if('"'==r||"'"==r)return n.tokenize=l(r),n.tokenize(e,n);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if("."==r&&e.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return i(r);if("="==r&&e.eat(">"))return i("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if("0"==r&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),i("number","number");if("0"==r&&e.eat(/b/i))return e.eatWhile(/[01]/i),i("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==r)return e.eat("*")?(n.tokenize=s,s(e,n)):e.eat("/")?(e.skipToEnd(),i("comment","comment")):t(e,n,1)?(o(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),i("regexp","string-2")):(e.eatWhile(Ve),i("operator","operator",e.current()));if("`"==r)return n.tokenize=c,c(e,n);if("#"==r)return e.skipToEnd(),i("error","error");if(Ve.test(r))return e.eatWhile(Ve),i("operator","operator",e.current());if(qe.test(r)){e.eatWhile(qe);var a=e.current(),u=Ae.propertyIsEnumerable(a)&&Ae[a];return u&&"."!=n.lastType?i(u.type,u.style,a):i("variable","variable",a)}}function l(e){return function(t,n){var r,o=!1;if(Le&&"@"==t.peek()&&t.match(Pe))return n.tokenize=a,i("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=e||o);)o=!o&&"\\"==r;return o||(n.tokenize=a),i("string","string")}}function s(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=a;break}r="*"==n}return i("comment","comment")}function c(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=a;break}r=!r&&"\\"==n}return i("quasi","string-2",e.current())}function u(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){for(var r=0,o=!1,i=n-1;i>=0;--i){var a=e.string.charAt(i),l=Ee.indexOf(a);if(l>=0&&l<3){if(!r){++i;break}if(0==--r){"("==a&&(o=!0);break}}else if(l>=3&&l<6)++r;else if(qe.test(a))o=!0;else{if(/["'\/]/.test(a))return;if(o&&!r){++i;break}}}o&&!r&&(t.fatArrowAt=i)}}function f(e,t,n,r,o,i){this.indented=e,this.column=t,this.type=n,this.prev=o,this.info=i,null!=r&&(this.align=r)}function d(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function p(e,t,n,r,o){var i=e.cc;for(De.state=e,De.stream=o,De.marked=null,De.cc=i,De.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var a=i.length?i.pop():Oe?w:C;if(a(n,r)){for(;i.length&&i[i.length-1].lex;)i.pop()();return De.marked?De.marked:"variable"==n&&d(e,r)?"variable-2":t}}}function m(){for(var e=arguments.length-1;e>=0;e--)De.cc.push(arguments[e])}function g(){return m.apply(null,arguments),!0}function h(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=De.state;if(De.marked="def",n.context){if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function v(){De.state.context={prev:De.state.context,vars:De.state.localVars},De.state.localVars=Re}function y(){De.state.localVars=De.state.context.vars,De.state.context=De.state.context.prev}function b(e,t){var n=function(){var n=De.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var o=n.lexical;o&&")"==o.type&&o.align;o=o.prev)r=o.indented;n.lexical=new f(r,De.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function k(){var e=De.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function x(e){function t(n){return n==e?g():";"==e?m():g(t)}return t}function C(e,t){return"var"==e?g(b("vardef",t.length),X,x(";"),k):"keyword a"==e?g(b("form"),T,C,k):"keyword b"==e?g(b("form"),C,k):"{"==e?g(b("}"),U,k):";"==e?g():"if"==e?("else"==De.state.lexical.info&&De.state.cc[De.state.cc.length-1]==k&&De.state.cc.pop()(),g(b("form"),T,C,k,re)):"function"==e?g(ce):"for"==e?g(b("form"),oe,C,k):"variable"==e?g(b("stat"),I):"switch"==e?g(b("form"),T,b("}","switch"),x("{"),U,k,k):"case"==e?g(w,x(":")):"default"==e?g(x(":")):"catch"==e?g(b("form"),v,x("("),ue,x(")"),C,k,y):"class"==e?g(b("form"),fe,k):"export"==e?g(b("stat"),ge,k):"import"==e?g(b("stat"),he,k):"module"==e?g(b("form"),Z,b("}"),x("{"),U,k,k):"type"==e?g(G,x("operator"),G,x(";")):"async"==e?g(C):m(b("stat"),w,x(";"),k)}function w(e){return L(e,!1)}function S(e){return L(e,!0)}function T(e){return"("!=e?m():g(b(")"),w,x(")"),k)}function L(e,t){if(De.state.fatArrowAt==De.stream.start){var n=t?j:E;if("("==e)return g(v,b(")"),H(Z,")"),k,x("=>"),n,y);if("variable"==e)return m(v,Z,x("=>"),n,y)}var r=t?A:q;return je.hasOwnProperty(e)?g(r):"function"==e?g(ce,r):"keyword c"==e||"async"==e?g(t?M:O):"("==e?g(b(")"),O,x(")"),k,r):"operator"==e||"spread"==e?g(t?S:w):"["==e?g(b("]"),ke,k,r):"{"==e?W(B,"}",null,r):"quasi"==e?m(V,r):"new"==e?g(D(t)):g()}function O(e){return e.match(/[;\}\)\],]/)?m():m(w)}function M(e){return e.match(/[;\}\)\],]/)?m():m(S)}function q(e,t){return","==e?g(w):A(e,t,!1)}function A(e,t,n){var r=0==n?q:A,o=0==n?w:S;return"=>"==e?g(v,n?j:E,y):"operator"==e?/\+\+|--/.test(t)?g(r):"?"==t?g(w,x(":"),o):g(o):"quasi"==e?m(V,r):";"!=e?"("==e?W(S,")","call",r):"."==e?g(_,r):"["==e?g(b("]"),O,x("]"),k,r):void 0:void 0}function V(e,t){return"quasi"!=e?m():"${"!=t.slice(t.length-2)?g(V):g(w,P)}function P(e){if("}"==e)return De.marked="string-2",De.state.tokenize=c,g(V)}function E(e){return u(De.stream,De.state),m("{"==e?C:w)}function j(e){return u(De.stream,De.state),m("{"==e?C:S)}function D(e){return function(t){return"."==t?g(e?$:R):m(e?S:w)}}function R(e,t){if("target"==t)return De.marked="keyword",g(q)}function $(e,t){if("target"==t)return De.marked="keyword",g(A)}function I(e){return":"==e?g(k,C):m(q,x(";"),k)}function _(e){if("variable"==e)return De.marked="property",g()}function B(e,t){return"async"==e?(De.marked="property",g(B)):"variable"==e||"keyword"==De.style?(De.marked="property",g("get"==t||"set"==t?F:N)):"number"==e||"string"==e?(De.marked=Le?"property":De.style+" property",g(N)):"jsonld-keyword"==e?g(N):"modifier"==e?g(B):"["==e?g(w,x("]"),N):"spread"==e?g(w):":"==e?m(N):void 0}function F(e){return"variable"!=e?m(N):(De.marked="property",g(ce))}function N(e){return":"==e?g(S):"("==e?m(ce):void 0}function H(e,t){function n(r,o){if(","==r){var i=De.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),g(function(n,r){return n==t||r==t?m():m(e)},n)}return r==t||o==t?g():g(x(t))}return function(r,o){return r==t||o==t?g():m(e,n)}}function W(e,t,n){for(var r=3;r<arguments.length;r++)De.cc.push(arguments[r]);return g(b(t,n),H(e,t),k)}function U(e){return"}"==e?g():m(C,U)}function z(e,t){if(Me){if(":"==e)return g(G);if("?"==t)return g(z)}}function G(e){return"variable"==e?(De.marked="variable-3",g(Q)):"{"==e?g(H(K,"}")):"("==e?g(H(J,")"),Y):void 0}function Y(e){if("=>"==e)return g(G)}function K(e){return"variable"==e||"keyword"==De.style?(De.marked="property",g(K)):":"==e?g(G):void 0}function J(e){return"variable"==e?g(J):":"==e?g(G):void 0}function Q(e,t){return"<"==t?g(H(G,">"),Q):"["==e?g(x("]"),Q):void 0}function X(){return m(Z,z,te,ne)}function Z(e,t){return"modifier"==e?g(Z):"variable"==e?(h(t),g()):"spread"==e?g(Z):"["==e?W(Z,"]"):"{"==e?W(ee,"}"):void 0}function ee(e,t){return"variable"!=e||De.stream.match(/^\s*:/,!1)?("variable"==e&&(De.marked="property"),"spread"==e?g(Z):"}"==e?m():g(x(":"),Z,te)):(h(t),g(te))}function te(e,t){if("="==t)return g(S)}function ne(e){if(","==e)return g(X)}function re(e,t){if("keyword b"==e&&"else"==t)return g(b("form","else"),C,k)}function oe(e){if("("==e)return g(b(")"),ie,x(")"),k)}function ie(e){return"var"==e?g(X,x(";"),le):";"==e?g(le):"variable"==e?g(ae):m(w,x(";"),le)}function ae(e,t){return"in"==t||"of"==t?(De.marked="keyword",g(w)):g(q,le)}function le(e,t){return";"==e?g(se):"in"==t||"of"==t?(De.marked="keyword",g(w)):m(w,x(";"),se)}function se(e){")"!=e&&g(w)}function ce(e,t){return"*"==t?(De.marked="keyword",g(ce)):"variable"==e?(h(t),g(ce)):"("==e?g(v,b(")"),H(ue,")"),k,z,C,y):void 0}function ue(e){return"spread"==e?g(ue):m(Z,z,te)}function fe(e,t){if("variable"==e)return h(t),g(de)}function de(e,t){return"extends"==t||"implements"==t?g(Me?G:w,de):"{"==e?g(b("}"),pe,k):void 0}function pe(e,t){return"variable"==e||"keyword"==De.style?("static"==t||"get"==t||"set"==t||Me&&("public"==t||"private"==t||"protected"==t||"readonly"==t||"abstract"==t))&&De.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(De.marked="keyword",g(pe)):(De.marked="property",g(Me?me:ce,pe)):"*"==t?(De.marked="keyword",g(pe)):";"==e?g(pe):"}"==e?g():void 0}function me(e,t){return"?"==t?g(me):":"==e?g(G,te):m(ce)}function ge(e,t){return"*"==t?(De.marked="keyword",g(be,x(";"))):"default"==t?(De.marked="keyword",g(w,x(";"))):m(C)}function he(e){return"string"==e?g():m(ve,be)}function ve(e,t){return"{"==e?W(ve,"}"):("variable"==e&&h(t),"*"==t&&(De.marked="keyword"),g(ye))}function ye(e,t){if("as"==t)return De.marked="keyword",g(ve)}function be(e,t){if("from"==t)return De.marked="keyword",g(w)}function ke(e){return"]"==e?g():m(H(S,"]"))}function xe(e,t){return"operator"==e.lastType||","==e.lastType||Ve.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}var Ce,we,Se=n.indentUnit,Te=r.statementIndent,Le=r.jsonld,Oe=r.json||Le,Me=r.typescript,qe=r.wordCharacters||/[\w$\xa1-\uffff]/,Ae=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),o=e("operator"),i={type:"atom",style:"atom"},a={if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:e("new"),delete:r,throw:r,debugger:r,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:i,false:i,null:i,undefined:i,NaN:i,Infinity:i,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r,async:e("async")};if(Me){var l={type:"variable",style:"variable-3"},s={interface:e("class"),implements:r,namespace:r,module:e("module"),enum:e("module"),type:e("type"),public:e("modifier"),private:e("modifier"),protected:e("modifier"),abstract:e("modifier"),as:o,string:l,number:l,boolean:l,any:l};for(var c in s)a[c]=s[c]}return a}(),Ve=/[+\-*&%=<>!?|~^]/,Pe=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ee="([{}])",je={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},De={state:null,column:null,marked:null,cc:null},Re={name:"this",next:{name:"arguments"}};return k.lex=!0,{startState:function(e){var t={tokenize:a,lastType:"sof",cc:[],lexical:new f((e||0)-Se,0,"block",(!1)),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:e||0};return r.globalVars&&"object"==_typeof(r.globalVars)&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),u(e,t)),t.tokenize!=s&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==Ce?n:(t.lastType="operator"!=Ce||"++"!=we&&"--"!=we?Ce:"incdec",p(t,n,Ce,we,e))},indent:function(t,n){if(t.tokenize==s)return e.Pass;if(t.tokenize!=a)return 0;var o,i=n&&n.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(n))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==k)l=l.prev;else if(u!=re)break}for(;("stat"==l.type||"form"==l.type)&&("}"==i||(o=t.cc[t.cc.length-1])&&(o==q||o==A)&&!/^[,\.=+\-*:?[\(]/.test(n));)l=l.prev;Te&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var f=l.type,d=i==f;return"vardef"==f?l.indented+("operator"==t.lastType||","==t.lastType?l.info+1:0):"form"==f&&"{"==i?l.indented:"form"==f?l.indented+Se:"stat"==f?l.indented+(xe(t,n)?Te||Se:0):"switch"!=l.info||d||0==r.doubleIndentSwitch?l.align?l.column+(d?0:1):l.indented+(d?0:Se):l.indented+(/^(?:case|default)\b/.test(n)?Se:2*Se)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Oe?null:"/*",blockCommentEnd:Oe?null:"*/",lineComment:Oe?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Oe?"json":"javascript",jsonldMode:Le,jsonMode:Oe,expressionAllowed:t,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=w&&t!=S||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,r,o){var i=e.getLineHandle(t.line),s=t.ch-1,c=s>=0&&l[i.text.charAt(s)]||l[i.text.charAt(++s)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(r&&u>0!=(s==t.ch))return null;var f=e.getTokenTypeAt(a(t.line,s+1)),d=n(e,a(t.line,s+(u>0?1:0)),u,f||null,o);return null==d?null:{from:a(t.line,s),to:d&&d.pos,match:d&&d.ch==c.charAt(0),forward:u>0}}function n(e,t,n,r,o){for(var i=o&&o.maxScanLineLength||1e4,s=o&&o.maxScanLines||1e3,c=[],u=o&&o.bracketRegex?o.bracketRegex:/[(){}[\]]/,f=n>0?Math.min(t.line+s,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-s),d=t.line;d!=f;d+=n){var p=e.getLine(d);if(p){var m=n>0?0:p.length-1,g=n>0?p.length:-1;if(!(p.length>i))for(d==t.line&&(m=t.ch-(n<0?1:0));m!=g;m+=n){var h=p.charAt(m);if(u.test(h)&&(void 0===r||e.getTokenTypeAt(a(d,m+1))==r)){var v=l[h];if(">"==v.charAt(1)==n>0)c.push(h);else{if(!c.length)return{pos:a(d,m),ch:h};c.pop()}}}}}return d-n!=(n>0?e.lastLine():e.firstLine())&&null}function r(e,n,r){for(var o=e.state.matchBrackets.maxHighlightLineLength||1e3,l=[],s=e.listSelections(),c=0;c<s.length;c++){var u=s[c].empty()&&t(e,s[c].head,!1,r);if(u&&e.getLine(u.from.line).length<=o){var f=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";l.push(e.markText(u.from,a(u.from.line,u.from.ch+1),{className:f})),u.to&&e.getLine(u.to.line).length<=o&&l.push(e.markText(u.to,a(u.to.line,u.to.ch+1),{className:f}))}}if(l.length){i&&e.state.focused&&e.focus();var d=function(){e.operation(function(){for(var e=0;e<l.length;e++)l[e].clear()})};if(!n)return d;setTimeout(d,800)}}function o(e){e.operation(function(){s&&(s(),s=null),s=r(e,!1,e.state.matchBrackets)})}var i=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),a=e.Pos,l={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},s=null;e.defineOption("matchBrackets",!1,function(t,n,r){r&&r!=e.Init&&(t.off("cursorActivity",o),s&&(s(),s=null)),n&&(t.state.matchBrackets="object"==("undefined"==typeof n?"undefined":_typeof(n))?n:{},t.on("cursorActivity",o))}),e.defineExtension("matchBrackets",function(){r(this,!0)}),e.defineExtension("findMatchingBracket",function(e,n,r){return t(this,e,n,r)}),e.defineExtension("scanForBracket",function(e,t,r,o){return n(this,e,t,r,o)})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){function t(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);return n&&n.index==t.pos?(t.pos+=n[0].length||1,"searching"):void(n?t.pos=n.index:t.skipToEnd())}}}function n(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function r(e){return e.state.search||(e.state.search=new n)}function o(e){return"string"==typeof e&&e==e.toLowerCase()}function i(e,t,n){return e.getSearchCursor(t,n,o(t))}function a(e,t,n,r,o){e.openDialog(t,r,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){m(e)},onKeyDown:o})}function l(e,t,n,r,o){e.openDialog?e.openDialog(t,o,{value:r,selectValueOnOpen:!0}):o(prompt(n,r))}function s(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}function c(e){return e.replace(/\\(.)/g,function(e,t){return"n"==t?"\n":"r"==t?"\r":t})}function u(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],t[2].indexOf("i")==-1?"":"i")}catch(e){}else e=c(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function f(e,n,r){n.queryText=r,n.query=u(r),e.removeOverlay(n.overlay,o(n.query)),n.overlay=t(n.query,o(n.query)),e.addOverlay(n.overlay),e.showMatchesOnScrollbar&&(n.annotate&&(n.annotate.clear(),n.annotate=null),n.annotate=e.showMatchesOnScrollbar(n.query,o(n.query)))}function d(t,n,o,i){var s=r(t);if(s.query)return p(t,n);var c=t.getSelection()||s.lastQuery;if(o&&t.openDialog){var u=null,d=function(n,r){e.e_stop(r),n&&(n!=s.queryText&&(f(t,s,n),s.posFrom=s.posTo=t.getCursor()),u&&(u.style.opacity=1),p(t,r.shiftKey,function(e,n){var r;n.line<3&&document.querySelector&&(r=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&r.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((u=r).style.opacity=.4)}))};a(t,v,c,d,function(n,o){var i=e.keyName(n),a=e.keyMap[t.getOption("keyMap")][i];a||(a=t.getOption("extraKeys")[i]),"findNext"==a||"findPrev"==a||"findPersistentNext"==a||"findPersistentPrev"==a?(e.e_stop(n),f(t,r(t),o),t.execCommand(a)):"find"!=a&&"findPersistent"!=a||(e.e_stop(n),d(o,n))}),i&&c&&(f(t,s,c),p(t,n))}else l(t,v,"Search for:",c,function(e){e&&!s.query&&t.operation(function(){f(t,s,e),s.posFrom=s.posTo=t.getCursor(),p(t,n)})})}function p(t,n,o){t.operation(function(){var a=r(t),l=i(t,a.query,n?a.posFrom:a.posTo);(l.find(n)||(l=i(t,a.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0)),l.find(n)))&&(t.setSelection(l.from(),l.to()),t.scrollIntoView({from:l.from(),to:l.to()},20),a.posFrom=l.from(),a.posTo=l.to(),o&&o(l.from(),l.to()))})}function m(e){e.operation(function(){var t=r(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))})}function g(e,t,n){e.operation(function(){for(var r=i(e,t);r.findNext();)if("string"!=typeof t){var o=e.getRange(r.from(),r.to()).match(t);r.replace(n.replace(/\$(\d)/g,function(e,t){return o[t]}))}else r.replace(n)})}function h(e,t){if(!e.getOption("readOnly")){var n=e.getSelection()||r(e).lastQuery,o=t?"Replace all:":"Replace:";l(e,o+y,o,n,function(n){n&&(n=u(n),l(e,b,"Replace with:","",function(r){if(r=c(r),t)g(e,n,r);else{m(e);var o=i(e,n,e.getCursor("from")),a=function t(){var a,c=o.from();!(a=o.findNext())&&(o=i(e,n),!(a=o.findNext())||c&&o.from().line==c.line&&o.from().ch==c.ch)||(e.setSelection(o.from(),o.to()),e.scrollIntoView({from:o.from(),to:o.to()}),s(e,k,"Replace?",[function(){l(a)},t,function(){g(e,n,r)}]))},l=function(e){o.replace("string"==typeof n?r:r.replace(/\$(\d)/g,function(t,n){return e[n]})),a()};a()}}))})}}var v='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',y=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',b='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',k="Replace? <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>";
e.commands.find=function(e){m(e),d(e)},e.commands.findPersistent=function(e){m(e),d(e,!1,!0)},e.commands.findPersistentNext=function(e){d(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){d(e,!0,!0,!0)},e.commands.findNext=d,e.commands.findPrev=function(e){d(e,!0)},e.commands.clearSearch=m,e.commands.replace=h,e.commands.replaceAll=function(e){h(e,!0)}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,o,i){if(this.atOccurrence=!1,this.doc=e,null==i&&"string"==typeof t&&(i=!1),o=o?e.clipPos(o):r(0,0),this.pos={from:o,to:o},"string"!=typeof t)t.global||(t=new RegExp(t.source,t.ignoreCase?"ig":"g")),this.matches=function(n,o){if(n){t.lastIndex=0;for(var i,a,l=e.getLine(o.line).slice(0,o.ch),s=0;;){t.lastIndex=s;var c=t.exec(l);if(!c)break;if(i=c,a=i.index,s=i.index+(i[0].length||1),s==l.length)break}var u=i&&i[0].length||0;u||(0==a&&0==l.length?i=void 0:a!=e.getLine(o.line).length&&u++)}else{t.lastIndex=o.ch;var l=e.getLine(o.line),i=t.exec(l),u=i&&i[0].length||0,a=i&&i.index;a+u==l.length||u||(u=1)}if(i&&u)return{from:r(o.line,a),to:r(o.line,a+u),match:i}};else{var a=t;i&&(t=t.toLowerCase());var l=i?function(e){return e.toLowerCase()}:function(e){return e},s=t.split("\n");if(1==s.length)t.length?this.matches=function(o,i){if(o){var s=e.getLine(i.line).slice(0,i.ch),c=l(s),u=c.lastIndexOf(t);if(u>-1)return u=n(s,c,u),{from:r(i.line,u),to:r(i.line,u+a.length)}}else{var s=e.getLine(i.line).slice(i.ch),c=l(s),u=c.indexOf(t);if(u>-1)return u=n(s,c,u)+i.ch,{from:r(i.line,u),to:r(i.line,u+a.length)}}}:this.matches=function(){};else{var c=a.split("\n");this.matches=function(t,n){var o=s.length-1;if(t){if(n.line-(s.length-1)<e.firstLine())return;if(l(e.getLine(n.line).slice(0,c[o].length))!=s[s.length-1])return;for(var i=r(n.line,c[o].length),a=n.line-1,u=o-1;u>=1;--u,--a)if(s[u]!=l(e.getLine(a)))return;var f=e.getLine(a),d=f.length-c[0].length;if(l(f.slice(d))!=s[0])return;return{from:r(a,d),to:i}}if(!(n.line+(s.length-1)>e.lastLine())){var f=e.getLine(n.line),d=f.length-c[0].length;if(l(f.slice(d))==s[0]){for(var p=r(n.line,d),a=n.line+1,u=1;u<o;++u,++a)if(s[u]!=l(e.getLine(a)))return;if(l(e.getLine(a).slice(0,c[o].length))==s[o])return{from:p,to:r(a,c[o].length)}}}}}}}function n(e,t,n){if(e.length==t.length)return n;for(var r=Math.min(n,e.length);;){var o=e.slice(0,r).toLowerCase().length;if(o<n)++r;else{if(!(o>n))return r;--r}}}var r=e.Pos;t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function t(e){var t=r(e,0);return n.pos={from:t,to:t},n.atOccurrence=!1,!1}for(var n=this,o=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,o))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!o.line)return t(0);o=r(o.line-1,this.doc.getLine(o.line-1).length)}else{var i=this.doc.lineCount();if(o.line==i-1)return t(i);o=r(o.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var o=e.splitLines(t);this.doc.replaceRange(o,this.pos.from,this.pos.to,n),this.pos.to=r(this.pos.from.line+o.length-1,o[o.length-1].length+(1==o.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,n,r){return new t(this.doc,e,n,r)}),e.defineDocExtension("getSearchCursor",function(e,n,r){return new t(this,e,n,r)}),e.defineExtension("selectMatches",function(t,n){for(var r=[],o=this.getSearchCursor(t,this.getCursor("from"),n);o.findNext()&&!(e.cmpPos(o.to(),this.getCursor("to"))>0);)r.push({anchor:o.from(),head:o.to()});r.length&&this.setSelections(r,0)})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],e):e(CodeMirror)}(function(e){function t(t,n,r){if(r<0&&0==n.ch)return t.clipPos(d(n.line-1));var o=t.getLine(n.line);if(r>0&&n.ch>=o.length)return t.clipPos(d(n.line+1,0));for(var i,a="start",l=n.ch,s=r<0?0:o.length,c=0;l!=s;l+=r,c++){var u=o.charAt(r<0?l-1:l),f="_"!=u&&e.isWordChar(u)?"w":"o";if("w"==f&&u.toUpperCase()==u&&(f="W"),"start"==a)"o"!=f&&(a="in",i=f);else if("in"==a&&i!=f){if("w"==i&&"W"==f&&r<0&&l--,"W"==i&&"w"==f&&r>0){i="w";continue}break}}return d(n.line,l)}function n(e,n){e.extendSelectionsBy(function(r){return e.display.shift||e.doc.extend||r.empty()?t(e.doc,r.head,n):n<0?r.from():r.to()})}function r(t,n){return t.isReadOnly()?e.Pass:(t.operation(function(){for(var e=t.listSelections().length,r=[],o=-1,i=0;i<e;i++){var a=t.listSelections()[i].head;if(!(a.line<=o)){var l=d(a.line+(n?0:1),0);t.replaceRange("\n",l,null,"+insertLine"),t.indentLine(l.line,null,!0),r.push({head:l,anchor:l}),o=a.line+1}}t.setSelections(r)}),void t.execCommand("indentAuto"))}function o(t,n){for(var r=n.ch,o=r,i=t.getLine(n.line);r&&e.isWordChar(i.charAt(r-1));)--r;for(;o<i.length&&e.isWordChar(i.charAt(o));)++o;return{from:d(n.line,r),to:d(n.line,o),word:i.slice(r,o)}}function i(e){var t=e.getCursor(),n=e.scanForBracket(t,-1);if(n)for(;;){var r=e.scanForBracket(t,1);if(!r)return;if(r.ch==v.charAt(v.indexOf(n.ch)+1))return e.setSelection(d(n.pos.line,n.pos.ch+1),r.pos,!1),!0;t=d(r.pos.line,r.pos.ch+1)}}function a(t,n){if(t.isReadOnly())return e.Pass;for(var r,o=t.listSelections(),i=[],a=0;a<o.length;a++){var l=o[a];if(!l.empty()){for(var s=l.from().line,c=l.to().line;a<o.length-1&&o[a+1].from().line==c;)c=l[++a].to().line;i.push(s,c)}}i.length?r=!0:i.push(t.firstLine(),t.lastLine()),t.operation(function(){for(var e=[],o=0;o<i.length;o+=2){var a=i[o],l=i[o+1],s=d(a,0),c=d(l),u=t.getRange(s,c,!1);n?u.sort():u.sort(function(e,t){var n=e.toUpperCase(),r=t.toUpperCase();return n!=r&&(e=n,t=r),e<t?-1:e==t?0:1}),t.replaceRange(u,s,c),r&&e.push({anchor:s,head:c})}r&&t.setSelections(e,0)})}function l(t,n){t.operation(function(){for(var r=t.listSelections(),i=[],a=[],l=0;l<r.length;l++){var s=r[l];s.empty()?(i.push(l),a.push("")):a.push(n(t.getRange(s.from(),s.to())))}t.replaceSelections(a,"around","case");for(var c,l=i.length-1;l>=0;l--){var s=r[i[l]];if(!(c&&e.cmpPos(s.head,c)>0)){var u=o(t,s.head);c=u.from,t.replaceRange(n(u.word),u.from,u.to)}}})}function s(t){var n=t.getCursor("from"),r=t.getCursor("to");if(0==e.cmpPos(n,r)){var i=o(t,n);if(!i.word)return;n=i.from,r=i.to}return{from:n,to:r,query:t.getRange(n,r),word:i}}function c(e,t){var n=s(e);if(n){var r=n.query,o=e.getSearchCursor(r,t?n.to:n.from);(t?o.findNext():o.findPrevious())?e.setSelection(o.from(),o.to()):(o=e.getSearchCursor(r,t?d(e.firstLine(),0):e.clipPos(d(e.lastLine()))),(t?o.findNext():o.findPrevious())?e.setSelection(o.from(),o.to()):n.word&&e.setSelection(n.from,n.to))}}var u=e.keyMap.sublime={fallthrough:"default"},f=e.commands,d=e.Pos,p=e.keyMap.default==e.keyMap.macDefault,m=p?"Cmd-":"Ctrl-",g=p?"Ctrl-":"Alt-";f[u[g+"Left"]="goSubwordLeft"]=function(e){n(e,-1)},f[u[g+"Right"]="goSubwordRight"]=function(e){n(e,1)},p&&(u["Cmd-Left"]="goLineStartSmart");var h=p?"Ctrl-Alt-":"Ctrl-";f[u[h+"Up"]="scrollLineUp"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top+t.clientHeight,"local");e.getCursor().line>=n&&e.execCommand("goLineUp")}e.scrollTo(null,t.top-e.defaultTextHeight())},f[u[h+"Down"]="scrollLineDown"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top,"local")+1;e.getCursor().line<=n&&e.execCommand("goLineDown")}e.scrollTo(null,t.top+e.defaultTextHeight())},f[u["Shift-"+m+"L"]="splitSelectionByLine"]=function(e){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)for(var o=t[r].from(),i=t[r].to(),a=o.line;a<=i.line;++a)i.line>o.line&&a==i.line&&0==i.ch||n.push({anchor:a==o.line?o:d(a,0),head:a==i.line?i:d(a)});e.setSelections(n,0)},u["Shift-Tab"]="indentLess",f[u.Esc="singleSelectionTop"]=function(e){var t=e.listSelections()[0];e.setSelection(t.anchor,t.head,{scroll:!1})},f[u[m+"L"]="selectLine"]=function(e){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var o=t[r];n.push({anchor:d(o.from().line,0),head:d(o.to().line+1,0)})}e.setSelections(n)},u["Shift-Ctrl-K"]="deleteLine",f[u[m+"Enter"]="insertLineAfter"]=function(e){return r(e,!1)},f[u["Shift-"+m+"Enter"]="insertLineBefore"]=function(e){return r(e,!0)},f[u[m+"D"]="selectNextOccurrence"]=function(t){var n=t.getCursor("from"),r=t.getCursor("to"),i=t.state.sublimeFindFullWord==t.doc.sel;if(0==e.cmpPos(n,r)){var a=o(t,n);if(!a.word)return;t.setSelection(a.from,a.to),i=!0}else{var l=t.getRange(n,r),s=i?new RegExp("\\b"+l+"\\b"):l,c=t.getSearchCursor(s,r);c.findNext()?t.addSelection(c.from(),c.to()):(c=t.getSearchCursor(s,d(t.firstLine(),0)),c.findNext()&&t.addSelection(c.from(),c.to()))}i&&(t.state.sublimeFindFullWord=t.doc.sel)};var v="(){}[]";f[u["Shift-"+m+"Space"]="selectScope"]=function(e){i(e)||e.execCommand("selectAll")},f[u["Shift-"+m+"M"]="selectBetweenBrackets"]=function(t){if(!i(t))return e.Pass},f[u[m+"M"]="goToBracket"]=function(t){t.extendSelectionsBy(function(n){var r=t.scanForBracket(n.head,1);if(r&&0!=e.cmpPos(r.pos,n.head))return r.pos;var o=t.scanForBracket(n.head,-1);return o&&d(o.pos.line,o.pos.ch+1)||n.head})};var y=p?"Cmd-Ctrl-":"Shift-Ctrl-";f[u[y+"Up"]="swapLineUp"]=function(t){if(t.isReadOnly())return e.Pass;for(var n=t.listSelections(),r=[],o=t.firstLine()-1,i=[],a=0;a<n.length;a++){var l=n[a],s=l.from().line-1,c=l.to().line;i.push({anchor:d(l.anchor.line-1,l.anchor.ch),head:d(l.head.line-1,l.head.ch)}),0!=l.to().ch||l.empty()||--c,s>o?r.push(s,c):r.length&&(r[r.length-1]=c),o=c}t.operation(function(){for(var e=0;e<r.length;e+=2){var n=r[e],o=r[e+1],a=t.getLine(n);t.replaceRange("",d(n,0),d(n+1,0),"+swapLine"),o>t.lastLine()?t.replaceRange("\n"+a,d(t.lastLine()),null,"+swapLine"):t.replaceRange(a+"\n",d(o,0),null,"+swapLine")}t.setSelections(i),t.scrollIntoView()})},f[u[y+"Down"]="swapLineDown"]=function(t){if(t.isReadOnly())return e.Pass;for(var n=t.listSelections(),r=[],o=t.lastLine()+1,i=n.length-1;i>=0;i--){var a=n[i],l=a.to().line+1,s=a.from().line;0!=a.to().ch||a.empty()||l--,l<o?r.push(l,s):r.length&&(r[r.length-1]=s),o=s}t.operation(function(){for(var e=r.length-2;e>=0;e-=2){var n=r[e],o=r[e+1],i=t.getLine(n);n==t.lastLine()?t.replaceRange("",d(n-1),d(n),"+swapLine"):t.replaceRange("",d(n,0),d(n+1,0),"+swapLine"),t.replaceRange(i+"\n",d(o,0),null,"+swapLine")}t.scrollIntoView()})},f[u[m+"/"]="toggleCommentIndented"]=function(e){e.toggleComment({indent:!0})},f[u[m+"J"]="joinLines"]=function(e){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){for(var o=t[r],i=o.from(),a=i.line,l=o.to().line;r<t.length-1&&t[r+1].from().line==l;)l=t[++r].to().line;n.push({start:a,end:l,anchor:!o.empty()&&i})}e.operation(function(){for(var t=0,r=[],o=0;o<n.length;o++){for(var i,a=n[o],l=a.anchor&&d(a.anchor.line-t,a.anchor.ch),s=a.start;s<=a.end;s++){var c=s-t;s==a.end&&(i=d(c,e.getLine(c).length+1)),c<e.lastLine()&&(e.replaceRange(" ",d(c),d(c+1,/^\s*/.exec(e.getLine(c+1))[0].length)),++t)}r.push({anchor:l||i,head:i})}e.setSelections(r,0)})},f[u["Shift-"+m+"D"]="duplicateLine"]=function(e){e.operation(function(){for(var t=e.listSelections().length,n=0;n<t;n++){var r=e.listSelections()[n];r.empty()?e.replaceRange(e.getLine(r.head.line)+"\n",d(r.head.line,0)):e.replaceRange(e.getRange(r.from(),r.to()),r.from())}e.scrollIntoView()})},u[m+"T"]="transposeChars",f[u.F9="sortLines"]=function(e){a(e,!0)},f[u[m+"F9"]="sortLinesInsensitive"]=function(e){a(e,!1)},f[u.F2="nextBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){var n=t.shift(),r=n.find();if(r)return t.push(n),e.setSelection(r.from,r.to)}},f[u["Shift-F2"]="prevBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){t.unshift(t.pop());var n=t[t.length-1].find();if(n)return e.setSelection(n.from,n.to);t.pop()}},f[u[m+"F2"]="toggleBookmark"]=function(e){for(var t=e.listSelections(),n=e.state.sublimeBookmarks||(e.state.sublimeBookmarks=[]),r=0;r<t.length;r++){for(var o=t[r].from(),i=t[r].to(),a=e.findMarks(o,i),l=0;l<a.length;l++)if(a[l].sublimeBookmark){a[l].clear();for(var s=0;s<n.length;s++)n[s]==a[l]&&n.splice(s--,1);break}l==a.length&&n.push(e.markText(o,i,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},f[u["Shift-"+m+"F2"]="clearBookmarks"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();t.length=0},f[u["Alt-F2"]="selectBookmarks"]=function(e){var t=e.state.sublimeBookmarks,n=[];if(t)for(var r=0;r<t.length;r++){var o=t[r].find();o?n.push({anchor:o.from,head:o.to}):t.splice(r--,0)}n.length&&e.setSelections(n,0)},u["Alt-Q"]="wrapLines";var b=m+"K ";u[b+m+"Backspace"]="delLineLeft",f[u.Backspace="smartBackspace"]=function(t){return t.somethingSelected()?e.Pass:void t.operation(function(){for(var n=t.listSelections(),r=t.getOption("indentUnit"),o=n.length-1;o>=0;o--){var i=n[o].head,a=t.getRange({line:i.line,ch:0},i),l=e.countColumn(a,null,t.getOption("tabSize")),s=t.findPosH(i,-1,"char",!1);if(a&&!/\S/.test(a)&&l%r==0){var c=new d(i.line,e.findColumn(a,l-r,r));c.ch!=i.ch&&(s=c)}t.replaceRange("",s,i,"+delete")}})},f[u[b+m+"K"]="delLineRight"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange("",t[n].anchor,d(t[n].to().line),"+delete");e.scrollIntoView()})},f[u[b+m+"U"]="upcaseAtCursor"]=function(e){l(e,function(e){return e.toUpperCase()})},f[u[b+m+"L"]="downcaseAtCursor"]=function(e){l(e,function(e){return e.toLowerCase()})},f[u[b+m+"Space"]="setSublimeMark"]=function(e){e.state.sublimeMark&&e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor())},f[u[b+m+"A"]="selectToSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&e.setSelection(e.getCursor(),t)},f[u[b+m+"W"]="deleteToSublimeMark"]=function(t){var n=t.state.sublimeMark&&t.state.sublimeMark.find();if(n){var r=t.getCursor(),o=n;if(e.cmpPos(r,o)>0){var i=o;o=r,r=i}t.state.sublimeKilled=t.getRange(r,o),t.replaceRange("",r,o)}},f[u[b+m+"X"]="swapWithSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&(e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor()),e.setCursor(t))},f[u[b+m+"Y"]="sublimeYank"]=function(e){null!=e.state.sublimeKilled&&e.replaceSelection(e.state.sublimeKilled,null,"paste")},u[b+m+"G"]="clearBookmarks",f[u[b+m+"C"]="showInCenter"]=function(e){var t=e.cursorCoords(null,"local");e.scrollTo(null,(t.top+t.bottom)/2-e.getScrollInfo().clientHeight/2)};var k=p?"Ctrl-Shift-":"Ctrl-Alt-";f[u[k+"Up"]="selectLinesUpward"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=0;n<t.length;n++){var r=t[n];r.head.line>e.firstLine()&&e.addSelection(d(r.head.line-1,r.head.ch))}})},f[u[k+"Down"]="selectLinesDownward"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=0;n<t.length;n++){var r=t[n];r.head.line<e.lastLine()&&e.addSelection(d(r.head.line+1,r.head.ch))}})},f[u[m+"F3"]="findUnder"]=function(e){c(e,!0)},f[u["Shift-"+m+"F3"]="findUnderPrevious"]=function(e){c(e,!1)},f[u["Alt-F3"]="findAllUnder"]=function(e){var t=s(e);if(t){for(var n=e.getSearchCursor(t.query),r=[],o=-1;n.findNext();)r.push({anchor:n.from(),head:n.to()}),n.from().line<=t.from.line&&n.from().ch<=t.from.ch&&o++;e.setSelections(r,o)}},u["Shift-"+m+"["]="fold",u["Shift-"+m+"]"]="unfold",u[b+m+"0"]=u[b+m+"j"]="unfoldAll",u[m+"I"]="findIncremental",u["Shift-"+m+"I"]="findIncrementalReverse",u[m+"H"]="replace",u.F3="findNext",u["Shift-F3"]="findPrev",e.normalizeKeyMap(u)}),angular.module("matrixui.components.datatable",[]).directive("muDatatable",muDatatableDirective),muDatatableDirective.$inject=[],angular.module("matrixui.components.dialog",[]).directive("muDialog",muDialogDirective),muDialogDirective.$inject=[],angular.module("matrixui.components.markdown",[]).directive("muMarkdown",muMarkdowndDirective),muMarkdowndDirective.$inject=[],angular.module("matrixui.components.mdeditor",[]).directive("muMdeditor",muMdeditorDirective),muMdeditorDirective.$inject=[],angular.module("matrixui.components.panel",[]).directive("muPanel",muPanelDirective),muPanelDirective.$inject=[],angular.module("matrixui.components.radio",[]).directive("muRadio",muRadioDirective),muRadioDirective.$inject=[],angular.module("matrixui.components.select",[]).run(muSelectRun).directive("muSelect",muSelectDirective),muSelectRun.$inject=["$templateCache"];var Selector=null;muSelectDirective.$inject=["$filter","$timeout","$window","$http","$q"],Selector=function(){function e(e){return e instanceof HTMLElement?e.ownerDocument&&e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e):window.getComputedStyle(e):{}}function t(e,t,n,s,c){this.restrict="EAC",this.replace=!0,this.transclude=!0,this.scope={name:"@?",value:"=model",disabled:"=?disable",disableSearch:"=?",required:"=?require",multiple:"=?multi",placeholder:"@?",valueAttr:"@",labelAttr:"@?",groupAttr:"@?",options:"=?",debounce:"=?",create:"&?",limit:"=?",rtl:"=?",api:"=?",change:"&?",remote:"&?",remoteParam:"@?",remoteValidation:"&?",remoteValidationParam:"@?",removeButton:"=?",softDelete:"=?",closeAfterSelection:"=?",viewItemTemplate:"=?",dropdownItemTemplate:"=?",dropdownCreateTemplate:"=?",dropdownGroupTemplate:"=?"},this.templateUrl="selector/selector.html",r=e,o=t,i=n,a=s,l=c}var n={up:38,down:40,left:37,right:39,escape:27,enter:13,backspace:8,delete:46,shift:16,leftCmd:91,rightCmd:93,ctrl:17,alt:18,tab:9},r=void 0,o=void 0,i=void 0,a=void 0,l=void 0;return t.prototype.$inject=["$filter","$timeout","$window","$http","$q"],t.prototype.link=function(t,s,c,u,f){f(t,function(t,u){var f=r("filter"),d=angular.element(s[0].querySelector(".selector-input input")),p=angular.element(s[0].querySelector(".selector-dropdown")),m=d.controller("ngModel"),g=s.find("select").controller("ngModel"),h=l.defer(),v={api:{},search:"",disableSearch:!1,selectedValues:[],highlighted:0,valueAttr:null,labelAttr:"label",groupAttr:"group",options:[],debounce:0,limit:1/0,remoteParam:"q",remoteValidationParam:"value",removeButton:!0,viewItemTemplate:"selector/item-default.html",dropdownItemTemplate:"selector/item-default.html",dropdownCreateTemplate:"selector/item-create.html",dropdownGroupTemplate:"selector/group-default.html"};!angular.isDefined(u.value)&&u.multiple&&(u.value=[]),angular.forEach(v,function(e,t){angular.isDefined(u[t])||(u[t]=e)}),angular.forEach(["name","valueAttr","labelAttr"],function(e){c[e]||(c[e]=u[e])}),u.getObjValue=function(e,t){var n;if(!angular.isDefined(e)||!angular.isDefined(t))return e;if(t=angular.isArray(t)?t:t.split("."),n=t.shift(),n.indexOf("[")>0){var r=n.match(/(\w+)\[(\d+)\]/);null!==r&&(e=e[r[1]],n=r[2])}return 0===t.length?e[n]:u.getObjValue(e[n],t)},u.setObjValue=function(e,t,n){var r;if(angular.isDefined(e)||(e={}),t=angular.isArray(t)?t:t.split("."),r=t.shift(),r.indexOf("[")>0){var o=r.match(/(\w+)\[(\d+)\]/);null!==o&&(e=e[o[1]],r=o[2])}return e[r]=0===t.length?n:u.setObjValue(e[r],t,n),e},u.optionValue=function(e){return null==u.valueAttr?e:u.getObjValue(e,u.valueAttr)},u.optionEquals=function(e,t){return angular.equals(u.optionValue(e),angular.isDefined(t)?t:u.value)},u.setValue=function(e){u.multiple?u.value=null==u.valueAttr?e||[]:(e||[]).map(function(e){return u.getObjValue(e,u.valueAttr)}):u.value=null==u.valueAttr?e:u.getObjValue(e||{},u.valueAttr)},u.hasValue=function(){return u.multiple?(u.value||[]).length>0:!!u.value},u.request=function(e,t,n,r){var o,i={};if(u.disabled)return l.reject();if(!angular.isDefined(n))throw"Remote attribute is not defined";if(u.loading=!0,u.options=[],i[e]=t,o=n(i),"function"!=typeof o.then){var s={method:"GET",cache:!0,params:{}};angular.extend(s,o),angular.extend(s.params,o.params),s.params[r]=t,o=a(s)}return o.then(function(e){u.options=e.data||e,u.filterOptions(),u.loading=!1,h.resolve()},function(e){throw u.loading=!1,h.reject(),"Error while fetching data: "+(e.message||e)}),o},u.fetch=function(){return u.request("search",u.search||"",u.remote,u.remoteParam)},u.fetchValidation=function(e){return u.request("value",e,u.remoteValidation,u.remoteValidationParam)},angular.isDefined(u.remote)?angular.isDefined(u.remoteValidation)||(u.remoteValidation=!1):(u.remote=!1,u.remoteValidation=!1,h.resolve()),u.remote&&o(function(){l.when(u.hasValue()&&u.remoteValidation?u.fetchValidation(u.value):angular.noop).then(function(){u.$watch("search",function(){o(u.fetch)})})}),u.optionToObject=function(e,t){var n={},r=angular.element(e);angular.forEach(e.dataset,function(e,t){t.match(/^\$/)||(n[t]=e)}),e.value&&u.setObjValue(n,u.valueAttr||"value",e.value),r.text()&&u.setObjValue(n,u.labelAttr,r.text().trim()),angular.isDefined(t)&&u.setObjValue(n,u.groupAttr,t),u.options.push(n),!r.attr("selected")||!u.multiple&&u.hasValue()||(u.multiple?(u.value||(u.value=[]),u.value.push(u.optionValue(n))):u.value||(u.value=u.optionValue(n)))},u.fillWithHtml=function(){u.options=[],angular.forEach(t,function(e){var t=(e.tagName||"").toLowerCase();"option"==t&&u.optionToObject(e),"optgroup"==t&&angular.forEach(e.querySelectorAll("option"),function(t){u.optionToObject(t,(e.attributes.label||{}).value)})}),u.updateSelected()},u.initialize=function(){u.remote||angular.isArray(u.options)&&u.options.length||u.fillWithHtml(),u.hasValue()&&(u.multiple?angular.isArray(u.value)||(u.value=[u.value]):angular.isArray(u.value)&&(u.value=u.value[0]),u.updateSelected(),u.filterOptions(),u.updateValue())},u.$watch("multiple",function(){o(u.setInputWidth),h.promise.then(u.initialize,u.initialize)}),u.dropdownPosition=function(){var t=d.parent()[0],n=e(t),r=parseFloat(n.marginTop||0),o=parseFloat(n.marginLeft||0);p.css({top:t.offsetTop+t.offsetHeight+r+"px",left:t.offsetLeft+o+"px",width:t.offsetWidth+"px"})},u.open=function(){u.multiple&&(u.selectedValues||[]).length>=u.limit||(u.isOpen=!0,u.dropdownPosition(),o(u.scrollToHighlighted))},u.close=function(){u.isOpen=!1,u.resetInput(),u.remote&&o(u.fetch)},u.decrementHighlighted=function(){u.highlight(u.highlighted-1),u.scrollToHighlighted()},u.incrementHighlighted=function(){u.highlight(u.highlighted+1),u.scrollToHighlighted()},u.highlight=function(e){c.create&&u.search&&e==-1?u.highlighted=-1:u.filteredOptions.length&&(u.highlighted=(u.filteredOptions.length+e)%u.filteredOptions.length)},u.scrollToHighlighted=function(){var t=p[0],n=t.querySelectorAll("li.selector-option")[u.highlighted],r=e(n),i=parseFloat(r.marginTop||0),a=parseFloat(r.marginBottom||0);u.filteredOptions.length&&(n.offsetTop+n.offsetHeight+a>t.scrollTop+t.offsetHeight&&o(function(){t.scrollTop=n.offsetTop+n.offsetHeight+a-t.offsetHeight}),n.offsetTop-i<t.scrollTop&&o(function(){t.scrollTop=n.offsetTop-i}))},u.createOption=function(e){l.when(function(){var t={};return angular.isFunction(u.create)?t=u.create({input:e}):(u.setObjValue(t,u.labelAttr,e),u.setObjValue(t,u.valueAttr||"value",e)),t}()).then(function(e){u.options.push(e),u.set(e)})},u.set=function(e){u.multiple&&(u.selectedValues||[]).length>=u.limit||(angular.isDefined(e)||(e=u.filteredOptions[u.highlighted]),u.multiple?(u.selectedValues||(u.selectedValues=[]),u.selectedValues.indexOf(e)<0&&u.selectedValues.push(e)):u.selectedValues=[e],(!u.multiple||u.closeAfterSelection||(u.selectedValues||[]).length>=u.limit)&&u.close(),u.resetInput(),g.$setDirty())},u.unset=function(e){u.multiple?u.selectedValues.splice(angular.isDefined(e)?e:u.selectedValues.length-1,1):u.selectedValues=[],u.resetInput(),g.$setDirty()},u.keydown=function(e){switch(e.keyCode){case n.up:if(!u.isOpen)break;u.decrementHighlighted(),e.preventDefault();break;case n.down:u.isOpen?u.incrementHighlighted():u.open(),e.preventDefault();break;case n.escape:u.highlight(0),u.close();break;case n.enter:u.isOpen&&(c.create&&u.search&&u.highlighted==-1?u.createOption(e.target.value):u.filteredOptions.length&&u.set(),e.preventDefault());break;case n.backspace:if(!d.val()){var t=u.getObjValue(u.selectedValues.slice(-1)[0]||{},u.labelAttr||"");u.unset(),u.open(),u.softDelete&&!u.disableSearch&&o(function(){u.search=t}),e.preventDefault()}break;case n.left:case n.right:case n.shift:case n.ctrl:case n.alt:case n.tab:case n.leftCmd:case n.rightCmd:break;default:!u.multiple&&u.hasValue()?e.preventDefault():(u.open(),u.highlight(0))}},u.inOptions=function(e,t){return u.remote?e.filter(function(e){return angular.equals(t,e)}).length>0:e.indexOf(t)>=0},u.filterOptions=function(){if(u.filteredOptions=f(u.options||[],u.search),angular.isArray(u.selectedValues)||(u.selectedValues=[]),u.multiple)u.filteredOptions=u.filteredOptions.filter(function(e){return!u.inOptions(u.selectedValues,e)});else{var e=u.filteredOptions.indexOf(u.selectedValues[0]);e>=0&&u.highlight(e)}},u.measureWidth=function(){var t,n=e(d[0]),r=angular.element('<span class="selector-shadow"></span>');return r.text(d.val()||(u.hasValue()?"":u.placeholder)||""),angular.element(document.body).append(r),angular.forEach(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(e){r.css(e,n[e])}),t=r[0].offsetWidth,r.remove(),t},u.setInputWidth=function(){var e=u.measureWidth()+1;d.css("width",e+"px")},u.resetInput=function(){d.val(""),u.setInputWidth(),o(function(){u.search=""})},u.$watch("[search, options, value]",function(){u.filterOptions(),o(function(){u.setInputWidth(),u.isOpen&&u.dropdownPosition()})},!0),u.updateValue=function(e){angular.isDefined(e)||(e=u.selectedValues||[]),u.setValue(u.multiple?e:e[0])},u.$watch("selectedValues",function(e,t){angular.equals(e,t)||(u.updateValue(),angular.isFunction(u.change)&&u.change(u.multiple?{newValue:e,oldValue:t}:{newValue:(e||[])[0],oldValue:(t||[])[0]}))},!0),u.$watchCollection("options",function(e,t){angular.equals(e,t)||u.remote||u.updateSelected()}),u.updateSelected=function(){u.multiple?u.selectedValues=(u.value||[]).map(function(e){return f(u.options,function(t){return u.optionEquals(t,e)})[0]}).filter(function(e){return angular.isDefined(e)}).slice(0,u.limit):u.selectedValues=(u.options||[]).filter(function(e){return u.optionEquals(e)}).slice(0,1)},u.$watch("value",function(e,t){angular.equals(e,t)||l.when(u.remote&&u.remoteValidation&&u.hasValue()?u.fetchValidation(e):angular.noop).then(function(){u.updateSelected(),u.filterOptions(),u.updateValue()})},!0),d=angular.element(s[0].querySelector(".selector-input input")).on("focus",function(){o(function(){u.$apply(u.open)})}).on("blur",function(){u.$apply(u.close)}).on("keydown",function(e){u.$apply(function(){u.keydown(e)})}).on("input",function(){u.setInputWidth()}),p.on("mousedown",function(e){e.preventDefault()}),angular.element(i).on("resize",function(){u.dropdownPosition()}),u.$watch(function(){return m.$pristine},function(e){g[e?"$setPristine":"$setDirty"]()}),u.$watch(function(){return m.$touched},function(e){g[e?"$setTouched":"$setUntouched"]()}),angular.forEach(["open","close","fetch"],function(e){u.api[e]=u[e]}),u.api.focus=function(){d[0].focus()},u.api.set=function(e){return u.value=e},u.api.unset=function(e){var t=e?(u.selectedValues||[]).filter(function(t){return u.optionEquals(t,e)}):u.selectedValues,n=u.selectedValues.map(function(e,n){return u.inOptions(t,e)?n:-1}).filter(function(e){return e>=0});angular.forEach(n,function(e,t){u.unset(e-t)})}})},t}(),angular.module("matrixui.components.spinner",[]).directive("muSpinner",muSpinnerDirective),muSpinnerDirective.$inject=[],angular.module("matrixui.components.tab",[]).directive("muTab",muTabDirective),muTabDirective.$inject=[],angular.module("matrixui.specials").filter("formatReportScore",function(){var e=void 0;return e=function(e){return e===-1||null===e?"正在评测并计算总分，请等候...":e}}),angular.module("matrixui.specials").filter("formatReportGrade",function(){var e=void 0;return e=function(e){return void 0===e||null===e?"0":e}}),angular.module("matrixui.specials").filter("formatReportOutput",function(){var e=void 0;return e=function(e){return void 0===e||null===e||""===e?"No output.":e}}),angular.module("matrixui.specials").filter("formatCheckMessage",function(){var e=void 0;return e=function(e){return null===e||void 0===e?"Pass.":e}}),angular.module("matrixui.specials").filter("formatSubmissionsGrade",function(){var e=void 0;return e=function(e){return null===e?"等待评测中":"-1"===e||e===-1?"正在评测":e}}),angular.module("matrixui.specials").filter("formatReportResult",function(){var e=void 0;return e=function(e){return"WA"===e?"Wrong Answer":"TL"===e?"Time Limit":"CR"===e?"Correct":"ML"===e?"Memory Limit":"RE"===e?"Runtime Error":"IE"===e?"Internal Error":"OL"===e?"Output Limit":e}}),angular.module("matrixui.specials").filter("deleteSpace",function(){var e=void 0;return e=function(e){var t=void 0;t="/"==e[0]?e.slice(5):e;for(var n=0;" "==t[n];)n++;return t.slice(n)}}),angular.module("matrixui.specials").filter("showWrongTests",function(){var e=void 0;return e=function(e){var t=void 0;if(e)return t=[],e.forEach(function(e){"CR"!==e.result&&t.push(e)}),t}}),angular.module("matrixui.specials.report",[]).directive("muReport",muReportDirective);