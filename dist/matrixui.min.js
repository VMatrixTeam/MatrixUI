"use strict";function muButtonDirective(e){function t(e){return angular.isDefined(e.href)||angular.isDefined(e.ngHref)||angular.isDefined(e.ngLink)||angular.isDefined(e.uiSref)}function n(e,n){if(t(n))return'<a class="mu-button" ng-transclude></a>';var r="undefined"==typeof n.type?"button":n.type;return'<button class="mu-button" type="'+r+'" ng-transclude></button>'}function r(n,r,i){t(i)&&angular.isDefined(i.ngDisabled)&&n.$watch(i.ngDisabled,function(e){r.attr("tabindex",e?-1:0)}),(i.default||""===i.default)&&r.addClass("mu-button-default"),(i.primary||""===i.primary)&&r.addClass("mu-button-primary"),(i.info||""===i.info)&&r.addClass("mu-button-info"),(i.warn||""===i.warn)&&r.addClass("mu-button-warn"),(i.danger||""===i.danger)&&r.addClass("mu-button-danger"),r.on("click",function(e){i.disabled===!0&&(e.preventDefault(),e.stopImmediatePropagation())}),r.hasClass("md-no-focus")||(n.mouseActive=!1,r.on("mousedown",function(){n.mouseActive=!0,e(function(){n.mouseActive=!1},100)}).on("focus",function(){n.mouseActive===!1&&r.addClass("md-focused")}).on("blur",function(e){r.removeClass("md-focused")}))}return{restrict:"E",replace:!0,transclude:!0,template:n,link:r}}function muCardDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>Card组件</h2>"}}function muCheckboxDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-checkbox组件</h2>"}}function muCodeeditorDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-codeeditor组件</h2>"}}function muDatatableDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-datable组件</h2>"}}function muDialogDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-dialog组件</h2>"}}function muMarkdowndDirective(){function e(e,n,r){function i(e){n.find("div").html(t(e))}e.name=r.ngModel;var a=r.content;a||(a=""),e.$parent[e.name]?a=e.$parent[e.name]:e.$parent[e.name]="",e.content=a,n.find("div").html(t(e.content)),e.name&&e.$parent.$watch(e.name,function(){function t(){i(r),MathJax.Hub.Typeset(n[0])}var r=e.$parent[e.name];if(r||(r=e.content),!window.MathJax)throw Error("MathJax没有加载");try{t()}catch(e){console.warn("markdown warn: 给定的数据暂时无法渲染，等待数据更新...")}})}function t(e){if(window.marked)return hljs&&marked.setOptions({highlight:function(e){return hljs.highlightAuto(e).value}}),marked(e);throw Error("marked is not defined")}return{restrict:"E",template:"\n      <div class='markdown-body'>\n        <div ng-transclude></div>\n      </div>\n    ",transclude:!0,scope:!0,link:e}}function muMdeditorDirective(){function e(e,i,a){function o(e,t){return angular.element(t).addClass("markdown-body"),r(e,t),MathJax.Hub.Typeset(t),t.innerHTML}function s(){var r=a.type||"simple",s=null;s="full"===r?t():n(),e.mde=new SimpleMDE({spellChecker:!1,element:i.find("textarea")[0],toolbar:s,previewRender:o,tabSize:2}),a.content&&e.mde.value(a.content)}e.name=a.ngModel;var l=a.content;if(l||(l=""),e.$parent[e.name]?l=e.$parent[e.name]:e.$parent[e.name]="",e.content=l,e.name&&e.$parent.$watch(e.name,function(){e.mde&&e.mde.value(e.$parent[e.name])}),!window.SimpleMDE)throw Error("mu-mdeditor error: SimpleMDE没有加载");s()}function t(){var e=["heading-1","heading-2","heading-3","bold","italic","|","quote","code","link","image","|","unordered-list","ordered-list","|","preview","side-by-side","fullscreen","|","guide"];return e}function n(){var e=["heading-1","heading-2","heading-3","bold","italic","|","quote","code","link","image","|","unordered-list","ordered-list","|","preview","|","guide"];return e}function r(e,t){angular.element(t).html(i(e))}function i(e){if(window.marked)return hljs&&marked.setOptions({highlight:function(e){return hljs.highlightAuto(e).value}}),marked(e);throw Error("marked is not defined")}return{restrict:"E",transclude:!0,scope:!0,template:'<textarea style="display: none;"></textarea>',link:e}}function muPanelDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-panel组件</h2>"}}function muRadioDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-radio组件</h2>"}}function muSelectRun(e){e.put("selector/selector.html",'<div class="selector-container" ng-attr-dir="{{rtl ? \'rtl\' : \'ltr\'}}" ng-class="{open: isOpen, empty: !filteredOptions.length && (!create || !search), multiple: multiple, \'has-value\': hasValue(), rtl: rtl, loading: loading, \'remove-button\': removeButton, disabled: disabled}"><select name="{{name}}" ng-hide="true" ng-required="required && !hasValue()" ng-model="selectedValues" multiple ng-options="option as getObjValue(option, labelAttr) for option in selectedValues"></select><label class="selector-input"><ul class="selector-values"><li ng-repeat="(index, option) in selectedValues track by index"><div ng-include="viewItemTemplate"></div><div ng-if="multiple" class="selector-helper" ng-click="!disabled && unset(index)"><span class="selector-icon"></span></div></li></ul><input ng-model="search" placeholder="{{!hasValue() ? placeholder : \'\'}}" ng-model-options="{debounce: debounce}"ng-disabled="disabled" ng-readonly="disableSearch" ng-required="required && !hasValue()" autocomplete="off"><div ng-if="!multiple || loading" class="selector-helper selector-global-helper" ng-click="!disabled && removeButton && unset()"><span class="selector-icon"></span></div></label><ul class="selector-dropdown" ng-show="filteredOptions.length > 0 || (create && search)"><li class="selector-option create" ng-class="{active: highlighted == -1}" ng-if="create && search" ng-include="dropdownCreateTemplate" ng-mouseover="highlight(-1)" ng-click="createOption(search)"></li><li ng-repeat-start="(index, option) in filteredOptions track by index" class="selector-optgroup" ng-include="dropdownGroupTemplate" ng-show="groupAttr && (getObjValue(option, groupAttr) && index == 0 || getObjValue(filteredOptions[index - 1], groupAttr) != getObjValue(option, groupAttr))"></li><li ng-repeat-end ng-class="{active: highlighted == index, grouped: groupAttr && getObjValue(option, groupAttr)}" class="selector-option" ng-include="dropdownItemTemplate" ng-mouseover="highlight(index)" ng-click="set()"></li></ul></div>'),e.put("selector/item-create.html",'Add <i ng-bind="search"></i>'),e.put("selector/item-default.html",'<span ng-bind="getObjValue(option, labelAttr) || option"></span>'),e.put("selector/group-default.html",'<span ng-bind="getObjValue(option, groupAttr)"></span>')}function muSelectDirective(e,t,n,r,i){return new Selector(e,t,n,r,i)}function muSpinnerDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-spinner组件</h2>"}}function muTabDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-tab组件</h2>"}}function muReportDirective(){function e(e,t,n){function r(){e.report&&(e.compileCheck=e.report["compile check"],e.staticCheck=e.report["static check"],e.standardTests=e.report["standard tests"],e.randomTests=e.report["random tests"],e.memoryCheck=e.report["memory check"],e.googleTest=e.report["google tests"],e.gtestFailedList=[],e.gtestAllList=[])}function i(){if(e.standardTests){for(var t=e.standardTests["standard tests"],n=0;n<t.length;n++)t[n].stdin&&"\n"==t[n].stdin[t[n].stdin.length-1]&&(t[n].stdin+="\n"),t[n].standard_stdout&&"\n"==t[n].standard_stdout[t[n].standard_stdout.length-1]&&(t[n].standard_stdout+="\n"),t[n].stdout&&"\n"==t[n].stdout[t[n].stdout.length-1]&&(t[n].stdout+="\n");e.standardTests["standard tests"]=t}if(e.randomTests){for(var r=e.randomTests["random tests"],i=0;i<r.length;i++)r[i].stdin&&"\n"==r[i].stdin[r[i].stdin.length-1]&&(r[i].stdin+="\n"),r[i].standard_stdout&&"\n"==r[i].standard_stdout[r[i].standard_stdout.length-1]&&(r[i].standard_stdout+="\n"),r[i].stdout&&"\n"==r[i].stdout[r[i].stdout.length-1]&&(r[i].stdout+="\n");e.randomTests["random tests"]=r}}function a(){if(e.googleTest&&e.googleTest["google tests"][0].gtest.info&&(e.gtestAllList=Object.getOwnPropertyNames(e.googleTest["google tests"][0].gtest.info),null!=e.googleTest["google tests"][0].gtest.failure)){var t=e.googleTest["google tests"][0].gtest.failure,n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.gtestFailedList.push(Object.getOwnPropertyNames(s)[0])}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}}e.congigName=n.config,e.reportName=n.report;var o=e.$parent[e.congigName],s=e.$parent[e.reportName];s&&o?(e.report=s,e.config=o,r(),i(),a()):e.compileCheck=e.staticCheck=e.standardTests=e.randomTests=e.memoryCheck=e.googleTest=null,e.reportName&&e.$parent.$watch(e.reportName,function(){e.report=e.$parent[e.reportName],r(),i(),a()}),e.congigName&&e.$parent.$watch(e.congigName,function(){e.config=e.$parent[e.congigName],r(),i(),a()})}function t(){return'\n    <div id="matrixui-programming-report">\n      <div ng-if="config.grading[&quot;compile check&quot;]" class="compile-check report-section">\n        <div ng-click="toggleContent($event)" class="compile-check-score score">Compile Check : You Get {{compileCheck.grade? compileCheck.grade : 0}} Points of {{config.grading[\'compile check\']}} Points</div>\n        <div ng-if="compileCheck[&quot;compile check&quot;]" class="compile-error-content test-content">\n          <div ng-if="compileCheck.grade == config.grading[&quot;compile check&quot;]" class="report-detail">\n            <pre class="full-score">Pass compilation. You got full score!</pre>\n          </div>\n          <div ng-if="compileCheck &amp;&amp; compileCheck.grade != config.grading[&quot;compile check&quot;]" class="report-detail">\n            <pre class="error-content red-color">Compilation fail.</pre>\n            <div class="error-detail">\n              <pre class="error-content">{{compileCheck[\'compile check\']}}</pre>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;static check&quot;]" class="static-check report-section">\n        <div ng-click="toggleContent($event)" class="static-check-score score">Static Check : You Get {{staticCheck.grade? staticCheck.grade : 0}} Points of {{config.grading[\'static check\']}} Points<a href="http://oclint.org/" target="_blank" ng-if="staticCheck.grade != config.grading[&quot;static check&quot;] &amp;&amp; staticCheck" class="link">Why it went wrong？</a></div>\n        <div class="static-check-content test-content">\n          <div ng-if="!staticCheck &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of errors above.</pre>\n          </div>\n          <div ng-if="!staticCheck &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="staticCheck.grade == config.grading[&quot;static check&quot;]" class="report-detail">\n            <pre class="full-score">Pass static check. You got full score!</pre>\n          </div>\n          <div ng-if="staticCheck &amp;&amp; (staticCheck.grade != config.grading[&quot;static check&quot;])" class="report-detail">\n            <pre class="error-content red-color">Static check fail.</pre>\n            <div class="error-detail">\n              <div class="message"></div>\n              <div ng-if="staticCheck[&quot;static check&quot;].summary" class="summary"></div>\n              <div ng-if="staticCheck[&quot;static check&quot;].violation" ng-repeat="item in staticCheck[&quot;static check&quot;].violation" class="violations">\n                <pre ng-if="item.message" class="error-content">{{ item.path | deleteSpace}} {{item.startLine}}:{{item.startColumn}} : {{item.category}}: {{item.message}}</pre>\n                <pre ng-if="item.rule &amp;&amp; !item.message" class="error-content">{{ item.path | deleteSpace }} {{item.startLine}}:{{item.startColumn}} : {{item.category}}: {{item.rule}}</pre>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;standard tests&quot;]" class="standard-tests-check report-section">\n        <div ng-click="toggleContent($event)" class="standard-tests-check-score score">Standard Tests : You Get {{standardTests.grade | formatReportGrade }} Points of {{config.grading[\'standard tests\']}} Points</div>\n        <div class="standard-tests-content test-content">\n          <div ng-if="!standardTests &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!standardTests &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="standardTests.grade == config.grading[&quot;standard tests&quot;]" class="report-detail">\n            <pre class="full-score">Pass standard test. You got full score!</pre>\n          </div>\n          <div ng-if="standardTests &amp;&amp; standardTests.grade != config.grading[&quot;standard tests&quot;]" class="report-detail">\n            <pre class="error-content red-color">Some examples of failed standard test cases:</pre>\n            <div class="error-detail">\n              <div ng-repeat="test in standardTests[&quot;standard tests&quot;] | showWrongTests | limitTo: 3" class="standard-tests">\n                <hr ng-if="$index != 0"/>\n                <div ng-if="test.result != &quot;CR&quot;" class="standard-test">\n                  <div layout="layout" class="tests-check-summary">\n                    <pre layout="layout">[{{ $index+1 }}]</pre>\n                    <pre layout="layout" ng-if="test.memoryused">Memory Used : {{test.memoryused}}kb</pre>\n                    <pre layout="layout" ng-if="test.timeused">Time Used : {{test.timeused}}ms</pre>\n                    <pre layout="layout" ng-if="test.result">Result : {{test.result | formatReportResult}}</pre>\n                    <pre layout="layout" ng-if="test.memorylimit">Memory Limit : {{ test.memorylimit }}kb</pre>\n                    <pre layout="layout" ng-if="test.timelimit">Time Limit : {{ test.timelimit }}ms</pre>\n                  </div>\n                  <pre class="label">Standard Input :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdin }}</pre>\n                  <pre class="label">Standard Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.standard_stdout | formatReportOutput }}</pre>\n                  <pre class="label">Your Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdout | formatReportOutput }}</pre>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;random tests&quot;]" class="random-tests-check report-section">\n        <div ng-click="toggleContent($event)" class="random-tests-check-score score">Random Tests : You Get {{randomTests.grade | formatReportGrade}} Points of {{config.grading[\'random tests\']}} Points</div>\n        <div class="random-tests-content test-content">\n          <div ng-if="!randomTests &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!randomTest &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="randomTests.grade == config.grading[&quot;random tests&quot;]" class="report-detail">\n            <pre class="full-score">Pass random check. You got full score!</pre>\n          </div>\n          <div ng-if="randomTests &amp;&amp; randomTests.grade != config.grading[&quot;random tests&quot;]" class="report-detail">\n            <pre class="error-content red-color">Some examples of failed random test cases:</pre>\n            <div class="error-detail">\n              <div ng-repeat="test in randomTests[&quot;random tests&quot;] | showWrongTests | limitTo: 3" class="random-tests">\n                <hr ng-if="$index != 0"/>\n                <div ng-if="test.result != &quot;CR&quot;" class="random-test">\n                  <div layout="layout" class="tests-check-summary">\n                    <pre layout="layout">[{{ $index+1 }}]</pre>\n                    <pre layout="layout" ng-if="test.memoryused">Memory Used : {{ test.memoryused }}kb</pre>\n                    <pre layout="layout" ng-if="test.timeused">Time Used : {{ test.timeused }}ms</pre>\n                    <pre layout="layout" ng-if="test.result">Result : {{ test.result | formatReportResult}}</pre>\n                    <pre layout="layout" ng-if="test.memorylimit">Memory Limit : {{ test.memorylimit }}kb</pre>\n                    <pre layout="layout" ng-if="test.timelimit">Time Limit : {{ test.timelimit }}ms</pre>\n                  </div>\n                  <pre class="label">Standard Input :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdin }}</pre>\n                  <pre class="label">Standard Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.standard_stdout | formatReportOutput }}</pre>\n                  <pre class="label">Your Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdout | formatReportOutput }}</pre>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;memory check&quot;]" class="memory-check report-section">\n        <div ng-click="toggleContent($event)" class="memory-check-score score">Memory Check : You Get {{memoryCheck.grade | formatReportGrade}} Points of {{config.grading[\'memory check\']}} Points<a href="http://valgrind.org/" ng-if="memoryCheck.grade != config.grading[&quot;memory check&quot;] &amp;&amp; memoryCheck" class="link">Why it went wrong？</a></div>\n        <div class="memory-check-content test-content">\n          <div ng-if="!memoryCheck &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!memoryCheck &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="memoryCheck.grade == config.grading[&quot;memory check&quot;]" class="report-detail">\n            <pre class="full-score">Pass memory access check. You got full score!</pre>\n          </div>\n          <div ng-if="memoryCheck &amp;&amp; memoryCheck.grade != config.grading[&quot;memory check&quot;]" class="report-detail">\n            <pre class="error-content red-color">Memory check fail.</pre>\n            <div class="error-detail">\n              <div ng-repeat="check in memoryCheck[&quot;memory check&quot;]" class="memory-checks">\n                <hr ng-if="$index != 0"/>\n                <pre ng-if="check.message" class="memory-check-summary">[{{ $index+1 }}] {{ check.message }}</pre>\n                <pre ng-if="check.valgrindoutput.error.kind" class="memory-check-summary">[{{ $index+1 }}] Error :   {{ check.valgrindoutput.error.kind }}</pre>\n                <pre ng-if="check.stdin">Standard Input :</pre>\n                <pre ng-if="check.stdin" class="error-content inout-tests">{{ check.stdin }}</pre>\n                <div ng-if="check.valgrindoutput.error.stack.frame" class="memory-check">\n                  <div ng-repeat="frame in check.valgrindoutput.error.stack.frame">\n                    <hr ng-if="$index != 0"/>\n                    <pre ng-if="frame.obj" class="error-content">obj: {{ frame.obj }}</pre>\n                    <pre ng-if="frame.file &amp;&amp; frame.line" class="error-content">[{{ frame.file }}]: line {{ frame.line }}</pre>\n                    <pre ng-if="frame.fn" class="error-content">{{ frame.fn }}</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;google tests&quot;]" class="google-test report-section">\n        <div ng-click="toggleContent($event)" class="google-test-score score">Google Test : You Get {{googleTest.grade | formatReportGrade}} Points of {{config.grading[\'google tests\']}} Points</div>\n        <div class="google-test-content test-content">\n          <div ng-if="!googleTest &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!googleTest &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="googleTest.grade == config.grading[&quot;google tests&quot;]" class="report-detail">\n            <pre class="full-score">Pass Google test. You got full score!</pre>\n          </div>\n          <div ng-if="googleTest &amp;&amp; googleTest.grade != config.grading[&quot;google tests&quot;]" class="report-detail">\n            <pre class="error-content red-color">Google test fail</pre>\n            <div ng-show="googleTest[&quot;google tests&quot;][0].gtest.info != null" class="error-detail">\n              <pre ng-repeat="fail in gtestFailedList" class="error-content">{{fail}} : {{googleTest[\'google tests\'][0].gtest.info[fail]}}</pre>\n            </div>\n            <div ng-show="googleTest[&quot;google tests&quot;][0].gtest.info == null" class="error-detail">\n              <pre class="error-content">error: {{ googleTest[\'google tests\'][0].gtest.failure[0][\'error\'] }}</pre>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    '}return{restrict:"E",transclude:!0,replace:!0,template:t,scope:!0,link:e}}angular.module("matrixui.components",["matrixui.components.button","matrixui.components.card","matrixui.components.checkbox","matrixui.components.codeeditor","matrixui.components.datatable","matrixui.components.dialog","matrixui.components.markdown","matrixui.components.mdeditor","matrixui.components.panel","matrixui.components.radio","matrixui.components.select","matrixui.components.spinner","matrixui.components.tab"]),angular.module("matrixui",["matrixui.components","matrixui.specials"]),angular.module("matrixui.specials",["matrixui.specials.report"]),angular.module("matrixui.components.button",[]).directive("muButton",muButtonDirective),muButtonDirective.$inject=["$timeout"],angular.module("matrixui.components.card",[]).directive("muCard",muCardDirective),muCardDirective.$inject=[],angular.module("matrixui.components.checkbox",[]).directive("muCheckbox",muCheckboxDirective),muCheckboxDirective.$inject=[],angular.module("matrixui.components.codeeditor",[]).directive("muCodeeditor",muCodeeditorDirective),muCodeeditorDirective.$inject=[],angular.module("matrixui.components.datatable",[]).directive("muDatatable",muDatatableDirective),muDatatableDirective.$inject=[],angular.module("matrixui.components.dialog",[]).directive("muDialog",muDialogDirective),muDialogDirective.$inject=[],angular.module("matrixui.components.markdown",[]).directive("muMarkdown",muMarkdowndDirective),muMarkdowndDirective.$inject=[],angular.module("matrixui.components.mdeditor",[]).directive("muMdeditor",muMdeditorDirective),muMdeditorDirective.$inject=[],angular.module("matrixui.components.panel",[]).directive("muPanel",muPanelDirective),muPanelDirective.$inject=[],angular.module("matrixui.components.radio",[]).directive("muRadio",muRadioDirective),muRadioDirective.$inject=[],angular.module("matrixui.components.select",[]).run(muSelectRun).directive("muSelect",muSelectDirective),muSelectRun.$inject=["$templateCache"];var Selector=null;muSelectDirective.$inject=["$filter","$timeout","$window","$http","$q"],Selector=function(){function e(e){return e instanceof HTMLElement?e.ownerDocument&&e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e):window.getComputedStyle(e):{}}function t(e,t,n,l,c){this.restrict="EAC",this.replace=!0,this.transclude=!0,this.scope={name:"@?",value:"=model",disabled:"=?disable",disableSearch:"=?",required:"=?require",multiple:"=?multi",placeholder:"@?",valueAttr:"@",labelAttr:"@?",groupAttr:"@?",options:"=?",debounce:"=?",create:"&?",limit:"=?",rtl:"=?",api:"=?",change:"&?",remote:"&?",remoteParam:"@?",remoteValidation:"&?",remoteValidationParam:"@?",removeButton:"=?",softDelete:"=?",closeAfterSelection:"=?",viewItemTemplate:"=?",dropdownItemTemplate:"=?",dropdownCreateTemplate:"=?",dropdownGroupTemplate:"=?"},this.templateUrl="selector/selector.html",r=e,i=t,a=n,o=l,s=c}var n={up:38,down:40,left:37,right:39,escape:27,enter:13,backspace:8,delete:46,shift:16,leftCmd:91,rightCmd:93,ctrl:17,alt:18,tab:9},r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;return t.prototype.$inject=["$filter","$timeout","$window","$http","$q"],t.prototype.link=function(t,l,c,u,d){d(t,function(t,u){var d=r("filter"),m=angular.element(l[0].querySelector(".selector-input input")),p=angular.element(l[0].querySelector(".selector-dropdown")),g=m.controller("ngModel"),f=l.find("select").controller("ngModel"),h=s.defer(),v={api:{},search:"",disableSearch:!1,selectedValues:[],highlighted:0,valueAttr:null,labelAttr:"label",groupAttr:"group",options:[],debounce:0,limit:1/0,remoteParam:"q",remoteValidationParam:"value",removeButton:!0,viewItemTemplate:"selector/item-default.html",dropdownItemTemplate:"selector/item-default.html",dropdownCreateTemplate:"selector/item-create.html",dropdownGroupTemplate:"selector/group-default.html"};!angular.isDefined(u.value)&&u.multiple&&(u.value=[]),angular.forEach(v,function(e,t){angular.isDefined(u[t])||(u[t]=e)}),angular.forEach(["name","valueAttr","labelAttr"],function(e){c[e]||(c[e]=u[e])}),u.getObjValue=function(e,t){var n;if(!angular.isDefined(e)||!angular.isDefined(t))return e;if(t=angular.isArray(t)?t:t.split("."),n=t.shift(),n.indexOf("[")>0){var r=n.match(/(\w+)\[(\d+)\]/);null!==r&&(e=e[r[1]],n=r[2])}return 0===t.length?e[n]:u.getObjValue(e[n],t)},u.setObjValue=function(e,t,n){var r;if(angular.isDefined(e)||(e={}),t=angular.isArray(t)?t:t.split("."),r=t.shift(),r.indexOf("[")>0){var i=r.match(/(\w+)\[(\d+)\]/);null!==i&&(e=e[i[1]],r=i[2])}return e[r]=0===t.length?n:u.setObjValue(e[r],t,n),e},u.optionValue=function(e){return null==u.valueAttr?e:u.getObjValue(e,u.valueAttr)},u.optionEquals=function(e,t){return angular.equals(u.optionValue(e),angular.isDefined(t)?t:u.value)},u.setValue=function(e){u.multiple?u.value=null==u.valueAttr?e||[]:(e||[]).map(function(e){return u.getObjValue(e,u.valueAttr)}):u.value=null==u.valueAttr?e:u.getObjValue(e||{},u.valueAttr)},u.hasValue=function(){return u.multiple?(u.value||[]).length>0:!!u.value},u.request=function(e,t,n,r){var i,a={};if(u.disabled)return s.reject();if(!angular.isDefined(n))throw"Remote attribute is not defined";if(u.loading=!0,u.options=[],a[e]=t,i=n(a),"function"!=typeof i.then){var l={method:"GET",cache:!0,params:{}};angular.extend(l,i),angular.extend(l.params,i.params),l.params[r]=t,i=o(l)}return i.then(function(e){u.options=e.data||e,u.filterOptions(),u.loading=!1,h.resolve()},function(e){throw u.loading=!1,h.reject(),"Error while fetching data: "+(e.message||e)}),i},u.fetch=function(){return u.request("search",u.search||"",u.remote,u.remoteParam)},u.fetchValidation=function(e){return u.request("value",e,u.remoteValidation,u.remoteValidationParam)},angular.isDefined(u.remote)?angular.isDefined(u.remoteValidation)||(u.remoteValidation=!1):(u.remote=!1,u.remoteValidation=!1,h.resolve()),u.remote&&i(function(){s.when(u.hasValue()&&u.remoteValidation?u.fetchValidation(u.value):angular.noop).then(function(){u.$watch("search",function(){i(u.fetch)})})}),u.optionToObject=function(e,t){var n={},r=angular.element(e);angular.forEach(e.dataset,function(e,t){t.match(/^\$/)||(n[t]=e)}),e.value&&u.setObjValue(n,u.valueAttr||"value",e.value),r.text()&&u.setObjValue(n,u.labelAttr,r.text().trim()),angular.isDefined(t)&&u.setObjValue(n,u.groupAttr,t),u.options.push(n),!r.attr("selected")||!u.multiple&&u.hasValue()||(u.multiple?(u.value||(u.value=[]),u.value.push(u.optionValue(n))):u.value||(u.value=u.optionValue(n)))},u.fillWithHtml=function(){u.options=[],angular.forEach(t,function(e){var t=(e.tagName||"").toLowerCase();"option"==t&&u.optionToObject(e),"optgroup"==t&&angular.forEach(e.querySelectorAll("option"),function(t){u.optionToObject(t,(e.attributes.label||{}).value)})}),u.updateSelected()},u.initialize=function(){u.remote||angular.isArray(u.options)&&u.options.length||u.fillWithHtml(),u.hasValue()&&(u.multiple?angular.isArray(u.value)||(u.value=[u.value]):angular.isArray(u.value)&&(u.value=u.value[0]),u.updateSelected(),u.filterOptions(),u.updateValue())},u.$watch("multiple",function(){i(u.setInputWidth),h.promise.then(u.initialize,u.initialize)}),u.dropdownPosition=function(){var t=m.parent()[0],n=e(t),r=parseFloat(n.marginTop||0),i=parseFloat(n.marginLeft||0);p.css({top:t.offsetTop+t.offsetHeight+r+"px",left:t.offsetLeft+i+"px",width:t.offsetWidth+"px"})},u.open=function(){u.multiple&&(u.selectedValues||[]).length>=u.limit||(u.isOpen=!0,u.dropdownPosition(),i(u.scrollToHighlighted))},u.close=function(){u.isOpen=!1,u.resetInput(),u.remote&&i(u.fetch)},u.decrementHighlighted=function(){u.highlight(u.highlighted-1),u.scrollToHighlighted()},u.incrementHighlighted=function(){u.highlight(u.highlighted+1),u.scrollToHighlighted()},u.highlight=function(e){c.create&&u.search&&e==-1?u.highlighted=-1:u.filteredOptions.length&&(u.highlighted=(u.filteredOptions.length+e)%u.filteredOptions.length)},u.scrollToHighlighted=function(){var t=p[0],n=t.querySelectorAll("li.selector-option")[u.highlighted],r=e(n),a=parseFloat(r.marginTop||0),o=parseFloat(r.marginBottom||0);u.filteredOptions.length&&(n.offsetTop+n.offsetHeight+o>t.scrollTop+t.offsetHeight&&i(function(){t.scrollTop=n.offsetTop+n.offsetHeight+o-t.offsetHeight}),n.offsetTop-a<t.scrollTop&&i(function(){t.scrollTop=n.offsetTop-a}))},u.createOption=function(e){s.when(function(){var t={};return angular.isFunction(u.create)?t=u.create({input:e}):(u.setObjValue(t,u.labelAttr,e),u.setObjValue(t,u.valueAttr||"value",e)),t}()).then(function(e){u.options.push(e),u.set(e)})},u.set=function(e){u.multiple&&(u.selectedValues||[]).length>=u.limit||(angular.isDefined(e)||(e=u.filteredOptions[u.highlighted]),u.multiple?(u.selectedValues||(u.selectedValues=[]),u.selectedValues.indexOf(e)<0&&u.selectedValues.push(e)):u.selectedValues=[e],(!u.multiple||u.closeAfterSelection||(u.selectedValues||[]).length>=u.limit)&&u.close(),u.resetInput(),f.$setDirty())},u.unset=function(e){u.multiple?u.selectedValues.splice(angular.isDefined(e)?e:u.selectedValues.length-1,1):u.selectedValues=[],u.resetInput(),f.$setDirty()},u.keydown=function(e){switch(e.keyCode){case n.up:if(!u.isOpen)break;u.decrementHighlighted(),e.preventDefault();break;case n.down:u.isOpen?u.incrementHighlighted():u.open(),e.preventDefault();break;case n.escape:u.highlight(0),u.close();break;case n.enter:u.isOpen&&(c.create&&u.search&&u.highlighted==-1?u.createOption(e.target.value):u.filteredOptions.length&&u.set(),e.preventDefault());break;case n.backspace:if(!m.val()){var t=u.getObjValue(u.selectedValues.slice(-1)[0]||{},u.labelAttr||"");u.unset(),u.open(),u.softDelete&&!u.disableSearch&&i(function(){u.search=t}),e.preventDefault()}break;case n.left:case n.right:case n.shift:case n.ctrl:case n.alt:case n.tab:case n.leftCmd:case n.rightCmd:break;default:!u.multiple&&u.hasValue()?e.preventDefault():(u.open(),u.highlight(0))}},u.inOptions=function(e,t){return u.remote?e.filter(function(e){return angular.equals(t,e)}).length>0:e.indexOf(t)>=0},u.filterOptions=function(){if(u.filteredOptions=d(u.options||[],u.search),angular.isArray(u.selectedValues)||(u.selectedValues=[]),u.multiple)u.filteredOptions=u.filteredOptions.filter(function(e){
return!u.inOptions(u.selectedValues,e)});else{var e=u.filteredOptions.indexOf(u.selectedValues[0]);e>=0&&u.highlight(e)}},u.measureWidth=function(){var t,n=e(m[0]),r=angular.element('<span class="selector-shadow"></span>');return r.text(m.val()||(u.hasValue()?"":u.placeholder)||""),angular.element(document.body).append(r),angular.forEach(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(e){r.css(e,n[e])}),t=r[0].offsetWidth,r.remove(),t},u.setInputWidth=function(){var e=u.measureWidth()+1;m.css("width",e+"px")},u.resetInput=function(){m.val(""),u.setInputWidth(),i(function(){u.search=""})},u.$watch("[search, options, value]",function(){u.filterOptions(),i(function(){u.setInputWidth(),u.isOpen&&u.dropdownPosition()})},!0),u.updateValue=function(e){angular.isDefined(e)||(e=u.selectedValues||[]),u.setValue(u.multiple?e:e[0])},u.$watch("selectedValues",function(e,t){angular.equals(e,t)||(u.updateValue(),angular.isFunction(u.change)&&u.change(u.multiple?{newValue:e,oldValue:t}:{newValue:(e||[])[0],oldValue:(t||[])[0]}))},!0),u.$watchCollection("options",function(e,t){angular.equals(e,t)||u.remote||u.updateSelected()}),u.updateSelected=function(){u.multiple?u.selectedValues=(u.value||[]).map(function(e){return d(u.options,function(t){return u.optionEquals(t,e)})[0]}).filter(function(e){return angular.isDefined(e)}).slice(0,u.limit):u.selectedValues=(u.options||[]).filter(function(e){return u.optionEquals(e)}).slice(0,1)},u.$watch("value",function(e,t){angular.equals(e,t)||s.when(u.remote&&u.remoteValidation&&u.hasValue()?u.fetchValidation(e):angular.noop).then(function(){u.updateSelected(),u.filterOptions(),u.updateValue()})},!0),m=angular.element(l[0].querySelector(".selector-input input")).on("focus",function(){i(function(){u.$apply(u.open)})}).on("blur",function(){u.$apply(u.close)}).on("keydown",function(e){u.$apply(function(){u.keydown(e)})}).on("input",function(){u.setInputWidth()}),p.on("mousedown",function(e){e.preventDefault()}),angular.element(a).on("resize",function(){u.dropdownPosition()}),u.$watch(function(){return g.$pristine},function(e){f[e?"$setPristine":"$setDirty"]()}),u.$watch(function(){return g.$touched},function(e){f[e?"$setTouched":"$setUntouched"]()}),angular.forEach(["open","close","fetch"],function(e){u.api[e]=u[e]}),u.api.focus=function(){m[0].focus()},u.api.set=function(e){return u.value=e},u.api.unset=function(e){var t=e?(u.selectedValues||[]).filter(function(t){return u.optionEquals(t,e)}):u.selectedValues,n=u.selectedValues.map(function(e,n){return u.inOptions(t,e)?n:-1}).filter(function(e){return e>=0});angular.forEach(n,function(e,t){u.unset(e-t)})}})},t}(),angular.module("matrixui.components.spinner",[]).directive("muSpinner",muSpinnerDirective),muSpinnerDirective.$inject=[],angular.module("matrixui.components.tab",[]).directive("muTab",muTabDirective),muTabDirective.$inject=[],angular.module("matrixui.specials").filter("formatReportScore",function(){var e=void 0;return e=function(e){return e===-1||null===e?"正在评测并计算总分，请等候...":e}}),angular.module("matrixui.specials").filter("formatReportGrade",function(){var e=void 0;return e=function(e){return void 0===e||null===e?"0":e}}),angular.module("matrixui.specials").filter("formatReportOutput",function(){var e=void 0;return e=function(e){return void 0===e||null===e||""===e?"No output.":e}}),angular.module("matrixui.specials").filter("formatCheckMessage",function(){var e=void 0;return e=function(e){return null===e||void 0===e?"Pass.":e}}),angular.module("matrixui.specials").filter("formatSubmissionsGrade",function(){var e=void 0;return e=function(e){return null===e?"等待评测中":"-1"===e||e===-1?"正在评测":e}}),angular.module("matrixui.specials").filter("formatReportResult",function(){var e=void 0;return e=function(e){return"WA"===e?"Wrong Answer":"TL"===e?"Time Limit":"CR"===e?"Correct":"ML"===e?"Memory Limit":"RE"===e?"Runtime Error":"IE"===e?"Internal Error":"OL"===e?"Output Limit":e}}),angular.module("matrixui.specials").filter("deleteSpace",function(){var e=void 0;return e=function(e){var t=void 0;t="/"==e[0]?e.slice(5):e;for(var n=0;" "==t[n];)n++;return t.slice(n)}}),angular.module("matrixui.specials").filter("showWrongTests",function(){var e=void 0;return e=function(e){var t=void 0;if(e)return t=[],e.forEach(function(e){"CR"!==e.result&&t.push(e)}),t}}),angular.module("matrixui.specials.report",[]).directive("muReport",muReportDirective);