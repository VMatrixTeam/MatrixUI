"use strict";function muButtonDirective(e){function t(e){return angular.isDefined(e.href)||angular.isDefined(e.ngHref)||angular.isDefined(e.ngLink)||angular.isDefined(e.uiSref)}function r(e,r){if(t(r))return'<a class="mu-button" ng-transclude></a>';var n="undefined"==typeof r.type?"button":r.type;return'<button class="mu-button" type="'+n+'" ng-transclude></button>'}function n(r,n,i){t(i)&&angular.isDefined(i.ngDisabled)&&r.$watch(i.ngDisabled,function(e){n.attr("tabindex",e?-1:0)}),n.on("click",function(e){i.disabled===!0&&(e.preventDefault(),e.stopImmediatePropagation())}),n.hasClass("md-no-focus")||(r.mouseActive=!1,n.on("mousedown",function(){r.mouseActive=!0,e(function(){r.mouseActive=!1},100)}).on("focus",function(){r.mouseActive===!1&&n.addClass("md-focused")}).on("blur",function(e){n.removeClass("md-focused")}))}return{restrict:"E",replace:!0,transclude:!0,template:r,link:n}}function muCardDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>Card组件</h2>"}}function muCheckboxDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-checkbox组件</h2>"}}function muCodeeditorDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-codeeditor组件</h2>"}}function muDatatableDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-datable组件</h2>"}}function muDialogDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-dialog组件</h2>"}}function muMarkdowndDirective(){function e(e,r,n){function i(e){r.find("div").html(t(e))}e.name=n.ngModel;var o=n.content;o||(o=""),e.$parent[e.name]?o=e.$parent[e.name]:e.$parent[e.name]="",e.content=o,r.find("div").html(t(e.content)),e.name&&e.$parent.$watch(e.name,function(){function t(){i(n),MathJax.Hub.Typeset(r[0])}var n=e.$parent[e.name];if(n||(n=e.content),!window.MathJax)throw Error("MathJax没有加载");try{t()}catch(e){console.warn("markdown warn: 给定的数据暂时无法渲染，等待数据更新...")}})}function t(e){if(window.marked)return hljs&&marked.setOptions({highlight:function(e){return hljs.highlightAuto(e).value}}),marked(e);throw Error("marked is not defined")}return{restrict:"E",template:"\n      <div class='markdown-body'>\n        <div ng-transclude></div>\n      </div>\n    ",transclude:!0,scope:!0,link:e}}function muMdeditorDirective(){function e(e,i,o){function a(e,t){return angular.element(t).addClass("markdown-body"),n(e,t),MathJax.Hub.Typeset(t),t.innerHTML}function s(){var n=o.type||"simple",s=null;s="full"===n?t():r(),e.mde=new SimpleMDE({spellChecker:!1,element:i.find("textarea")[0],toolbar:s,previewRender:a,tabSize:2}),o.content&&e.mde.value(o.content)}e.name=o.ngModel;var c=o.content;if(c||(c=""),e.$parent[e.name]?c=e.$parent[e.name]:e.$parent[e.name]="",e.content=c,e.name&&e.$parent.$watch(e.name,function(){e.mde&&e.mde.value(e.$parent[e.name])}),!window.SimpleMDE)throw Error("mu-mdeditor error: SimpleMDE没有加载");s()}function t(){var e=["heading-1","heading-2","heading-3","bold","italic","|","quote","code","link","image","|","unordered-list","ordered-list","|","preview","side-by-side","fullscreen","|","guide"];return e}function r(){var e=["heading-1","heading-2","heading-3","bold","italic","|","quote","code","link","image","|","unordered-list","ordered-list","|","preview","|","guide"];return e}function n(e,t){angular.element(t).html(i(e))}function i(e){if(window.marked)return hljs&&marked.setOptions({highlight:function(e){return hljs.highlightAuto(e).value}}),marked(e);throw Error("marked is not defined")}return{restrict:"E",transclude:!0,scope:!0,template:'<textarea style="display: none;"></textarea>',link:e}}function muPanelDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-panel组件</h2>"}}function muRadioDirective(){function e(e,r){var n=angular.element(e),i=r.name+"-"+r.value;n.attr("for",i),n.find("input").attr("id",i),n.find("input").attr("name",r.name),n.find("input").attr("value",r.value),t(e,r.size)}function t(e,t){var r=angular.element(e),n=r.find("label")[0];n.classList.add(t)}function r(e){var t=angular.element(e);t[0].addEventListener("click",function(e){console.log("click"),t.find("input").attr("checked",!0)})}return{restrict:"EA",replace:!0,transclude:!0,template:'<div class="radio"><input type="radio" class="regular-radio"></input><label></label></div>',link:function(t,n,i){e(n,i),r(n)}}}function muSelectDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-select组件</h2>"}}function muSpinnerDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-spinner组件</h2>"}}function muTabDirective(){return{restrict:"E",replace:!0,transclude:!0,template:"<h2>mu-tab组件</h2>"}}function muReportDirective(){function e(e,t,r){function n(){e.report&&(e.compileCheck=e.report["compile check"],e.staticCheck=e.report["static check"],e.standardTests=e.report["standard tests"],e.randomTests=e.report["random tests"],e.memoryCheck=e.report["memory check"],e.googleTest=e.report["google tests"],e.gtestFailedList=[],e.gtestAllList=[])}function i(){if(e.standardTests){for(var t=e.standardTests["standard tests"],r=0;r<t.length;r++)t[r].stdin&&"\n"==t[r].stdin[t[r].stdin.length-1]&&(t[r].stdin+="\n"),t[r].standard_stdout&&"\n"==t[r].standard_stdout[t[r].standard_stdout.length-1]&&(t[r].standard_stdout+="\n"),t[r].stdout&&"\n"==t[r].stdout[t[r].stdout.length-1]&&(t[r].stdout+="\n");e.standardTests["standard tests"]=t}if(e.randomTests){for(var n=e.randomTests["random tests"],i=0;i<n.length;i++)n[i].stdin&&"\n"==n[i].stdin[n[i].stdin.length-1]&&(n[i].stdin+="\n"),n[i].standard_stdout&&"\n"==n[i].standard_stdout[n[i].standard_stdout.length-1]&&(n[i].standard_stdout+="\n"),n[i].stdout&&"\n"==n[i].stdout[n[i].stdout.length-1]&&(n[i].stdout+="\n");e.randomTests["random tests"]=n}}function o(){if(e.googleTest&&e.googleTest["google tests"][0].gtest.info&&(e.gtestAllList=Object.getOwnPropertyNames(e.googleTest["google tests"][0].gtest.info),null!=e.googleTest["google tests"][0].gtest.failure)){var t=e.googleTest["google tests"][0].gtest.failure,r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;e.gtestFailedList.push(Object.getOwnPropertyNames(s)[0])}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}}}e.congigName=r.config,e.reportName=r.report;var a=e.$parent[e.congigName],s=e.$parent[e.reportName];s&&a?(e.report=s,e.config=a,n(),i(),o()):e.compileCheck=e.staticCheck=e.standardTests=e.randomTests=e.memoryCheck=e.googleTest=null,e.reportName&&e.$parent.$watch(e.reportName,function(){e.report=e.$parent[e.reportName],n(),i(),o()}),e.congigName&&e.$parent.$watch(e.congigName,function(){e.config=e.$parent[e.congigName],n(),i(),o()})}function t(){return'\n    <div id="matrixui-programming-report">\n      <div ng-if="config.grading[&quot;compile check&quot;]" class="compile-check report-section">\n        <div ng-click="toggleContent($event)" class="compile-check-score score">Compile Check : You Get {{compileCheck.grade? compileCheck.grade : 0}} Points of {{config.grading[\'compile check\']}} Points</div>\n        <div ng-if="compileCheck[&quot;compile check&quot;]" class="compile-error-content test-content">\n          <div ng-if="compileCheck.grade == config.grading[&quot;compile check&quot;]" class="report-detail">\n            <pre class="full-score">Pass compilation. You got full score!</pre>\n          </div>\n          <div ng-if="compileCheck &amp;&amp; compileCheck.grade != config.grading[&quot;compile check&quot;]" class="report-detail">\n            <pre class="error-content red-color">Compilation fail.</pre>\n            <div class="error-detail">\n              <pre class="error-content">{{compileCheck[\'compile check\']}}</pre>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;static check&quot;]" class="static-check report-section">\n        <div ng-click="toggleContent($event)" class="static-check-score score">Static Check : You Get {{staticCheck.grade? staticCheck.grade : 0}} Points of {{config.grading[\'static check\']}} Points<a href="http://oclint.org/" target="_blank" ng-if="staticCheck.grade != config.grading[&quot;static check&quot;] &amp;&amp; staticCheck" class="link">Why it went wrong？</a></div>\n        <div class="static-check-content test-content">\n          <div ng-if="!staticCheck &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of errors above.</pre>\n          </div>\n          <div ng-if="!staticCheck &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="staticCheck.grade == config.grading[&quot;static check&quot;]" class="report-detail">\n            <pre class="full-score">Pass static check. You got full score!</pre>\n          </div>\n          <div ng-if="staticCheck &amp;&amp; (staticCheck.grade != config.grading[&quot;static check&quot;])" class="report-detail">\n            <pre class="error-content red-color">Static check fail.</pre>\n            <div class="error-detail">\n              <div class="message"></div>\n              <div ng-if="staticCheck[&quot;static check&quot;].summary" class="summary"></div>\n              <div ng-if="staticCheck[&quot;static check&quot;].violation" ng-repeat="item in staticCheck[&quot;static check&quot;].violation" class="violations">\n                <pre ng-if="item.message" class="error-content">{{ item.path | deleteSpace}} {{item.startLine}}:{{item.startColumn}} : {{item.category}}: {{item.message}}</pre>\n                <pre ng-if="item.rule &amp;&amp; !item.message" class="error-content">{{ item.path | deleteSpace }} {{item.startLine}}:{{item.startColumn}} : {{item.category}}: {{item.rule}}</pre>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;standard tests&quot;]" class="standard-tests-check report-section">\n        <div ng-click="toggleContent($event)" class="standard-tests-check-score score">Standard Tests : You Get {{standardTests.grade | formatReportGrade }} Points of {{config.grading[\'standard tests\']}} Points</div>\n        <div class="standard-tests-content test-content">\n          <div ng-if="!standardTests &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!standardTests &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="standardTests.grade == config.grading[&quot;standard tests&quot;]" class="report-detail">\n            <pre class="full-score">Pass standard test. You got full score!</pre>\n          </div>\n          <div ng-if="standardTests &amp;&amp; standardTests.grade != config.grading[&quot;standard tests&quot;]" class="report-detail">\n            <pre class="error-content red-color">Some examples of failed standard test cases:</pre>\n            <div class="error-detail">\n              <div ng-repeat="test in standardTests[&quot;standard tests&quot;] | showWrongTests | limitTo: 3" class="standard-tests">\n                <hr ng-if="$index != 0"/>\n                <div ng-if="test.result != &quot;CR&quot;" class="standard-test">\n                  <div layout="layout" class="tests-check-summary">\n                    <pre layout="layout">[{{ $index+1 }}]</pre>\n                    <pre layout="layout" ng-if="test.memoryused">Memory Used : {{test.memoryused}}kb</pre>\n                    <pre layout="layout" ng-if="test.timeused">Time Used : {{test.timeused}}ms</pre>\n                    <pre layout="layout" ng-if="test.result">Result : {{test.result | formatReportResult}}</pre>\n                    <pre layout="layout" ng-if="test.memorylimit">Memory Limit : {{ test.memorylimit }}kb</pre>\n                    <pre layout="layout" ng-if="test.timelimit">Time Limit : {{ test.timelimit }}ms</pre>\n                  </div>\n                  <pre class="label">Standard Input :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdin }}</pre>\n                  <pre class="label">Standard Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.standard_stdout | formatReportOutput }}</pre>\n                  <pre class="label">Your Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdout | formatReportOutput }}</pre>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;random tests&quot;]" class="random-tests-check report-section">\n        <div ng-click="toggleContent($event)" class="random-tests-check-score score">Random Tests : You Get {{randomTests.grade | formatReportGrade}} Points of {{config.grading[\'random tests\']}} Points</div>\n        <div class="random-tests-content test-content">\n          <div ng-if="!randomTests &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!randomTest &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="randomTests.grade == config.grading[&quot;random tests&quot;]" class="report-detail">\n            <pre class="full-score">Pass random check. You got full score!</pre>\n          </div>\n          <div ng-if="randomTests &amp;&amp; randomTests.grade != config.grading[&quot;random tests&quot;]" class="report-detail">\n            <pre class="error-content red-color">Some examples of failed random test cases:</pre>\n            <div class="error-detail">\n              <div ng-repeat="test in randomTests[&quot;random tests&quot;] | showWrongTests | limitTo: 3" class="random-tests">\n                <hr ng-if="$index != 0"/>\n                <div ng-if="test.result != &quot;CR&quot;" class="random-test">\n                  <div layout="layout" class="tests-check-summary">\n                    <pre layout="layout">[{{ $index+1 }}]</pre>\n                    <pre layout="layout" ng-if="test.memoryused">Memory Used : {{ test.memoryused }}kb</pre>\n                    <pre layout="layout" ng-if="test.timeused">Time Used : {{ test.timeused }}ms</pre>\n                    <pre layout="layout" ng-if="test.result">Result : {{ test.result | formatReportResult}}</pre>\n                    <pre layout="layout" ng-if="test.memorylimit">Memory Limit : {{ test.memorylimit }}kb</pre>\n                    <pre layout="layout" ng-if="test.timelimit">Time Limit : {{ test.timelimit }}ms</pre>\n                  </div>\n                  <pre class="label">Standard Input :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdin }}</pre>\n                  <pre class="label">Standard Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.standard_stdout | formatReportOutput }}</pre>\n                  <pre class="label">Your Output :</pre>\n                  <pre class="error-content inout-tests">{{ test.stdout | formatReportOutput }}</pre>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;memory check&quot;]" class="memory-check report-section">\n        <div ng-click="toggleContent($event)" class="memory-check-score score">Memory Check : You Get {{memoryCheck.grade | formatReportGrade}} Points of {{config.grading[\'memory check\']}} Points<a href="http://valgrind.org/" ng-if="memoryCheck.grade != config.grading[&quot;memory check&quot;] &amp;&amp; memoryCheck" class="link">Why it went wrong？</a></div>\n        <div class="memory-check-content test-content">\n          <div ng-if="!memoryCheck &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!memoryCheck &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="memoryCheck.grade == config.grading[&quot;memory check&quot;]" class="report-detail">\n            <pre class="full-score">Pass memory access check. You got full score!</pre>\n          </div>\n          <div ng-if="memoryCheck &amp;&amp; memoryCheck.grade != config.grading[&quot;memory check&quot;]" class="report-detail">\n            <pre class="error-content red-color">Memory check fail.</pre>\n            <div class="error-detail">\n              <div ng-repeat="check in memoryCheck[&quot;memory check&quot;]" class="memory-checks">\n                <hr ng-if="$index != 0"/>\n                <pre ng-if="check.message" class="memory-check-summary">[{{ $index+1 }}] {{ check.message }}</pre>\n                <pre ng-if="check.valgrindoutput.error.kind" class="memory-check-summary">[{{ $index+1 }}] Error :   {{ check.valgrindoutput.error.kind }}</pre>\n                <pre ng-if="check.stdin">Standard Input :</pre>\n                <pre ng-if="check.stdin" class="error-content inout-tests">{{ check.stdin }}</pre>\n                <div ng-if="check.valgrindoutput.error.stack.frame" class="memory-check">\n                  <div ng-repeat="frame in check.valgrindoutput.error.stack.frame">\n                    <hr ng-if="$index != 0"/>\n                    <pre ng-if="frame.obj" class="error-content">obj: {{ frame.obj }}</pre>\n                    <pre ng-if="frame.file &amp;&amp; frame.line" class="error-content">[{{ frame.file }}]: line {{ frame.line }}</pre>\n                    <pre ng-if="frame.fn" class="error-content">{{ frame.fn }}</pre>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="config.grading[&quot;google tests&quot;]" class="google-test report-section">\n        <div ng-click="toggleContent($event)" class="google-test-score score">Google Test : You Get {{googleTest.grade | formatReportGrade}} Points of {{config.grading[\'google tests\']}} Points</div>\n        <div class="google-test-content test-content">\n          <div ng-if="!googleTest &amp;&amp; grade &gt;= 0" class="report-detail">\n            <pre class="not-executing-check">This check didn\'t execute because of error above.</pre>\n          </div>\n          <div ng-if="!googleTest &amp;&amp; grade == -1" class="report-detail">\n            <pre class="under-checking">Under testing...</pre>\n          </div>\n          <div ng-if="googleTest.grade == config.grading[&quot;google tests&quot;]" class="report-detail">\n            <pre class="full-score">Pass Google test. You got full score!</pre>\n          </div>\n          <div ng-if="googleTest &amp;&amp; googleTest.grade != config.grading[&quot;google tests&quot;]" class="report-detail">\n            <pre class="error-content red-color">Google test fail</pre>\n            <div ng-show="googleTest[&quot;google tests&quot;][0].gtest.info != null" class="error-detail">\n              <pre ng-repeat="fail in gtestFailedList" class="error-content">{{fail}} : {{googleTest[\'google tests\'][0].gtest.info[fail]}}</pre>\n            </div>\n            <div ng-show="googleTest[&quot;google tests&quot;][0].gtest.info == null" class="error-detail">\n              <pre class="error-content">error: {{ googleTest[\'google tests\'][0].gtest.failure[0][\'error\'] }}</pre>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    '}return{restrict:"E",transclude:!0,replace:!0,template:t,scope:!0,link:e}}angular.module("matrixui.components",["matrixui.components.button","matrixui.components.card","matrixui.components.checkbox","matrixui.components.codeeditor","matrixui.components.datatable","matrixui.components.dialog","matrixui.components.markdown","matrixui.components.mdeditor","matrixui.components.panel","matrixui.components.radio","matrixui.components.select","matrixui.components.spinner","matrixui.components.tab"]),angular.module("matrixui",["matrixui.components","matrixui.specials"]),angular.module("matrixui.specials",["matrixui.specials.report"]),angular.module("matrixui.components.button",[]).directive("muButton",muButtonDirective),muButtonDirective.$inject=["$timeout"],angular.module("matrixui.components.card",[]).directive("muCard",muCardDirective),muCardDirective.$inject=[],angular.module("matrixui.components.checkbox",[]).directive("muCheckbox",muCheckboxDirective),muCheckboxDirective.$inject=[],angular.module("matrixui.components.codeeditor",[]).directive("muCodeeditor",muCodeeditorDirective),muCodeeditorDirective.$inject=[],angular.module("matrixui.components.datatable",[]).directive("muDatatable",muDatatableDirective),muDatatableDirective.$inject=[],angular.module("matrixui.components.dialog",[]).directive("muDialog",muDialogDirective),muDialogDirective.$inject=[],angular.module("matrixui.components.markdown",[]).directive("muMarkdown",muMarkdowndDirective),muMarkdowndDirective.$inject=[],angular.module("matrixui.components.mdeditor",[]).directive("muMdeditor",muMdeditorDirective),muMdeditorDirective.$inject=[],angular.module("matrixui.components.panel",[]).directive("muPanel",muPanelDirective),muPanelDirective.$inject=[],angular.module("matrixui.components.radio",[]).directive("muRadio",muRadioDirective),muRadioDirective.$inject=[],angular.module("matrixui.components.select",[]).directive("muSelect",muSelectDirective),muSelectDirective.$inject=[],angular.module("matrixui.components.spinner",[]).directive("muSpinner",muSpinnerDirective),muSpinnerDirective.$inject=[],angular.module("matrixui.components.tab",[]).directive("muTab",muTabDirective),muTabDirective.$inject=[],angular.module("matrixui.specials").filter("formatReportScore",function(){var e=void 0;return e=function(e){return e===-1||null===e?"正在评测并计算总分，请等候...":e}}),angular.module("matrixui.specials").filter("formatReportGrade",function(){var e=void 0;return e=function(e){return void 0===e||null===e?"0":e}}),angular.module("matrixui.specials").filter("formatReportOutput",function(){var e=void 0;return e=function(e){return void 0===e||null===e||""===e?"No output.":e}}),angular.module("matrixui.specials").filter("formatCheckMessage",function(){var e=void 0;return e=function(e){return null===e||void 0===e?"Pass.":e}}),angular.module("matrixui.specials").filter("formatSubmissionsGrade",function(){var e=void 0;return e=function(e){return null===e?"等待评测中":"-1"===e||e===-1?"正在评测":e}}),angular.module("matrixui.specials").filter("formatReportResult",function(){var e=void 0;return e=function(e){return"WA"===e?"Wrong Answer":"TL"===e?"Time Limit":"CR"===e?"Correct":"ML"===e?"Memory Limit":"RE"===e?"Runtime Error":"IE"===e?"Internal Error":"OL"===e?"Output Limit":e}}),angular.module("matrixui.specials").filter("deleteSpace",function(){var e=void 0;return e=function(e){var t=void 0;t="/"==e[0]?e.slice(5):e;for(var r=0;" "==t[r];)r++;return t.slice(r)}}),angular.module("matrixui.specials").filter("showWrongTests",function(){var e=void 0;return e=function(e){var t=void 0;if(e)return t=[],e.forEach(function(e){"CR"!==e.result&&t.push(e)}),t}}),angular.module("matrixui.specials.report",[]).directive("muReport",muReportDirective);